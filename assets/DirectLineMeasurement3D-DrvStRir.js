import{ls as h,r as t,o as i,am as y,lv as v,p as m,lt as U,e as O,a as x,w as V,lq as z,ir as C,lu as k,it as w,jE as A,lr as g,iv as M}from"./index-v3vBpdnQ.js";import{l as T}from"./Analysis-8JdthlNy.js";import{V as q}from"./AnalysisViewModel-CCUqR_Hw.js";import{u as B}from"./MeasurementWidgetContent-B5yImZ2q.js";let u=class extends T{constructor(e){super(e),this.type="direct-line-measurement",this.startPoint=null,this.endPoint=null,this.unit=null}get valid(){return this.startPoint!=null&&this.endPoint!=null}clear(){this.startPoint=null,this.endPoint=null}equals(e){return this===e||super.equals(e)&&this.unit===e.unit&&h(this.startPoint,e.startPoint)&&h(this.endPoint,e.endPoint)}};t([i({type:["direct-line-measurement"]})],u.prototype,"type",void 0),t([i({type:y})],u.prototype,"startPoint",void 0),t([i({type:y})],u.prototype,"endPoint",void 0),t([i({type:v,value:null})],u.prototype,"unit",void 0),t([i({readOnly:!0})],u.prototype,"valid",null),u=t([m("esri.analysis.DirectLineMeasurementAnalysis")],u);const L=u;let r=class extends q{constructor(s){super(s),this.analysis=null,this._userUnitOptions=null,this._userUnit=null,this.supportedViewType="3d",this.unsupportedErrorMessage="DirectLineMeasurement3DViewModel is only supported in 3D views.",s?.isDefaultViewModel||U(O.getLogger(this),"Direct Line Measurement 3D","arcgis-direct-line-measurement-3d",{version:"4.33"})}initialize(){this.addHandles(x(()=>({analysis:this.analysis,unit:this.unit}),({analysis:s,unit:l})=>{s!=null&&(s.unit=l)},V))}get state(){return this.disabled||!this.ready?"disabled":this.tool==null?"ready":this.tool.state}get measurement(){const{tool:s}=this;if(s==null)return null;const l=()=>({text:null,state:"unavailable"}),o=d=>({text:d,state:"available"}),{analysisViewData:a}=s,p=a.result!=null;return{mode:a.result?.mode??"euclidean",directDistance:p&&a.actualVisualizedMeasurement==="euclidean"?o(a.directLabelText):l(),horizontalDistance:p?o(a.horizontalLabelText):l(),verticalDistance:p?o(a.verticalLabelText):l()}}get unitOptions(){const s=this._userUnitOptions?.filter(l=>v.includes(l));return s&&s.length>0?s:v.slice()}set unitOptions(s){this._userUnitOptions=s}get unit(){const s=this._userUnit,l=this.unitOptions;if(s&&l.includes(s))return s;const o=this.defaultUnit;return o&&l.includes(o)?o:l[0]}set unit(s){this._userUnit=s}constructAnalysis(){return new L}};t([i({type:L})],r.prototype,"analysis",void 0),t([i({readOnly:!0})],r.prototype,"state",null),t([i({readOnly:!0})],r.prototype,"measurement",null),t([i()],r.prototype,"unitOptions",null),t([i()],r.prototype,"_userUnitOptions",void 0),t([i()],r.prototype,"unit",null),t([i()],r.prototype,"_userUnit",void 0),t([i(z)],r.prototype,"defaultUnit",void 0),r=t([m("esri.widgets.DirectLineMeasurement3D.DirectLineMeasurement3DViewModel")],r);const f=r,D="esri-direct-line-measurement-3d",b={base:D,newMeasurementButton:`${D}__clear-button`};let n=class extends C{constructor(e,s){super(e,s),this.messages=null,this.messagesCommon=null,this.viewModel=new f({isDefaultViewModel:!0}),k(O.getLogger(this),"Direct Line Measurement 3D","arcgis-direct-line-measurement-3d",{version:"4.33"})}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}get visible(){return this.viewModel.visible}set visible(e){this.viewModel.visible=e}get active(){return this.viewModel.active}get analysis(){return this.viewModel.analysis}set analysis(e){this.viewModel.analysis=e}get icon(){return"measure-line"}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get unitOptions(){return this.viewModel.unitOptions}set unitOptions(e){this.viewModel.unitOptions=e}get unit(){return this.viewModel.unit}set unit(e){this.viewModel.unit=e}render(){const{messages:e,messagesCommon:s,unit:l,unitOptions:o,viewModel:a}=this,{active:p,measurement:d,state:$,supported:_}=a;return w("div",{"aria-label":this.messages.widgetLabel,class:this.classes(b.base,g.widget,g.panel),key:this,role:"presentation"},this.visible?w(B,{active:p,measurementItems:[{key:"direct",title:e.direct,value:c(d?.directDistance)},{key:"horizontal",title:e.horizontal,value:c(d?.horizontalDistance)},{key:"vertical",title:e.vertical,value:c(d?.verticalDistance)}],messages:{...e,notApplicable:s?.notApplicable},newMeasurementButtonClass:b.newMeasurementButton,state:$,supported:_,unit:l,unitOptions:o,onNewMeasurementClick:()=>{A(this.viewModel.start())},onUnitChange:P=>{this.unit=P}}):null)}};function c(e){return e?.state==="available"?e.text:null}t([i()],n.prototype,"view",null),t([i()],n.prototype,"visible",null),t([i()],n.prototype,"active",null),t([i({nonNullable:!0})],n.prototype,"analysis",null),t([i()],n.prototype,"icon",null),t([i()],n.prototype,"label",null),t([i(),M("esri/widgets/DirectLineMeasurement3D/t9n/DirectLineMeasurement3D")],n.prototype,"messages",void 0),t([i(),M("esri/t9n/common")],n.prototype,"messagesCommon",void 0),t([i()],n.prototype,"uiStrings",void 0),t([i({type:f})],n.prototype,"viewModel",void 0),t([i()],n.prototype,"unitOptions",null),t([i()],n.prototype,"unit",null),n=t([m("esri.widgets.DirectLineMeasurement3D")],n);const H=n;export{H as default};
