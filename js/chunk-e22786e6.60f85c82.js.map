{"version":3,"sources":["webpack:///./node_modules/@arcgis/core/geometry/support/intersects.js","webpack:///./node_modules/@arcgis/core/layers/graphics/contains.js","webpack:///./node_modules/@arcgis/core/layers/graphics/data/spatialQuerySupport.js","webpack:///./node_modules/@arcgis/core/layers/graphics/data/QueryEngine.js","webpack:///./node_modules/@arcgis/core/layers/graphics/data/QueryEngineCapabilities.js","webpack:///./node_modules/@arcgis/core/layers/graphics/data/timeSupport.js"],"names":["n","e","t","r","o","coords","c","u","f","s","i","lengths","l","d","length","g","R","esriSpatialRelIntersects","esriSpatialRelContains","esriSpatialRelCrosses","esriSpatialRelDisjoint","esriSpatialRelEnvelopeIntersects","esriSpatialRelIndexIntersects","esriSpatialRelOverlaps","esriSpatialRelTouches","esriSpatialRelWithin","esriSpatialRelRelation","S","spatialRelationship","queryGeometry","esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon","esriGeometryEnvelope","layerGeometry","G","j","h","v","y","m","Promise","resolve","a","p","then","bind","spatialReference","async","P","spatialRel","geometry","query","outSR","I","rings","V","every","statisticType","W","K","X","Y","constructor","this","capabilities","B","geometryType","hasM","hasZ","objectIdField","definitionExpression","featureStore","aggregateAdapter","_changeHandle","events","on","clearCache","timeInfo","cacheSpatialQueries","_geometryQueryCache","fieldsIndex","H","fields","scheduler","priority","_frameTask","registerTask","destroy","featureAdapter","fullBounds","xmin","ymin","xmax","ymax","U","_timeExtent","M","clear","_allItems","_executeQuery","createQueryResponse","Z","q","returnGeometry","returnCentroid","createQueryResponseForCount","size","count","extent","te","forEachBounds","items","ee","isFinite","zmin","zmax","T","executeQueryForIdSet","Array","from","Set","_reschedule","add","getObjectId","point","distance","types","NONE","candidates","_checkQuerySupport","F","k","x","signal","_searchFeatures","_getQueryBBoxes","toJSON","_executeObjectIdsQuery","_executeTimeQuery","_executeAttributesQuery","Math","max","createSnappingResponse","trackIdField","_filterLatest","field","normalizationField","valueExpression","_getQueryEngineResultForStats","createSummaryStatisticsResponse","createUniqueValuesResponse","createClassBreaksResponse","createHistogramResponse","schedule","J","reschedule","_getAll","toArray","_schedule","N","_executeSceneFilterQuery","_executeGeometryQuery","_executeAggregateIdsQuery","sceneFilter","featureSpatialReference","_project","z","has","getGeometry","_runSpatialFilter","_canExecuteSinglePass","JSON","stringify","originalFilterGeometry","outSpatialReference","get","put","_","w","filter","Q","aggregateIds","getFeatureObjectIds","forEach","objectIds","timeExtent","where","isStandardized","TypeError","testFeature","push","madeProgress","done","startTimeField","endTimeField","Map","getAttribute","set","values","O","C","map","D","cloneWithGeometry","min","forEachInBounds","ie","geometryPrecision","multipatchOption","pixelSize","relationParam","text","outStatistics","groupByFieldsForStatistics","having","orderByFields","_checkAttributesQuerySupport","all","_checkStatisticsParamsSupport","arcadeUtils","L","extractFieldNames","params","_checkStatisticsQuerySupport","outFields","returnDistinctValues","outStatisticFieldName","toLowerCase","Boolean","includes","split","E","b","onStatisticField","A","definition","statisticParameters","_checkStatisticsSupport","supportsStatistics","supportsPercentileStatistics","supportsSpatialAggregationStatistics","supportedSpatialAggregationStatistics","envelope","centroid","convexHull","supportsCentroid","supportsCacheHint","supportsDistance","supportsDistinct","supportsExtent","supportsGeometryProperties","supportsHavingClause","supportsOrderBy","supportsPagination","supportsQuantization","supportsQuantizationEditMode","supportsQueryGeometry","supportsResultType","supportsSqlExpression","supportsMaxRecordCountFactor","supportsStandardizedQueriesOnly","supportsTopFeaturesQuery","supportsQueryByOthers","supportsHistoricMoment","supportsFormatPBF","supportsDisjointSpatialRelationship","supportsDefaultSpatialReference","supportsCompactGeometry","maxRecordCountFactor","maxRecordCount","standardMaxRecordCount","tileMaxRecordCount","Number","POSITIVE_INFINITY","NEGATIVE_INFINITY","isNaN","start","end"],"mappings":"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","file":"js/chunk-e22786e6.60f85c82.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{extentIntersectsExtent as e,getFeatureExtentIntersector as t}from\"./intersectsBase.js\";export{extentIntersectsExtent,extentIntersectsMultipoint,extentIntersectsPoint,extentIntersectsPolygon,extentIntersectsPolyline,extentIntersectsRings,getFeatureExtentIntersector,isSelfIntersecting,segmentIntersects}from\"./intersectsBase.js\";function n(n){return\"mesh\"===n?e:t(n)}export{n as getExtentIntersector};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nfunction n(n,t){return n?t?4:3:t?3:2}function t(n,t,r,e){return o(n,t,r,e.coords[0],e.coords[1])}function r(t,r,e,c,u,f){const s=n(u,f),{coords:i,lengths:l}=c;if(!l)return!1;for(let n=0,d=0;n<l.length;n++,d+=s)if(!o(t,r,e,i[d],i[d+1]))return!1;return!0}function o(t,r,o,c,u){if(!t)return!1;const f=n(r,o),{coords:s,lengths:i}=t;let l=!1,d=0;for(const n of i)l=e(l,s,f,d,n,c,u),d+=n*f;return l}function e(n,t,r,o,e,c,u){let f=n,s=o;for(let i=o,l=o+e*r;i<l;i+=r){s=i+r,s===l&&(s=o);const n=t[i],e=t[i+1],d=t[s],g=t[s+1];(e<u&&g>=u||g<u&&e>=u)&&n+(u-e)/(g-e)*(d-n)<c&&(f=!f)}return f}export{o as polygonContainsCoords,r as polygonContainsMultipoint,t as polygonContainsPoint};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport e from\"../../../core/Error.js\";import{extentContainsPoint as r,extentContainsMultipoint as t}from\"../../../geometry/support/contains.js\";import{getExtentIntersector as i}from\"../../../geometry/support/intersects.js\";import{isPolygon as s,isExtent as o,getJsonType as n}from\"../../../geometry/support/jsonUtils.js\";import{isValid as l}from\"../../../geometry/support/spatialReferenceUtils.js\";import{polygonContainsPoint as a,polygonContainsMultipoint as p}from\"../contains.js\";import{convertFromPolygon as m}from\"../featureConversionUtils.js\";import u from\"../OptimizedGeometry.js\";import{checkProjectionSupport as y}from\"./projectionSupport.js\";import{getGeometry as f}from\"./utils.js\";const c=\"feature-store:unsupported-query\",R={esriSpatialRelIntersects:\"intersects\",esriSpatialRelContains:\"contains\",esriSpatialRelCrosses:\"crosses\",esriSpatialRelDisjoint:\"disjoint\",esriSpatialRelEnvelopeIntersects:\"intersects\",esriSpatialRelIndexIntersects:null,esriSpatialRelOverlaps:\"overlaps\",esriSpatialRelTouches:\"touches\",esriSpatialRelWithin:\"within\",esriSpatialRelRelation:null},S={spatialRelationship:{esriSpatialRelIntersects:!0,esriSpatialRelContains:!0,esriSpatialRelWithin:!0,esriSpatialRelCrosses:!0,esriSpatialRelDisjoint:!0,esriSpatialRelTouches:!0,esriSpatialRelOverlaps:!0,esriSpatialRelEnvelopeIntersects:!0,esriSpatialRelIndexIntersects:!1,esriSpatialRelRelation:!1},queryGeometry:{esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!0},layerGeometry:{esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!1}};function G(e){return!0===S.spatialRelationship[e]}function g(e){return!0===S.queryGeometry[n(e)]}function j(e){return!0===S.layerGeometry[e]}function h(){return import(\"../../../geometry/geometryEngineJSON.js\")}function v(e,n,l,y,c){if(s(n)&&\"esriGeometryPoint\"===l&&(\"esriSpatialRelIntersects\"===e||\"esriSpatialRelContains\"===e)){const e=m(new u,n,!1,!1);return Promise.resolve((r=>a(e,!1,!1,r)))}if(s(n)&&\"esriGeometryMultipoint\"===l){const r=m(new u,n,!1,!1);if(\"esriSpatialRelContains\"===e)return Promise.resolve((e=>p(r,!1,!1,e,y,c)))}if(o(n)&&\"esriGeometryPoint\"===l&&(\"esriSpatialRelIntersects\"===e||\"esriSpatialRelContains\"===e))return Promise.resolve((e=>r(n,f(l,y,c,e))));if(o(n)&&\"esriGeometryMultipoint\"===l&&\"esriSpatialRelContains\"===e)return Promise.resolve((e=>t(n,f(l,y,c,e))));if(o(n)&&\"esriSpatialRelIntersects\"===e){const e=i(l);return Promise.resolve((r=>e(n,f(l,y,c,r))))}return h().then((r=>{const t=r[R[e]].bind(null,n.spatialReference,n);return e=>t(f(l,y,c,e))}))}async function P(r,t,i){const{spatialRel:s,geometry:o}=r;if(o){if(!G(s))throw new e(c,\"Unsupported query spatial relationship\",{query:r});if(l(o.spatialReference)&&l(i)){if(!g(o))throw new e(c,\"Unsupported query geometry type\",{query:r});if(!j(t))throw new e(c,\"Unsupported layer geometry type\",{query:r});if(r.outSR)return y(r.geometry&&r.geometry.spatialReference,r.outSR)}}}function I(e){if(o(e))return!0;if(s(e)){for(const r of e.rings){if(5!==r.length)return!1;if(r[0][0]!==r[1][0]||r[0][0]!==r[4][0]||r[2][0]!==r[3][0]||r[0][1]!==r[3][1]||r[0][1]!==r[4][1]||r[1][1]!==r[2][1])return!1}return!0}return!1}export{I as canQueryWithRBush,P as checkSpatialQuerySupport,v as getSpatialQueryOperator};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{PositionHint as e,indexOf as t}from\"../../../core/arrayUtils.js\";import i from\"../../../core/Error.js\";import{clone as s}from\"../../../core/lang.js\";import{removeMaybe as r,destroyMaybe as a,isNone as n,isSome as o}from\"../../../core/maybe.js\";import{MemCacheStorage as u,MemCache as c}from\"../../../core/MemCache.js\";import{getMetersPerUnitForSR as h}from\"../../../core/unitUtils.js\";import{create as l,set as m,NEGATIVE_INFINITY as p,expandWithAABB as f}from\"../../../geometry/support/aaBoundingBox.js\";import{fromValues as d,create as y}from\"../../../geometry/support/aaBoundingRect.js\";import{getBoundsXY as g}from\"../../../geometry/support/boundsUtils.js\";import{fromJSON as x,isExtent as _,isPolygon as w}from\"../../../geometry/support/jsonUtils.js\";import{normalizeCentralMeridian as S}from\"../../../geometry/support/normalizeUtils.js\";import{equals as F,isValid as R}from\"../../../geometry/support/spatialReferenceUtils.js\";import{convertFromGeometry as Q}from\"../featureConversionUtils.js\";import{getWhereClause as I,validateFields as j,validateWhere as E,validateHaving as b,hasInvalidFieldType as A}from\"./attributeSupport.js\";import{project as T,checkProjectionSupport as k,projectMany as C}from\"./projectionSupport.js\";import{queryCapabilities as B}from\"./QueryEngineCapabilities.js\";import{QueryEngineResult as q,SnappingTypes as v}from\"./QueryEngineResult.js\";import{getSpatialQueryOperator as z,canQueryWithRBush as O,checkSpatialQuerySupport as G}from\"./spatialQuerySupport.js\";import{getTimeExtent as M,getTimeOperator as P}from\"./timeSupport.js\";import{cleanFromGeometryEngine as U,QUERY_ENGINE_EMPTY_RESULT as Z,normalizeQuery as N,getGeometry as D}from\"./utils.js\";import H from\"../../support/FieldsIndex.js\";import{loadArcade as L}from\"../../../support/arcadeOnDemand.js\";import{noBudget as J}from\"../../../views/support/Scheduler.js\";function V(e){return e.every((e=>\"exceedslimit\"!==e.statisticType))}const W=\"feature-store:unsupported-query\";class ${constructor(e,t=null,i,s,r){this.attributes=e,this.geometry=i,this.centroid=s,this.filterFlags=r,this.groupId=-1,this.displayId=t}}const K=new u(2e6);let X=0;class Y{constructor(e){this.capabilities={query:B},this.geometryType=e.geometryType,this.hasM=e.hasM,this.hasZ=e.hasZ,this.objectIdField=e.objectIdField,this.spatialReference=e.spatialReference,this.definitionExpression=e.definitionExpression,this.featureStore=e.featureStore,this.aggregateAdapter=e.aggregateAdapter,this._changeHandle=this.featureStore.events.on(\"changed\",(()=>this.clearCache())),this.timeInfo=e.timeInfo,e.cacheSpatialQueries&&(this._geometryQueryCache=new c(X+++\"$$\",K)),this.fieldsIndex=new H(e.fields),e.scheduler&&e.priority&&(this._frameTask=e.scheduler.registerTask(e.priority))}destroy(){this._frameTask=r(this._frameTask),this.clearCache(),a(this._geometryQueryCache),this._changeHandle=r(this._changeHandle),a(this.fieldsIndex)}get featureAdapter(){return this.featureStore.featureAdapter}get fullExtent(){const e=this.featureStore.fullBounds;return n(e)?null:{xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3],spatialReference:U(this.spatialReference)}}get timeExtent(){return this.timeInfo?(this._timeExtent||(this._timeExtent=M(this.timeInfo,this.featureStore)),this._timeExtent):null}clearCache(){this._geometryQueryCache?.clear(),this._allItems=null,this._timeExtent=null}async executeQuery(e,t){try{return(await this._executeQuery(e,{},t)).createQueryResponse()}catch(i){if(i!==Z)throw i;return new q([],e,this).createQueryResponse()}}async executeQueryForCount(e={},t){try{return(await this._executeQuery(e,{returnGeometry:!1,returnCentroid:!1,outSR:null},t)).createQueryResponseForCount()}catch(i){if(i!==Z)throw i;return 0}}async executeQueryForExtent(e,t){const i=e.outSR;try{const s=await this._executeQuery(e,{returnGeometry:!0,returnCentroid:!1,outSR:null},t),r=s.size;if(!r)return{count:0,extent:null};m(te,p),this.featureStore.forEachBounds(s.items,(e=>f(te,e)),ee);const a={xmin:te[0],ymin:te[1],xmax:te[3],ymax:te[4],spatialReference:U(this.spatialReference)};this.hasZ&&isFinite(te[2])&&isFinite(te[5])&&(a.zmin=te[2],a.zmax=te[5]);const n=T(a,s.spatialReference,i);if(n.spatialReference=U(i||this.spatialReference),n.xmax-n.xmin==0){const e=h(n.spatialReference);n.xmin-=e,n.xmax+=e}if(n.ymax-n.ymin==0){const e=h(n.spatialReference);n.ymin-=e,n.ymax+=e}if(this.hasZ&&null!=n.zmin&&null!=n.zmax&&n.zmax-n.zmin==0){const e=h(n.spatialReference);n.zmin-=e,n.zmax+=e}return{count:r,extent:n}}catch(s){if(s===Z)return{count:0,extent:null};throw s}}async executeQueryForIds(e,t){return this.executeQueryForIdSet(e,t).then((e=>Array.from(e)))}async executeQueryForIdSet(e,t){try{const i=await this._executeQuery(e,{returnGeometry:!0,returnCentroid:!1,outSR:null},t),s=i.items,r=new Set;return await this._reschedule((()=>{for(const e of s)r.add(i.featureAdapter.getObjectId(e))}),t),r}catch(i){if(i===Z)return new Set;throw i}}async executeQueryForSnapping(e,t){const{point:i,distance:s,types:r}=e;if(r===v.NONE)return{candidates:[]};const a=await this._reschedule((()=>this._checkQuerySupport(e.query)),t),o=!F(i.spatialReference,this.spatialReference);o&&await k(i.spatialReference,this.spatialReference);const u=\"number\"==typeof s?s:s.x,c=\"number\"==typeof s?s:s.y,h={xmin:i.x-u,xmax:i.x+u,ymin:i.y-c,ymax:i.y+c,spatialReference:i.spatialReference},l=o?T(h,this.spatialReference):h;if(!l)return{candidates:[]};const m=(await S(x(i),null,{signal:t}))[0],p=(await S(x(l),null,{signal:t}))[0];if(n(m)||n(p))return{candidates:[]};const f=new q(this._searchFeatures(this._getQueryBBoxes(p.toJSON())),a,this);await this._reschedule((()=>this._executeObjectIdsQuery(f)),t),await this._reschedule((()=>this._executeTimeQuery(f)),t),await this._reschedule((()=>this._executeAttributesQuery(f)),t);const d=m.toJSON(),y=o?T(d,this.spatialReference):d,g=o?Math.max(l.xmax-l.xmin,l.ymax-l.ymin)/2:s;return f.createSnappingResponse({...e,point:y,distance:g},i.spatialReference)}async executeQueryForLatestObservations(e,t){if(!this.timeInfo||!this.timeInfo.trackIdField)throw new i(W,\"Missing timeInfo or timeInfo.trackIdField\",{query:e,timeInfo:this.timeInfo});try{const i=await this._executeQuery(e,{},t);return await this._reschedule((()=>this._filterLatest(i)),t),i.createQueryResponse()}catch(s){if(s!==Z)throw s;return new q([],e,this).createQueryResponse()}}async executeQueryForSummaryStatistics(e={},t,i){const{field:s,normalizationField:r,valueExpression:a}=t;return(await this._getQueryEngineResultForStats(e,{field:s,normalizationField:r,valueExpression:a},i)).createSummaryStatisticsResponse(t)}async executeQueryForUniqueValues(e={},t,i){const{field:s,valueExpression:r}=t;return(await this._getQueryEngineResultForStats(e,{field:s,valueExpression:r},i)).createUniqueValuesResponse(t)}async executeQueryForClassBreaks(e={},t,i){const{field:s,normalizationField:r,valueExpression:a}=t;return(await this._getQueryEngineResultForStats(e,{field:s,normalizationField:r,valueExpression:a},i)).createClassBreaksResponse(t)}async executeQueryForHistogram(e={},t,i){const{field:s,normalizationField:r,valueExpression:a}=t;return(await this._getQueryEngineResultForStats(e,{field:s,normalizationField:r,valueExpression:a},i)).createHistogramResponse(t)}async _schedule(e,t){return o(this._frameTask)?this._frameTask.schedule(e,t):e(J)}async _reschedule(e,t){return o(this._frameTask)?this._frameTask.reschedule(e,t):e(J)}_getAll(e){return n(this._allItems)&&(this._allItems=this.featureStore.toArray()),new q(this._allItems,e,this)}async _executeQuery(e,t,i){e=s(e),e=await this._schedule((()=>N(e,this.definitionExpression,this.spatialReference)),i),e=await this._reschedule((()=>this._checkQuerySupport(e)),i),e={...e,...t};const r=await this._reschedule((()=>this._executeSceneFilterQuery(e,i)),i),a=await this._reschedule((()=>this._executeGeometryQuery(e,r,i)),i);return await this._reschedule((()=>this._executeAggregateIdsQuery(a)),i),await this._reschedule((()=>this._executeObjectIdsQuery(a)),i),await this._reschedule((()=>this._executeTimeQuery(a)),i),await this._reschedule((()=>this._executeAttributesQuery(a)),i),a}async _executeSceneFilterQuery(e,t){if(n(e.sceneFilter))return null;const{outSR:i,returnGeometry:s,returnCentroid:r}=e,a=this.featureStore.featureSpatialReference,o=e.sceneFilter.geometry,u=n(a)||F(a,o.spatialReference)?o:T(o,a);if(!u)return null;const c=s||r,h=R(i)&&!F(this.spatialReference,i)&&c?async e=>this._project(e,i):e=>e,l=this.featureAdapter,m=this._searchFeatures(this._getQueryBBoxes(u));if(\"disjoint\"===e.sceneFilter.spatialRelationship){if(!m.length)return null;const i=new Set;for(const e of m)i.add(l.getObjectId(e));const s=await this._reschedule((()=>this.featureStore.toArray()),t),r=await this._reschedule((async()=>{const r=await z(\"esriSpatialRelDisjoint\",u,this.geometryType,this.hasZ,this.hasM),a=e=>!i.has(l.getObjectId(e))||r(l.getGeometry(e)),n=await this._runSpatialFilter(s,a,t);return new q(n,e,this)}),t);return h(r)}if(!m.length)return new q([],e,this);if(this._canExecuteSinglePass(u,e))return h(new q(m,e,this));const p=await z(\"esriSpatialRelContains\",u,this.geometryType,this.hasZ,this.hasM),f=await this._runSpatialFilter(m,(e=>p(l.getGeometry(e))),t);return h(new q(f,e,this))}async _executeGeometryQuery(i,s,r){if(o(s)&&0===s.items.length)return s;i=o(s)?s.query:i;const{geometry:a,outSR:u,spatialRel:c,returnGeometry:h,returnCentroid:l}=i,m=this.featureStore.featureSpatialReference,p=!a||n(m)||F(m,a.spatialReference)?a:T(a,m),f=h||l,d=R(u)&&!F(this.spatialReference,u),y=this._geometryQueryCache&&n(s)?d&&f?JSON.stringify({originalFilterGeometry:a,spatialRelationship:c,outSpatialReference:u}):JSON.stringify({originalFilterGeometry:a,spatialRelationship:c}):null,g=y?this._geometryQueryCache.get(y):null;if(o(g))return new q(g,i,this);const x=async e=>(d&&f&&await this._project(e,u),y&&this._geometryQueryCache.put(y,e.items,e.items.length+1),e);if(!p)return x(o(s)?s:this._getAll(i));const _=this.featureAdapter;let w=this._searchFeatures(this._getQueryBBoxes(a));if(\"esriSpatialRelDisjoint\"===c){if(!w.length)return x(o(s)?s:this._getAll(i));const e=new Set;for(const i of w)e.add(_.getObjectId(i));const t=o(s)?s.items:await this._reschedule((()=>this.featureStore.toArray()),r),a=await this._reschedule((async()=>{const s=await z(c,p,this.geometryType,this.hasZ,this.hasM),a=t=>!e.has(_.getObjectId(t))||s(_.getGeometry(t)),n=await this._runSpatialFilter(t,a,r);return new q(n,i,this)}),r);return x(a)}if(o(s)){const i=new e;w=w.filter((e=>t(s.items,e,s.items.length,i)>=0))}if(!w.length){const e=new q([],i,this);return y&&this._geometryQueryCache.put(y,e.items,1),e}if(this._canExecuteSinglePass(p,i))return x(new q(w,i,this));const S=await z(c,p,this.geometryType,this.hasZ,this.hasM),Q=await this._runSpatialFilter(w,(e=>S(_.getGeometry(e))),r);return x(new q(Q,i,this))}_executeAggregateIdsQuery(e){if(0===e.items.length||!e.query.aggregateIds||!e.query.aggregateIds.length||n(this.aggregateAdapter))return;const t=new Set;for(const s of e.query.aggregateIds){this.aggregateAdapter.getFeatureObjectIds(s).forEach((e=>t.add(e)))}const i=this.featureAdapter.getObjectId;e.items=e.items.filter((e=>t.has(i(e))))}_executeObjectIdsQuery(e){if(0===e.items.length||!e.query.objectIds||!e.query.objectIds.length)return;const t=new Set(e.query.objectIds),i=this.featureAdapter.getObjectId;e.items=e.items.filter((e=>t.has(i(e))))}_executeTimeQuery(e){if(0===e.items.length)return;const t=P(this.timeInfo,e.query.timeExtent,this.featureAdapter);n(t)||(e.items=e.items.filter(t))}_executeAttributesQuery(e){if(0===e.items.length)return;const t=I(e.query.where,this.fieldsIndex);if(t){if(!t.isStandardized)throw new TypeError(\"Where clause is not standardized\");e.items=e.items.filter((e=>t.testFeature(e,this.featureAdapter)))}}async _runSpatialFilter(e,t,i){if(!t)return e;if(n(this._frameTask))return e.filter((e=>t(e)));let s=0;const r=new Array,a=async n=>{for(;s<e.length;){const o=e[s++];t(o)&&(r.push(o),n.madeProgress()),n.done&&await this._reschedule((e=>a(e)),i)}};return this._reschedule((e=>a(e)),i).then((()=>r))}_filterLatest(e){const{trackIdField:t,startTimeField:i,endTimeField:s}=this.timeInfo,r=s||i,a=new Map,n=this.featureAdapter.getAttribute;for(const o of e.items){const e=n(o,t),i=n(o,r),s=a.get(e);(!s||i>n(s,r))&&a.set(e,o)}e.items=Array.from(a.values())}_canExecuteSinglePass(e,t){const{spatialRel:i}=t;return O(e)&&(\"esriSpatialRelEnvelopeIntersects\"===i||\"esriGeometryPoint\"===this.geometryType&&(\"esriSpatialRelIntersects\"===i||\"esriSpatialRelContains\"===i||\"esriSpatialRelWithin\"===i))}async _project(e,t){if(!t||F(this.spatialReference,t))return e;const i=this.featureAdapter,s=await C(e.items.map((e=>D(this.geometryType,this.hasZ,this.hasM,i.getGeometry(e)))),this.spatialReference,t);return e.items=s.map(((t,s)=>i.cloneWithGeometry(e.items[s],Q(t,this.hasZ,this.hasM)))),e}_getQueryBBoxes(e){if(O(e)){if(_(e))return[d(e.xmin,e.ymin,e.xmax,e.ymax)];if(w(e))return e.rings.map((e=>d(Math.min(e[0][0],e[2][0]),Math.min(e[0][1],e[2][1]),Math.max(e[0][0],e[2][0]),Math.max(e[0][1],e[2][1]))))}return[g(y(),e)]}_searchFeatures(e){for(const i of e)this.featureStore.forEachInBounds(i,(e=>ie.add(e)));const t=Array.from(ie.values());return ie.clear(),t}async _checkStatisticsSupport(e,t){if(e.distance<0||null!=e.geometryPrecision||e.multipatchOption||e.pixelSize||e.relationParam||e.text||e.outStatistics||e.groupByFieldsForStatistics||e.having||e.orderByFields)throw new i(W,\"Unsupported query options\",{query:e});return this._checkAttributesQuerySupport(e),Promise.all([this._checkStatisticsParamsSupport(t),G(e,this.geometryType,this.spatialReference),k(this.spatialReference,e.outSR)]).then((()=>e))}async _checkStatisticsParamsSupport(e){let t=[];if(e.valueExpression){const{arcadeUtils:i}=await L();t=i.extractFieldNames(e.valueExpression)}if(e.field&&t.push(e.field),e.normalizationField&&t.push(e.normalizationField),!t.length)throw new i(W,\"params should have at least a field or valueExpression\",{params:e});j(this.fieldsIndex,t,\"params contains missing fields\")}async _checkQuerySupport(e){if(e.distance<0||null!=e.geometryPrecision||e.multipatchOption||e.pixelSize||e.relationParam||e.text)throw new i(W,\"Unsupported query options\",{query:e});return this._checkAttributesQuerySupport(e),this._checkStatisticsQuerySupport(e),Promise.all([G(e,this.geometryType,this.spatialReference),k(this.spatialReference,e.outSR)]).then((()=>e))}_checkAttributesQuerySupport(e){const{outFields:t,orderByFields:s,returnDistinctValues:r,outStatistics:a}=e,n=a?a.map((e=>e.outStatisticFieldName&&e.outStatisticFieldName.toLowerCase())).filter(Boolean):[];if(s&&s.length>0){const e=\" asc\",t=\" desc\",i=s.map((i=>{const s=i.toLowerCase();return s.includes(e)?s.split(e)[0]:s.includes(t)?s.split(t)[0]:i})).filter((e=>!n.includes(e)));j(this.fieldsIndex,i,\"orderByFields contains missing fields\")}if(t&&t.length>0)j(this.fieldsIndex,t,\"outFields contains missing fields\");else if(r)throw new i(W,\"outFields should be specified for returnDistinctValues\",{query:e});E(this.fieldsIndex,e.where)}_checkStatisticsQuerySupport(e){const{outStatistics:t,groupByFieldsForStatistics:s,having:r}=e,a=s&&s.length,n=t&&t.length;if(r){if(!a||!n)throw new i(W,\"outStatistics and groupByFieldsForStatistics should be specified with having\",{query:e});b(this.fieldsIndex,r,t)}if(n){if(!V(t))return;const r=t.map((e=>e.onStatisticField)).filter(Boolean);j(this.fieldsIndex,r,\"onStatisticFields contains missing fields\"),a&&j(this.fieldsIndex,s,\"groupByFieldsForStatistics contains missing fields\");for(const s of t){const{onStatisticField:t,statisticType:r}=s;if((\"percentile_disc\"===r||\"percentile_cont\"===r)&&\"statisticParameters\"in s){const{statisticParameters:t}=s;if(!t)throw new i(W,\"statisticParamters should be set for percentile type\",{definition:s,query:e})}else if(\"count\"!==r&&t&&A(t,this.fieldsIndex))throw new i(W,\"outStatistics contains non-numeric fields\",{definition:s,query:e})}}}async _getQueryEngineResultForStats(e,t,i){e=s(e);try{e=await this._schedule((()=>N(e,this.definitionExpression,this.spatialReference)),i),e=await this._reschedule((()=>this._checkStatisticsSupport(e,t)),i);const s=await this._reschedule((()=>this._executeSceneFilterQuery(e,i)),i),r=await this._reschedule((()=>this._executeGeometryQuery(e,s,i)),i);return await this._reschedule((()=>this._executeAggregateIdsQuery(r)),i),await this._reschedule((()=>this._executeObjectIdsQuery(r)),i),await this._reschedule((()=>this._executeTimeQuery(r)),i),await this._reschedule((()=>this._executeAttributesQuery(r)),i),r}catch(r){if(r!==Z)throw r;return new q([],e,this)}}}const ee=l(),te=l(),ie=new Set;export{$ as Feature,Y as QueryEngine};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nconst t={supportsStatistics:!0,supportsPercentileStatistics:!0,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,centroid:!1,convexHull:!1},supportsCentroid:!0,supportsCacheHint:!1,supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQuantization:!0,supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!1,supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,supportsStandardizedQueriesOnly:!0,supportsTopFeaturesQuery:!1,supportsQueryByOthers:!0,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!0,supportsDefaultSpatialReference:!1,supportsCompactGeometry:!1,maxRecordCountFactor:void 0,maxRecordCount:void 0,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0};export{t as queryCapabilities};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nfunction t(t,n){if(!t)return null;const e=n.featureAdapter,{startTimeField:u,endTimeField:l}=t;let r=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;if(u&&l)n.forEach((t=>{const n=e.getAttribute(t,u),o=e.getAttribute(t,l);null==n||isNaN(n)||(r=Math.min(r,n)),null==o||isNaN(o)||(i=Math.max(i,o))}));else{const t=u||l;n.forEach((n=>{const u=e.getAttribute(n,t);null==u||isNaN(u)||(r=Math.min(r,u),i=Math.max(i,u))}))}return{start:r,end:i}}function n(t,n,r){if(!n||!t)return null;const{startTimeField:i,endTimeField:o}=t;if(!i&&!o)return null;const{start:s,end:a}=n;return null===s&&null===a?null:void 0===s&&void 0===a?l():i&&o?e(r,i,o,s,a):u(r,i||o,s,a)}function e(t,n,e,u,l){return null!=u&&null!=l?r=>{const i=t.getAttribute(r,n),o=t.getAttribute(r,e);return(null==i||i<=l)&&(null==o||o>=u)}:null!=u?n=>{const l=t.getAttribute(n,e);return null==l||l>=u}:null!=l?e=>{const u=t.getAttribute(e,n);return null==u||u<=l}:void 0}function u(t,n,e,u){return null!=e&&null!=u&&e===u?u=>t.getAttribute(u,n)===e:null!=e&&null!=u?l=>{const r=t.getAttribute(l,n);return r>=e&&r<=u}:null!=e?u=>t.getAttribute(u,n)>=e:null!=u?e=>t.getAttribute(e,n)<=u:void 0}function l(){return()=>!1}export{t as getTimeExtent,n as getTimeOperator};\n"],"sourceRoot":""}