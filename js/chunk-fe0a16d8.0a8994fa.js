(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-fe0a16d8"],{"053b":function(t,e,i){"use strict";i.r(e),i.d(e,"default",(function(){return X}));var n=i("a4ee"),r=(i("e06a"),i("8d60")),s=i("2c4f"),c=i("ce50"),o=i("ce6d"),a=i("af40"),h=i("e92d"),l=i("b2b2"),p=i("f4cc"),u=i("477c"),d=i("59b2"),f=(i("b50f"),i("c120"),i("cea0"),i("d386")),b=i("32ed"),g=i("ce0b"),_=i("4dc9"),m=i("3c9c"),v=i("1381"),y=i("cdc1"),O=i("24be"),j=i("8e1e"),x=i("b65e"),M=i("7779"),G=i("2589"),w=i("7d9d"),V=i("2c8f"),I=i("1f1c"),S=i("521c"),k=i("4ae5");class E{constructor(t,e,i){this.graphic=t,this.mover=e,this.selected=i,this.type="reshape-start"}}class C{constructor(t,e,i){this.graphic=t,this.mover=e,this.selected=i,this.type="reshape"}}class A{constructor(t,e,i){this.graphic=t,this.mover=e,this.selected=i,this.type="reshape-stop"}}class P{constructor(t,e,i){this.mover=t,this.dx=e,this.dy=i,this.type="move-start"}}class R{constructor(t,e,i){this.mover=t,this.dx=e,this.dy=i,this.type="move"}}class T{constructor(t,e,i){this.mover=t,this.dx=e,this.dy=i,this.type="move-stop"}}class N{constructor(t){this.added=t,this.type="vertex-select"}}class F{constructor(t){this.removed=t,this.type="vertex-deselect"}}class H{constructor(t,e,i,n){this.added=t,this.graphic=e,this.oldGraphic=i,this.vertices=n,this.type="vertex-add"}}class z{constructor(t,e,i,n){this.removed=t,this.graphic=e,this.oldGraphic=i,this.vertices=n,this.type="vertex-remove"}}const D=M["b"].reshapeGraphics,L={vertices:{default:new _["a"]({style:"circle",size:D.vertex.size,color:D.vertex.color,outline:{color:D.vertex.outlineColor,width:1}}),hover:new _["a"]({style:"circle",size:D.vertex.hoverSize,color:D.vertex.hoverColor,outline:{color:D.vertex.hoverOutlineColor,width:1}}),selected:new _["a"]({style:"circle",size:D.selected.size,color:D.selected.color,outline:{color:D.selected.outlineColor,width:1}})},midpoints:{default:new _["a"]({style:"circle",size:D.midpoint.size,color:D.midpoint.color,outline:{color:D.midpoint.outlineColor,width:1}}),hover:new _["a"]({style:"circle",size:D.midpoint.size,color:D.midpoint.color,outline:{color:D.midpoint.outlineColor,width:1}})}},U="esri.views.draw.support.Reshape",B=h["a"].getLogger(U);let q=class extends o["a"].EventedAccessor{constructor(t){super(t),this._activeOperationInfo=null,this._editGeometryOperations=null,this._handles=new a["a"],this._graphicAttributes={esriSketchTool:"box"},this._mover=null,this._snappingTask=null,this._stagedVertex=null,this._viewHandles=new a["a"],this.callbacks={onReshapeStart(){},onReshape(){},onReshapeStop(){},onMoveStart(){},onMove(){},onMoveStop(){},onGraphicClick(){}},this.enableMidpoints=!0,this.enableMovement=!0,this.enableVertices=!0,this.graphic=null,this.layer=null,this.midpointGraphics=new s["a"],this.midpointSymbol=new _["a"]({style:"circle",size:6,color:[200,200,200],outline:{color:[100,100,100],width:1}}),this.selectedVertices=[],this.snappingManager=null,this.type="reshape",this.vertexGraphics=new s["a"],this.view=null}initialize(){this._highlightHelper=new j["a"]({view:this.view}),this._setup(),this._handles.add([Object(u["g"])(()=>{var t;return null==(t=this.view)?void 0:t.ready},()=>{const{layer:t,view:e}=this;Object(x["a"])(e,t),this._viewHandles.add(e.on("key-down",t=>this._keyDownHandler(t),G["b"].TOOL))},{once:!0,initial:!0}),Object(u["c"])(()=>this.graphic,()=>this.refresh()),Object(u["c"])(()=>this.layer,(t,e)=>{e&&(this._clearSelection(),this._resetGraphics(e)),this.refresh()}),Object(u["c"])(()=>this.enableMidpoints,()=>this.refresh())])}destroy(){var t;this._reset(),null!=(t=this._mover)&&t.destroy(),this._mover=null,this._handles=Object(l["d"])(this._handles),this._viewHandles=Object(l["d"])(this._viewHandles)}set highlightsEnabled(t){var e;null!=(e=this._highlightHelper)&&e.removeAll(),this._set("highlightsEnabled",t),this._setUpHighlights()}get state(){const t=!!this.get("view.ready"),e=!(!this.get("graphic")||!this.get("layer"));return t&&e?"active":t?"ready":"disabled"}set symbols(t){const{midpoints:e=L.midpoints,vertices:i=L.vertices}=t||{};this._set("symbols",{midpoints:e,vertices:i})}isUIGraphic(t){const e=[];return this.graphic&&e.push(this.graphic),e.concat(this.vertexGraphics.items,this.midpointGraphics.items),e.length&&e.includes(t)}refresh(){this._reset(),this._setup()}reset(){this.graphic=null}clearSelection(){this._clearSelection()}removeSelectedVertices(){this.selectedVertices.length&&this._removeVertices(this.selectedVertices)}_setup(){const{graphic:t,layer:e}=this;if(!e||!t||Object(l["j"])(t.geometry))return;const i=t.geometry;"mesh"!==i.type&&"extent"!==i.type?("polygon"===i.type&&Object(b["b"])(i),this._setUpHighlights(),this._setupGraphics(),this._setupMover()):this._logGeometryTypeError()}_setUpHighlights(){this.highlightsEnabled&&this.graphic&&this._highlightHelper.add(this.graphic)}_setUpGeometryHelper(){const t=this.graphic.geometry;if(Object(l["j"])(t)||"mesh"===t.type||"extent"===t.type)return void this._logGeometryTypeError();const e="multipoint"===t.type?new S["a"]({paths:t.points,spatialReference:t.spatialReference}):t;this._editGeometryOperations=V["a"].fromGeometry(e,m["a"].Local)}_saveSnappingContextForHandle(t,e){var i;this._snappingGraphicsLayer=new g["a"]({listMode:"hide",internal:!0,title:"Reshape snapping layer"}),this.view.map.layers.add(this._snappingGraphicsLayer),this._snappingContext=new I["a"]({editGeometryOperations:this._editGeometryOperations,elevationInfo:{mode:"on-the-ground",offset:0},pointer:(null==(i=e.viewEvent)?void 0:i.pointerType)||"mouse",excludeFeature:this.graphic,visualizer:new v["a"](this._snappingGraphicsLayer),vertexHandle:this._getVertexFromEditGeometry(t)})}_reset(){this._clearSelection(),this._highlightHelper.removeAll(),this._resetGraphics(),this._resetSnappingStateVars(),this._activeOperationInfo=null,this._mover&&this._mover.destroy(),this._mover=null,this.view.cursor="default"}_resetSnappingStateVars(){Object(l["k"])(this.snappingManager)&&this.snappingManager.doneSnapping(),Object(l["k"])(this._snappingGraphicsLayer)&&(this.view.map.layers.remove(this._snappingGraphicsLayer),this._snappingGraphicsLayer.destroy()),this._editGeometryOperations=Object(l["d"])(this._editGeometryOperations),this._snappingTask=Object(l["a"])(this._snappingTask),this._snappingTask=null,this._snappingContext=null,this._stagedVertex=null}_resetGraphics(t){this._removeMidpointGraphics(t),this._removeVertexGraphics(t),this._set("selectedVertices",[])}_removeMidpointGraphics(t){const e=t||this.layer;e&&e.removeMany(this.midpointGraphics.items),this.midpointGraphics.items.forEach(t=>t.destroy()),this.midpointGraphics.removeAll()}_removeVertexGraphics(t){const e=t||this.layer;e&&e.removeMany(this.vertexGraphics.items),this.vertexGraphics.items.forEach(t=>t.destroy()),this.vertexGraphics.removeAll()}_getCoordinatesForUI(t){const e=Object(b["c"])(t.clone());if("polygon"===t.type)for(const i of e){const t=i[i.length-1];i[0][0]===t[0]&&i[0][1]===t[1]&&i.length>2&&i.pop()}return e}_setupGraphics(){const t=this.graphic.geometry;if(Object(l["k"])(t)&&("polyline"===t.type||"polygon"===t.type)){const e=this._getCoordinatesForUI(t);this.enableMidpoints&&this._setUpMidpointGraphics(e),this.enableVertices&&this._setUpVertexGraphics(e)}}_setUpMidpointGraphics(t){this._removeMidpointGraphics();const e=this._createMidpointGraphics(t);this.midpointGraphics.addMany(e),this.layer.addMany(e)}_setUpVertexGraphics(t){this._removeVertexGraphics();const e=this._createVertexGraphics(t);this.vertexGraphics.addMany(e),this._storeRelatedVertexIndices(),this.layer.addMany(e)}_createVertexGraphics(t){const{_graphicAttributes:e,symbols:i,view:{spatialReference:n}}=this,s=[];return null!=t&&t.forEach((t,c)=>{t.forEach((t,o)=>{var a;const[h,l]=t;s.push(new r["a"]({geometry:new k["a"]({x:h,y:l,spatialReference:n}),symbol:null==i||null==(a=i.vertices)?void 0:a.default,attributes:{...e,pathIndex:c,pointIndex:o}}))})}),s}_createMidpointGraphics(t){const{_graphicAttributes:e,symbols:i,view:{spatialReference:n}}=this,s=[];return null!=t&&t.forEach((t,c)=>{t.forEach((o,a)=>{const[h,p]=o,u=t[a+1]?a+1:0;if("polygon"===Object(l["i"])(this.graphic.geometry,"type")||0!==u){const[o,l]=t[u],[d,f]=Object(b["e"])([h,p],[o,l]);s.push(new r["a"]({geometry:new k["a"]({x:d,y:f,spatialReference:n}),symbol:i.midpoints.default,attributes:{...e,pathIndex:c,pointIndexStart:a,pointIndexEnd:u}}))}})}),s}_storeRelatedVertexIndices(){const t=this.vertexGraphics.items;if(!t)return;const e=t.map(({geometry:t})=>({x:t.x,y:t.y}));for(let i=0;i<e.length;i++){const n=[];for(let t=0;t<e.length;t++){if(i===t)continue;const r=e[i],s=e[t];r.x===s.x&&r.y===s.y&&n.push(t)}t[i].attributes.relatedGraphicIndices=n}}_setupMover(){const{enableMovement:t,graphic:e,midpointGraphics:i,vertexGraphics:n,view:r}=this,s=n.concat(i).items;t&&s.push(e),this._mover=new O["default"]({enableMoveAllGraphics:!1,highlightsEnabled:!1,indicatorsEnabled:!1,graphics:s,view:r,callbacks:{onGraphicClick:t=>this._onGraphicClickCallback(t),onGraphicMoveStart:t=>this._onGraphicMoveStartCallback(t),onGraphicMove:t=>this._onGraphicMoveCallback(t),onGraphicMoveStop:t=>this._onGraphicMoveStopCallback(t),onGraphicPointerOver:t=>this._onGraphicPointerOverCallback(t),onGraphicPointerOut:t=>this._onGraphicPointerOutCallback(t)}})}_onGraphicClickCallback(t){t.viewEvent.stopPropagation();const e=t.graphic;if(e===this.graphic)this.clearSelection(),this.emit("graphic-click",t),this.callbacks.onGraphicClick&&this.callbacks.onGraphicClick(t);else if(this._isMidpoint(e)){if(2===t.viewEvent.button)return;const i=this.graphic.clone(),n=this._createVertexFromMidpoint(e);this.refresh(),this._emitVertexAddEvent([e],i,n)}else this._isVertex(e)&&(t.viewEvent.stopPropagation(),2===t.viewEvent.button?this._removeVertices(e):(t.viewEvent.native.shiftKey||this._clearSelection(),this.selectedVertices.includes(e)?this._removeFromSelection(e,!0):this._addToSelection(e)))}_setUpOperation(t){const{graphic:e,dx:i,dy:n}=t,r=e===this.graphic;this._resetSnappingStateVars(),this._setUpGeometryHelper(),this._saveSnappingContextForHandle(e,t),this._activeOperationInfo={target:this.graphic,mover:e,operationType:r?"move":"reshape",totalDx:i,totalDy:n}}_onGraphicMoveStartCallback(t){const e=t.graphic,{dx:i,dy:n}=t;if(e===this.graphic)return this._clearSelection(),this._resetGraphics(),this._setUpOperation(t),this._emitMoveStartEvent(i,n),void("point"===this._editGeometryOperations.data.type&&this._onHandleMove(e,i,n,t,()=>this._emitMoveEvent(i,n)));if(!this.selectedVertices.includes(e)){if(this._clearSelection(),this._isMidpoint(e)){const t=this.graphic.clone(),i=this._createVertexFromMidpoint(e);this._emitVertexAddEvent([e],t,i)}this._addToSelection(e)}this._setUpOperation(t),this._emitReshapeStartEvent(e),this._onHandleMove(e,i,n,t,()=>this._emitReshapeEvent(e))}_onGraphicMoveCallback(t){const{graphic:e,dx:i,dy:n}=t;this._activeOperationInfo.totalDx+=i,this._activeOperationInfo.totalDy+=n;const{operationType:r}=this._activeOperationInfo;"move"===r?"point"===this._editGeometryOperations.data.type?this._onHandleMove(e,i,n,t,()=>this._emitMoveEvent(i,n)):this._emitMoveEvent(i,n):this._onHandleMove(e,i,n,t,()=>this._emitReshapeEvent(e))}_onGraphicMoveStopCallback(t){const{graphic:e,dx:i,dy:n}=t,r=e===this.graphic,s="point"!==this._editGeometryOperations.data.type;this._activeOperationInfo.totalDx+=i,this._activeOperationInfo.totalDy+=n,this._onHandleMove(e,i,n,t,()=>r?this._emitMoveStopEvent():this._emitReshapeStopEvent(e)),r&&s||this._isMidpoint(e)?this.refresh():(this._resetSnappingStateVars(),this._activeOperationInfo=null)}_updateMidpointGraphicLocations(t){for(const e of this.midpointGraphics){const{pathIndex:i,pointIndexStart:n,pointIndexEnd:r}=e.attributes,[s,c]=t[i][n],[o,a]=t[i][r],[h,l]=Object(b["e"])([s,c],[o,a]);e.geometry=new k["a"]({x:h,y:l,spatialReference:this.view.spatialReference})}}_getIndicesForVertexGraphic({attributes:t}){return[(null==t?void 0:t.pathIndex)||0,(null==t?void 0:t.pointIndex)||0]}_getVertexFromEditGeometry(t){const[e,i]=this._getIndicesForVertexGraphic(t);return this._editGeometryOperations.data.components[e].vertices[i]}_onHandleMove(t,e,i,n,r){if(Object(l["a"])(this._snappingTask),!this._snappingContext)return;const s=t.geometry,c="graphic-move-stop"===n.type;if(Object(l["k"])(this.snappingManager)&&this.selectedVertices.length<2&&!c){const n=this.snappingManager;this._stagedVertex=n.update(s,this._snappingContext),this._syncGeometryAfterVertexMove(t,new k["a"](this._stagedVertex),e,i,c),r(),this._snappingTask=Object(p["e"])(async o=>{const a=await n.snap(s,this._snappingContext,o);a.valid&&(this._stagedVertex=a.apply(),this._syncGeometryAfterVertexMove(t,new k["a"](this._stagedVertex),e,i,c),r())})}else{const n=Object(l["k"])(this._stagedVertex)?new k["a"](this._stagedVertex):s;this._syncGeometryAfterVertexMove(t,n,e,i,c),r()}}async _syncGeometryAfterVertexMove(t,e,i,n,r=!1){const s=this._editGeometryOperations.data.geometry;if("point"===s.type)t.geometry=e;else{const{x:c,y:o}=e,[a,h]=this._getIndicesForVertexGraphic(t);let l=Object(b["c"])(s);const p=l[a].length-1;l[a][h]=[c,o],"polygon"===s.type&&(0===h?l[a][p]=[c,o]:h===p&&(l[a][0]=[c,o])),this._isVertex(t)&&(l=this._moveRelatedCoordinates(l,t,c,o),l=this._moveSelectedHandleCoordinates(l,t,i,n,"polygon"===s.type),this._updateMidpointGraphicLocations(l)),this.graphic.geometry=s.clone();const u=this._getVertexFromEditGeometry(t),d=c-u.pos[0],f=o-u.pos[1];this._editGeometryOperations.moveVertices([u],d,f,0),r&&(this._mover?this._mover.updateGeometry(this._mover.graphics.indexOf(t),e):t.geometry=e)}}_moveRelatedCoordinates(t,e,i,n){const{relatedGraphicIndices:r}=e.attributes;for(const s of r){const r=this.vertexGraphics.getItemAt(s),{pathIndex:c,pointIndex:o}=r.attributes;t[c][o]=[i,n],r.geometry=e.geometry}return t}_moveSelectedHandleCoordinates(t,e,i,n,r){for(const s of this.selectedVertices)if(s!==e){const{pathIndex:e,pointIndex:c,relatedGraphicIndices:o}=s.attributes,a=Object(y["a"])(s.geometry,i,n,this.view),h=t[e].length-1;t[e][c]=[a.x,a.y],s.geometry=a,r&&(0===c?t[e][h]=[a.x,a.y]:c===h&&(t[e][0]=[a.x,a.y]));for(const i of o){const e=this.vertexGraphics.getItemAt(i),{pathIndex:n,pointIndex:r}=e.attributes;t[n][r]=[a.x,a.y],e.geometry=a}}return t}_onGraphicPointerOverCallback(t){const e=t.graphic;this._isVertex(e)&&!this._isSelected(e)&&(e.symbol=this.symbols.vertices.hover),this._updateHoverCursor(e)}_onGraphicPointerOutCallback(t){const e=t.graphic;this._isVertex(e)&&!this._isSelected(e)&&(e.symbol=this.symbols.vertices.default),this.view.cursor="default"}_createVertexFromMidpoint(t){const{_graphicAttributes:e,graphic:i}=this,n=i.geometry;if(Object(l["j"])(n)||"polygon"!==n.type&&"polyline"!==n.type)return[];const r=n.clone(),s=[],{pathIndex:c,pointIndexStart:o,pointIndexEnd:a}=t.attributes,{x:h,y:p}=t.geometry,u=0===a?o+1:a,d=Object(b["c"])(r);return d[c].splice(u,0,[h,p]),t.attributes={...e,pathIndex:c,pointIndex:u,relatedGraphicIndices:[]},s.push({coordinates:d[c][u],componentIndex:c,vertexIndex:u}),this.graphic.geometry=r,s}_addToSelection(t){t instanceof r["a"]&&(t=[t]);for(const e of t)e.symbol=this.symbols.vertices.selected;this._set("selectedVertices",this.selectedVertices.concat(t)),this._emitSelectEvent(t)}_removeFromSelection(t,e){const{vertices:i}=this.symbols,n=e?i.hover:i.default;t instanceof r["a"]&&(t=[t]);for(const r of t)this.selectedVertices.splice(this.selectedVertices.indexOf(r),1),this._set("selectedVertices",this.selectedVertices),r.set("symbol",n);this._emitDeselectEvent(t)}_clearSelection(){if(this.selectedVertices.length){const t=this.selectedVertices;for(const e of this.selectedVertices)e.set("symbol",this.symbols.vertices.default);this._set("selectedVertices",[]),this._emitDeselectEvent(t)}}_keyDownHandler(t){w["a"].delete.includes(t.key)&&!t.repeat&&this.selectedVertices.length&&this._removeVertices(this.selectedVertices)}_removeVertices(t){const e=this.graphic.geometry;if(Object(l["j"])(e)||"polygon"!==e.type&&"polyline"!==e.type)return;if("polygon"===e.type&&this.vertexGraphics.length<4||this.vertexGraphics.length<3)return;t instanceof r["a"]&&(t=[t]);const i=this.graphic.clone(),n=e.clone();let s=Object(b["c"])(n);const c=[];t instanceof r["a"]&&(t=[t]);for(const r of t){const{x:t,y:e}=r.geometry;for(let i=0;i<s.length;i++){const n=s[i];for(let r=0;r<n.length;r++){const[o,a]=n[r];t===o&&e===a&&(c.push({coordinates:s[i][r],componentIndex:i,vertexIndex:r}),s[i].splice(Number(r),1))}}}if("polygon"===n.type)s=s.filter(t=>{if(t.length<2)return!1;const[e,i]=t[0],[n,r]=t[t.length-1];return(2!==t.length||e!==n||i!==r)&&(e===n&&i===r||t.push(t[0]),!0)}),n.rings=s;else{for(const t of s)1===t.length&&s.splice(s.indexOf(t),1);n.paths=s}this.graphic.geometry=n,this.refresh(),this._emitVertexRemoveEvent(t,i,c)}_isVertex(t){return this.vertexGraphics.includes(t)}_isSelected(t){return this._isVertex(t)&&this.selectedVertices.includes(t)}_isMidpoint(t){return this.midpointGraphics.includes(t)}_updateHoverCursor(t){this.view.cursor=this._isMidpoint(t)?"copy":"move"}_emitMoveStartEvent(t,e){const i=new P(this.graphic,t,e);this.emit("move-start",i),this.callbacks.onMoveStart&&this.callbacks.onMoveStart(i)}_emitMoveEvent(t,e){const i=new R(this.graphic,t,e);this.emit("move",i),this.callbacks.onMove&&this.callbacks.onMove(i)}_emitMoveStopEvent(){const{totalDx:t,totalDy:e}=this._activeOperationInfo,i=new T(this.graphic,t,e);this.emit("move-stop",i),this.callbacks.onMoveStop&&this.callbacks.onMoveStop(i)}_emitReshapeStartEvent(t){const e=new E(this.graphic,t,this.selectedVertices);this.emit("reshape-start",e),this.callbacks.onReshapeStart&&this.callbacks.onReshapeStart(e)}_emitReshapeEvent(t){const e=new C(this.graphic,t,this.selectedVertices);this.emit("reshape",e),this.callbacks.onReshape&&this.callbacks.onReshape(e)}_emitReshapeStopEvent(t){const e=new A(this.graphic,t,this.selectedVertices);this.emit("reshape-stop",e),this.callbacks.onReshapeStop&&this.callbacks.onReshapeStop(e)}_emitSelectEvent(t){const e=new N(t);this.emit("select",e),this.callbacks.onVertexSelect&&this.callbacks.onVertexSelect(e)}_emitDeselectEvent(t){const e=new F(t);this.emit("deselect",e),this.callbacks.onVertexDeselect&&this.callbacks.onVertexDeselect(e)}_emitVertexAddEvent(t,e,i){const n=new H(t,this.graphic,e,i);this.emit("vertex-add",n),this.callbacks.onVertexAdd&&this.callbacks.onVertexAdd(n)}_emitVertexRemoveEvent(t,e,i){const n=new z(t,this.graphic,e,i);this.emit("vertex-remove",n),this.callbacks.onVertexRemove&&this.callbacks.onVertexRemove(n)}_logGeometryTypeError(){B.error(new c["a"]("reshape:invalid-geometry","Reshape operation not supported for the provided graphic. The geometry type is not supported."))}};Object(n["a"])([Object(d["b"])()],q.prototype,"callbacks",void 0),Object(n["a"])([Object(d["b"])()],q.prototype,"enableMidpoints",void 0),Object(n["a"])([Object(d["b"])()],q.prototype,"enableMovement",void 0),Object(n["a"])([Object(d["b"])()],q.prototype,"enableVertices",void 0),Object(n["a"])([Object(d["b"])()],q.prototype,"graphic",void 0),Object(n["a"])([Object(d["b"])({value:!0})],q.prototype,"highlightsEnabled",null),Object(n["a"])([Object(d["b"])()],q.prototype,"layer",void 0),Object(n["a"])([Object(d["b"])({readOnly:!0})],q.prototype,"midpointGraphics",void 0),Object(n["a"])([Object(d["b"])()],q.prototype,"midpointSymbol",void 0),Object(n["a"])([Object(d["b"])({readOnly:!0})],q.prototype,"selectedVertices",void 0),Object(n["a"])([Object(d["b"])()],q.prototype,"snappingManager",void 0),Object(n["a"])([Object(d["b"])({readOnly:!0})],q.prototype,"state",null),Object(n["a"])([Object(d["b"])({value:L})],q.prototype,"symbols",null),Object(n["a"])([Object(d["b"])({readOnly:!0})],q.prototype,"type",void 0),Object(n["a"])([Object(d["b"])({readOnly:!0})],q.prototype,"vertexGraphics",void 0),Object(n["a"])([Object(d["b"])()],q.prototype,"view",void 0),q=Object(n["a"])([Object(f["a"])(U)],q);const X=q},2119:function(t,e,i){"use strict";i.d(e,"a",(function(){return r}));var n=i("2ab7");class r{constructor(t){this.allocator=t,this._items=[],this._itemsPtr=0,this._grow()}get(){return 0===this._itemsPtr&&Object(n["a"])(()=>this._reset()),this._itemsPtr===this._items.length&&this._grow(),this._items[this._itemsPtr++]}_reset(){const t=Math.min(3*Math.max(8,this._itemsPtr),this._itemsPtr+3*s);this._items.length=Math.min(t,this._items.length),this._itemsPtr=0}_grow(){for(let t=0;t<Math.max(8,Math.min(this._items.length,s));t++)this._items.push(this.allocator())}}const s=1024},"3a35":function(t,e,i){"use strict";var n;i.d(e,"a",(function(){return n})),function(t){t[t.X=0]="X",t[t.Y=1]="Y",t[t.Z=2]="Z"}(n||(n={}))},"680b":function(t,e,i){"use strict";i.d(e,"a",(function(){return s})),i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return c})),i.d(e,"d",(function(){return o}));i("38a4");var n=i("e431"),r=i("0b2d");function s(t){const e=t[0]*t[0]+t[4]*t[4]+t[8]*t[8],i=t[1]*t[1]+t[5]*t[5]+t[9]*t[9],n=t[2]*t[2]+t[6]*t[6]+t[10]*t[10];return Math.sqrt(Math.max(e,i,n))}function c(t,e){const i=Math.sqrt(e[0]*e[0]+e[4]*e[4]+e[8]*e[8]),r=Math.sqrt(e[1]*e[1]+e[5]*e[5]+e[9]*e[9]),s=Math.sqrt(e[2]*e[2]+e[6]*e[6]+e[10]*e[10]);return Object(n["w"])(t,i,r,s),t}function o(t,e,i){Math.abs(t[0])>Math.abs(t[1])?Object(n["w"])(e,0,1,0):Object(n["w"])(e,1,0,0),Object(n["j"])(i,t,e),Object(n["r"])(e,e),Object(n["j"])(e,i,t),Object(n["r"])(i,i)}function a(t,e,i,r){Object(n["f"])(h,e,t),Object(n["f"])(l,i,t),Object(n["j"])(r,h,l),Object(n["r"])(r,r),r[3]=-Object(n["i"])(t,r)}const h=Object(r["f"])(),l=Object(r["f"])();Object(r["f"])(),Object(r["f"])(),Object(r["f"])()},7289:function(t,e,i){"use strict";i.d(e,"a",(function(){return C})),i.d(e,"b",(function(){return A})),i.d(e,"c",(function(){return u})),i.d(e,"d",(function(){return l})),i.d(e,"e",(function(){return g})),i.d(e,"f",(function(){return b})),i.d(e,"g",(function(){return f})),i.d(e,"h",(function(){return d})),i.d(e,"i",(function(){return G})),i.d(e,"j",(function(){return w})),i.d(e,"k",(function(){return I})),i.d(e,"l",(function(){return S})),i.d(e,"m",(function(){return V})),i.d(e,"n",(function(){return E})),i.d(e,"o",(function(){return k})),i.d(e,"p",(function(){return M})),i.d(e,"q",(function(){return H})),i.d(e,"r",(function(){return P})),i.d(e,"s",(function(){return R})),i.d(e,"t",(function(){return x})),i.d(e,"u",(function(){return N})),i.d(e,"v",(function(){return p}));var n=i("38a4"),r=i("b2b2"),s=i("e431"),c=i("0b2d"),o=(i("f895"),i("a1b1")),a=i("7361"),h=i("680b");function l(t=z){return[t[0],t[1],t[2],t[3]]}function p(t=z[0],e=z[1],i=z[2],n=z[3]){return d(t,e,i,n,a["e"].get())}function u(t,e){return d(e[0],e[1],e[2],e[3],t)}function d(t,e,i,n,r=l()){return r[0]=t,r[1]=e,r[2]=i,r[3]=n,r}function f(t,e,i){const n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=Math.abs(n-1)>1e-5&&n>1e-12?1/Math.sqrt(n):1;return i[0]=e[0]*r,i[1]=e[1]*r,i[2]=e[2]*r,i[3]=-(i[0]*t[0]+i[1]*t[1]+i[2]*t[2]),i}function b(t,e,i,n=l()){const r=i[0]-e[0],s=i[1]-e[1],c=i[2]-e[2],o=t[0]-e[0],a=t[1]-e[1],h=t[2]-e[2],p=s*h-c*a,u=c*o-r*h,d=r*a-s*o,f=p*p+u*u+d*d,b=Math.abs(f-1)>1e-5&&f>1e-12?1/Math.sqrt(f):1;return n[0]=p*b,n[1]=u*b,n[2]=d*b,n[3]=-(n[0]*t[0]+n[1]*t[1]+n[2]*t[2]),n}function g(t,e,i,n,r){if(t.count<3)return!1;t.getVec(i,m);let c=n,o=!1;for(;c<t.count-1&&!o;)t.getVec(c,v),c++,o=!Object(s["o"])(m,v);if(!o)return!1;for(c=Math.max(c,r),o=!1;c<t.count&&!o;)t.getVec(c,y),c++,Object(s["f"])(O,m,v),Object(s["r"])(O,O),Object(s["f"])(j,v,y),Object(s["r"])(j,j),o=!Object(s["o"])(m,y)&&!Object(s["o"])(v,y)&&Math.abs(Object(s["i"])(O,j))<_;return o?(b(m,v,y,e),!0):(0!==i||1!==n||2!==r)&&g(t,e,0,1,2)}const _=.99619469809,m=Object(c["f"])(),v=Object(c["f"])(),y=Object(c["f"])(),O=Object(c["f"])(),j=Object(c["f"])();function x(t,e,i){return e!==t&&u(t,e),t[3]=-Object(s["i"])(H(t),i),t}function M(t,e){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e}function G(t,e,i,n){return Object(s["j"])(y,e,t),f(i,y,n)}function w(t,e,i,n){return F(t,e,Object(s["f"])(a["d"].get(),i,e),L,n)}function V(t,e,i){return!!Object(r["k"])(e)&&F(t,e.origin,e.direction,U,i)}function I(t,e,i){return F(t,e.origin,e.vector,D.NONE,i)}function S(t,e,i){return F(t,e.origin,e.vector,D.CLAMP,i)}function k(t,e){return N(t,e)>=0}function E(t,e){const i=e[0],n=e[1],r=e[2],s=e[3],c=e[4],o=e[5];return t[0]*(t[0]>0?i:s)+t[1]*(t[1]>0?n:c)+t[2]*(t[2]>0?r:o)+t[3]>=0}function C(t,e){const i=Object(s["i"])(H(t),e.ray.direction),n=-N(t,e.ray.origin);if(n<0&&i>=0)return!1;if(i>-1e-6&&i<1e-6)return n>0;if((n<0||i<0)&&!(n<0&&i<0))return!0;const r=n/i;return i>0?r<e.c1&&(e.c1=r):r>e.c0&&(e.c0=r),e.c0<=e.c1}function A(t,e){const i=Object(s["i"])(H(t),e.ray.direction),n=-N(t,e.ray.origin);if(i>-1e-6&&i<1e-6)return n>0;const r=n/i;return i>0?r<e.c1&&(e.c1=r):r>e.c0&&(e.c0=r),e.c0<=e.c1}function P(t,e,i){const n=Object(s["k"])(a["d"].get(),H(t),-t[3]),r=T(t,Object(s["f"])(a["d"].get(),e,n),a["d"].get());return Object(s["e"])(i,r,n),i}function R(t,e,i,n){const r=H(t),c=a["d"].get(),l=a["d"].get();Object(h["d"])(r,c,l);const p=Object(s["f"])(a["d"].get(),i,e),u=Object(o["d"])(c,p),d=Object(o["d"])(l,p),f=Object(o["d"])(r,p);return Object(s["w"])(n,u,d,f)}function T(t,e,i){const n=Object(s["k"])(a["d"].get(),H(t),Object(s["i"])(H(t),e));return Object(s["f"])(i,e,n),i}function N(t,e){return Object(s["i"])(H(t),e)+t[3]}function F(t,e,i,r,c){const o=Object(s["i"])(H(t),i);if(0===o)return!1;let a=-(Object(s["i"])(H(t),e)+t[3])/o;return r&D.CLAMP&&(a=Object(n["e"])(a,0,1)),!(!(r&D.INFINITE_MIN)&&a<0||!(r&D.INFINITE_MAX)&&a>1)&&(Object(s["e"])(c,e,Object(s["k"])(c,i,a)),!0)}function H(t){return t}const z=[0,0,1,0];var D;!function(t){t[t.NONE=0]="NONE",t[t.CLAMP=1]="CLAMP",t[t.INFINITE_MIN=4]="INFINITE_MIN",t[t.INFINITE_MAX=8]="INFINITE_MAX"}(D||(D={}));const L=D.INFINITE_MIN|D.INFINITE_MAX,U=D.INFINITE_MAX},7361:function(t,e,i){"use strict";i.d(e,"a",(function(){return g})),i.d(e,"b",(function(){return _})),i.d(e,"c",(function(){return d})),i.d(e,"d",(function(){return f})),i.d(e,"e",(function(){return b}));var n=i("f0b9"),r=i("2ab7"),s=i("dae5"),c=i("afe1"),o=i("b139"),a=i("02f1"),h=i("0b2d"),l=i("0fc4");class p{constructor(t,e,i){this.itemByteSize=t,this.itemCreate=e,this._buffers=new Array,this._items=new Array,this._itemsPtr=0,this._itemsPerBuffer=Math.ceil(i/this.itemByteSize)}get(){0===this._itemsPtr&&Object(r["a"])(()=>this._reset());const t=Math.floor(this._itemsPtr/this._itemsPerBuffer);for(;this._buffers.length<=t;){const t=new ArrayBuffer(this._itemsPerBuffer*this.itemByteSize);for(let e=0;e<this._itemsPerBuffer;++e)this._items.push(this.itemCreate(t,e*this.itemByteSize));this._buffers.push(t)}return this._items[this._itemsPtr++]}_reset(){const t=2*(Math.floor(this._itemsPtr/this._itemsPerBuffer)+1);for(;this._buffers.length>t;)this._buffers.pop(),this._items.length=this._buffers.length*this._itemsPerBuffer;this._itemsPtr=0}static createVec2f64(t=u){return new p(16,a["e"],t)}static createVec3f64(t=u){return new p(24,h["e"],t)}static createVec4f64(t=u){return new p(32,l["c"],t)}static createMat3f64(t=u){return new p(72,s["a"],t)}static createMat4f64(t=u){return new p(128,c["b"],t)}static createQuatf64(t=u){return new p(32,o["d"],t)}get test(){return{size:this._buffers.length*this._itemsPerBuffer*this.itemByteSize}}}const u=4*n["a"].KILOBYTES,d=p.createVec2f64(),f=p.createVec3f64(),b=p.createVec4f64(),g=(p.createMat3f64(),p.createMat4f64()),_=p.createQuatf64()},a1b1:function(t,e,i){"use strict";i.d(e,"a",(function(){return a})),i.d(e,"b",(function(){return h})),i.d(e,"c",(function(){return c})),i.d(e,"d",(function(){return o}));var n=i("38a4"),r=i("e431"),s=i("0b2d");function c(t,e,i){const n=Object(r["i"])(t,e)/Object(r["i"])(t,t);return Object(r["k"])(i,t,n)}function o(t,e){return Object(r["i"])(t,e)/Object(r["p"])(t)}function a(t,e){const i=Object(r["i"])(t,e)/(Object(r["p"])(t)*Object(r["p"])(e));return-Object(n["b"])(i)}function h(t,e,i){Object(r["r"])(l,t),Object(r["r"])(p,e);const s=Object(r["i"])(l,p),c=Object(n["b"])(s),o=Object(r["j"])(l,l,p);return Object(r["i"])(o,i)<0?2*Math.PI-c:c}const l=Object(s["f"])(),p=Object(s["f"])()},afe1:function(t,e,i){"use strict";function n(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function r(t){return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15]]}function s(t,e,i,n,r,s,c,o,a,h,l,p,u,d,f,b){return[t,e,i,n,r,s,c,o,a,h,l,p,u,d,f,b]}function c(t,e){return new Float64Array(t,e,16)}i.d(e,"a",(function(){return o})),i.d(e,"b",(function(){return c})),i.d(e,"c",(function(){return r})),i.d(e,"d",(function(){return n})),i.d(e,"e",(function(){return s}));const o=n();Object.freeze(Object.defineProperty({__proto__:null,create:n,clone:r,fromValues:s,createView:c,IDENTITY:o},Symbol.toStringTag,{value:"Module"}))},b139:function(t,e,i){"use strict";function n(){return[0,0,0,1]}function r(t){return[t[0],t[1],t[2],t[3]]}function s(t,e,i,n){return[t,e,i,n]}function c(t,e){return new Float64Array(t,e,4)}i.d(e,"a",(function(){return o})),i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return r})),i.d(e,"d",(function(){return c}));const o=n();Object.freeze(Object.defineProperty({__proto__:null,create:n,clone:r,fromValues:s,createView:c,IDENTITY:o},Symbol.toStringTag,{value:"Module"}))},d18f:function(t,e,i){"use strict";i.d(e,"a",(function(){return d})),i.d(e,"b",(function(){return h})),i.d(e,"c",(function(){return o})),i.d(e,"d",(function(){return u})),i.d(e,"e",(function(){return l})),i.d(e,"f",(function(){return p})),i.d(e,"g",(function(){return a}));i("b50f");var n=i("2119"),r=i("e431"),s=i("0b2d"),c=i("7361");function o(t){return t?{origin:Object(s["d"])(t.origin),direction:Object(s["d"])(t.direction)}:{origin:Object(s["f"])(),direction:Object(s["f"])()}}function a(t,e){const i=b.get();return i.origin=t,i.direction=e,i}function h(t,e=o()){return p(t.origin,t.direction,e)}function l(t,e,i=o()){return Object(r["g"])(i.origin,t),Object(r["f"])(i.direction,e,t),i}function p(t,e,i=o()){return Object(r["g"])(i.origin,t),Object(r["g"])(i.direction,e),i}function u(t,e){const i=Object(r["j"])(c["d"].get(),Object(r["r"])(c["d"].get(),t.direction),Object(r["f"])(c["d"].get(),e,t.origin));return Object(r["i"])(i,i)}function d(t,e,i){const n=Object(r["i"])(t.direction,Object(r["f"])(i,e,t.origin));return Object(r["e"])(i,t.origin,Object(r["k"])(i,t.direction,n)),i}function f(){return{origin:null,direction:null}}const b=new n["a"](f)},dae5:function(t,e,i){"use strict";function n(){return[1,0,0,0,1,0,0,0,1]}function r(t){return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8]]}function s(t,e,i,n,r,s,c,o,a){return[t,e,i,n,r,s,c,o,a]}function c(t,e){return new Float64Array(t,e,9)}i.d(e,"a",(function(){return c})),i.d(e,"b",(function(){return n}));Object.freeze(Object.defineProperty({__proto__:null,create:n,clone:r,fromValues:s,createView:c},Symbol.toStringTag,{value:"Module"}))},f895:function(t,e,i){"use strict";i.d(e,"a",(function(){return y})),i.d(e,"b",(function(){return _})),i.d(e,"c",(function(){return g})),i.d(e,"d",(function(){return j})),i.d(e,"e",(function(){return M})),i.d(e,"f",(function(){return x})),i.d(e,"g",(function(){return S})),i.d(e,"h",(function(){return z})),i.d(e,"i",(function(){return U})),i.d(e,"j",(function(){return v}));i("c120");var n=i("e92d"),r=i("38a4"),s=i("b2b2"),c=i("d791"),o=i("e431"),a=i("0b2d"),h=i("7577"),l=i("0fc4"),p=i("3a35"),u=i("d18f"),d=i("a1b1"),f=i("7361");const b=n["a"].getLogger("esri.geometry.support.sphere");function g(){return Object(l["e"])()}function _(t,e=g()){return Object(h["c"])(e,t)}function m(t,e){return Object(l["g"])(t[0],t[1],t[2],e)}function v(t){return t}function y(t){t[0]=t[1]=t[2]=t[3]=0}function O(t,e){return t[0]=t[1]=t[2]=0,t[3]=e,t}function j(t){return t[3]}function x(t){return t}function M(t,e,i,n){return Object(l["g"])(t,e,i,n)}function G(t,e,i){return t!==i&&Object(o["g"])(i,t),i[3]=t[3]+e,i}function w(t,e,i){return b.error("sphere.setExtent is not yet supported"),t===i?i:_(t,i)}function V(t,e,i){if(Object(s["j"])(e))return!1;const{origin:n,direction:r}=e,c=I;c[0]=n[0]-t[0],c[1]=n[1]-t[1],c[2]=n[2]-t[2];const o=r[0]*r[0]+r[1]*r[1]+r[2]*r[2],a=2*(r[0]*c[0]+r[1]*c[1]+r[2]*c[2]),h=a*a-4*o*(c[0]*c[0]+c[1]*c[1]+c[2]*c[2]-t[3]*t[3]);if(h<0)return!1;const l=Math.sqrt(h);let p=(-a-l)/(2*o);const u=(-a+l)/(2*o);return(p<0||u<p&&u>0)&&(p=u),!(p<0)&&(i&&(i[0]=n[0]+r[0]*p,i[1]=n[1]+r[1]*p,i[2]=n[2]+r[2]*p),!0)}const I=Object(a["f"])();function S(t,e){return V(t,e,null)}function k(t,e,i){if(V(t,e,i))return i;const n=E(t,e,f["d"].get());return Object(o["e"])(i,e.origin,Object(o["k"])(f["d"].get(),e.direction,Object(o["m"])(e.origin,n)/Object(o["p"])(e.direction))),i}function E(t,e,i){const n=f["d"].get(),r=f["a"].get();Object(o["j"])(n,e.origin,e.direction);const s=j(t);Object(o["j"])(i,n,e.origin),Object(o["k"])(i,i,1/Object(o["p"])(i)*s);const a=R(t,e.origin),h=Object(d["a"])(e.origin,i);return Object(c["d"])(r,h+a,n),Object(o["q"])(i,i,r),i}function C(t,e,i){return V(t,e,i)?i:(Object(u["a"])(e,x(t),i),A(t,i,i))}function A(t,e,i){const n=Object(o["f"])(f["d"].get(),e,x(t)),r=Object(o["k"])(f["d"].get(),n,t[3]/Object(o["p"])(n));return Object(o["e"])(i,r,x(t))}function P(t,e){const i=Object(o["f"])(f["d"].get(),e,x(t)),n=Object(o["t"])(i),r=t[3]*t[3];return Math.sqrt(Math.abs(n-r))}function R(t,e){const i=Object(o["f"])(f["d"].get(),e,x(t)),n=Object(o["p"])(i),s=j(t),c=s+Math.abs(s-n);return Object(r["b"])(s/c)}const T=Object(a["f"])();function N(t,e,i,n){const s=Object(o["f"])(T,e,x(t));switch(i){case p["a"].X:{const t=Object(r["d"])(s,T)[2];return Object(o["w"])(n,-Math.sin(t),Math.cos(t),0)}case p["a"].Y:{const t=Object(r["d"])(s,T),e=t[1],i=t[2],c=Math.sin(e);return Object(o["w"])(n,-c*Math.cos(i),-c*Math.sin(i),Math.cos(e))}case p["a"].Z:return Object(o["r"])(n,s);default:return}}function F(t,e){const i=Object(o["f"])(D,e,x(t));return Object(o["p"])(i)-t[3]}function H(t,e,i,n){const r=F(t,e),s=N(t,e,p["a"].Z,D),c=Object(o["k"])(D,s,i-r);return Object(o["e"])(n,e,c)}function z(t,e){const i=Object(o["h"])(x(t),e),n=j(t);return i<=n*n}const D=Object(a["f"])(),L=g(),U=Object.freeze(Object.defineProperty({__proto__:null,create:g,copy:_,fromCenterAndRadius:m,wrap:v,clear:y,fromRadius:O,getRadius:j,getCenter:x,fromValues:M,elevate:G,setExtent:w,intersectRay:V,intersectsRay:S,intersectRayClosestSilhouette:k,closestPointOnSilhouette:E,closestPoint:C,projectPoint:A,distanceToSilhouette:P,angleToSilhouette:R,axisAt:N,altitudeAt:F,setAltitudeAt:H,containsPoint:z,tmpSphere:L},Symbol.toStringTag,{value:"Module"}))}}]);
//# sourceMappingURL=chunk-fe0a16d8.0a8994fa.js.map