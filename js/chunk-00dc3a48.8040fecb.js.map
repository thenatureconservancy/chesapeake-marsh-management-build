{"version":3,"sources":["webpack:///./node_modules/@arcgis/core/layers/graphics/data/BoundsStore.js","webpack:///./node_modules/@arcgis/core/layers/graphics/data/optimizedFeatureQueryEngineAdapter.js","webpack:///./node_modules/@arcgis/core/core/AsyncSequence.js","webpack:///./node_modules/@arcgis/core/views/interactive/snapping/featureSources/featureServiceSource/PendingFeatureTile.js","webpack:///./node_modules/@arcgis/core/views/interactive/snapping/featureSources/featureServiceSource/FeatureServiceTiledFetcher.js","webpack:///./node_modules/@arcgis/core/views/interactive/snapping/featureSources/featureServiceSource/FeatureServiceTileCache.js","webpack:///./node_modules/@arcgis/core/views/interactive/snapping/featureSources/featureServiceSource/FeatureServiceTileStore.js","webpack:///./node_modules/@arcgis/core/views/interactive/snapping/featureSources/featureServiceSource/FeatureServiceSnappingSourceWorker.js","webpack:///./node_modules/@arcgis/core/layers/graphics/data/FeatureStore.js","webpack:///./node_modules/@arcgis/core/core/libs/rbush/PooledRBush.js"],"names":["n","t","minX","minY","maxX","maxY","e","i","o","s","d","search","h","constructor","this","_indexInvalid","_boundsToLoad","_boundsById","Map","_idByBounds","_index","_loadIndex","Array","size","forEach","clear","load","length","filter","has","values","Math","min","max","delete","get","remove","forEachInBounds","invalidateIndex","set","push","getObjectId","objectId","getAttributes","attributes","getAttribute","cloneWithGeometry","r","getGeometry","geometry","getCentroid","centroid","hasZ","hasM","super","arguments","updating","pending","promise","callback","_process","then","catch","shift","prototype","u","data","resolution","state","type","CREATED","alive","process","_gotoFetchCount","task","resume","FETCH_COUNT","FETCHED_COUNT","_gotoFetchFeatures","FETCH_FEATURES","FETCHED_FEATURES","_goToDone","DONE","featureCount","stateToString","previous","features","a","async","fetchCount","_gotoFetchedCount","ok","value","fetchFeatures","_gotoFetchedFeatures","finish","reset","abort","intersects","extent","T","E","S","getLogger","C","tilesOfInterest","availability","pendingTiles","pendingEdits","pendingEditsAbortController","AbortController","store","featureStore","geometryType","_get","_filterProperties","JSON","stringify","_set","customParameters","tileInfo","tileSize","updatingHandles","initialize","_initializeFetchExtent","add","configuration","refresh","id","destroy","_deletePendingTile","applyEdits","addedFeatures","updatedFeatures","deletedFeatures","map","globalId","_lookupObjectIdByGlobalId","addPromise","processEdits","_queryFeaturesById","signal","_processPendingTiles","capabilities","query","supportsExtent","_","url","b","v","where","outSpatialReference","spatialReference","cacheHint","supportsCacheHint","f","fromJSON","c","warn","handles","numberOfFeatures","numFeatures","from","debugInfo","storedTiles","_markTilesNotAlive","_createPendingTiles","_deletePendingTiles","_collectMissingTilesInfo","_setAvailability","coveredArea","fullArea","missingTiles","_createPendingTile","_verifyTileComplexity","prepend","_fetchCount","_fetchFeatures","_finishPendingTile","_ensureFetchAllCounts","getFeatureCount","_verifyVertexComplexity","_verifyFeatureDensity","minimumVerticesPerFeature","w","q","I","_updateAvailability","O","_createCountQuery","timeout","x","_createFeaturesQuery","_setPagingParameters","exceededTransferLimit","_queryFeatures","l","num","concat","gdbVersion","timeExtent","globalIdField","objectIdField","Error","objectIds","supportsFormatPBF","_queryFeaturesPBF","_queryFeaturesJSON","sourceSpatialReference","F","g","P","m","_createBaseQuery","outFields","returnGeometry","supportsResultType","resultType","returnZ","returnM","y","supportsPagination","supportsMaxRecordCountFactor","tileMaxRecordCount","maxRecordCount","MAX_MAX_RECORD_COUNT_FACTOR","j","start","maxRecordCountFactor","ceil","constructOnly","readOnly","p","_store","_byteSize","byteSize","_used","applyByteSizeLimit","Symbol","iterator","maximumByteSize","MEGABYTES","tileBounds","tiles","refCounts","tileFeatureCounts","tmpBoundingRect","_referenceFeature","ADDED","_addTileStorage","Set","addMany","_removeTileStorage","_processEditsDelete","_processEditsRefetch","_remove","_unreferenceFeature","REMOVED","removeManyById","_createTileTree","_simplify","_collectMissingTiles","count","level","row","col","updateTileInfo","ExtrapolateOptions","POWER_OF_TWO","_tilesAreRelated","_populateChildren","floor","isLeaf","children","_mergeChildren","_purge","_forEachLeaf","_collectMissingTilesRecurse","info","hasChildren","addMissing","UNCHANGED","featureReferences","keys","reduce","lengths","coords","EventedAccessor","isInitializing","whenSetup","pendingApplyEdits","featureFetcher","queryEngine","timeInfo","fields","serviceInfo","emit","_notifyUpdating","resolve","configure","_updateFeatureFetcherConfiguration","result","executeQueryForSnapping","point","distance","types","edits","geometryInfo","_boundsStore","_featuresById","_markedIds","events","featureAdapter","fullBounds","vertexCount","_add","_emitChanged","removeById","forEachBounds","getFeature","toArray","startMarkingUsedFeatures","sweep","error","feature","displayId","onFeatureAdd","onFeatureRemove","compareMinX","compareMinY","_toBBox","_maxEntries","_minEntries","_initFormat","prune","M","X","Y","all","_all","leaf","pop","collides","insert","_build","slice","height","_splitRoot","_insert","indexHint","splice","_condense","toJSON","pushArray","log","sqrt","_chooseSubtree","_split","_adjustParentBBoxes","_chooseSplitAxis","_chooseSplitIndex","console","_allDistMargin","sort","Function","join","deallocator","B"],"mappings":"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","file":"js/chunk-00dc3a48.8040fecb.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport i from\"../../../core/has.js\";import{PooledRBush as s}from\"../../../core/libs/rbush/PooledRBush.js\";import{empty as d}from\"../../../geometry/support/aaBoundingRect.js\";const n=5e4,t={minX:0,minY:0,maxX:0,maxY:0};function e(i){t.minX=i[0],t.minY=i[1],t.maxX=i[2],t.maxY=i[3]}function o(i,s,d){e(s),i.search(t,d)}class h{constructor(){this._indexInvalid=!1,this._boundsToLoad=[],this._boundsById=new Map,this._idByBounds=new Map,this._index=new s(9,i(\"esri-csp-restrictions\")?i=>({minX:i[0],minY:i[1],maxX:i[2],maxY:i[3]}):[\"[0]\",\"[1]\",\"[2]\",\"[3]\"]),this._loadIndex=()=>{if(this._indexInvalid){const i=new Array(this._idByBounds.size);let s=0;this._idByBounds.forEach(((d,n)=>{i[s++]=n})),this._indexInvalid=!1,this._index.clear(),this._index.load(i)}else this._boundsToLoad.length&&(this._index.load(this._boundsToLoad.filter((i=>this._idByBounds.has(i)))),this._boundsToLoad.length=0)}}get fullBounds(){if(!this._boundsById.size)return null;const i=d();for(const s of this._boundsById.values())s&&(i[0]=Math.min(s[0],i[0]),i[1]=Math.min(s[1],i[1]),i[2]=Math.max(s[2],i[2]),i[3]=Math.max(s[3],i[3]));return i}get valid(){return!this._indexInvalid}clear(){this._indexInvalid=!1,this._boundsToLoad.length=0,this._boundsById.clear(),this._idByBounds.clear(),this._index.clear()}delete(i){const s=this._boundsById.get(i);this._boundsById.delete(i),s&&(this._idByBounds.delete(s),this._indexInvalid||this._index.remove(s))}forEachInBounds(i,s){this._loadIndex(),o(this._index,i,(i=>s(this._idByBounds.get(i))))}get(i){return this._boundsById.get(i)}has(i){return this._boundsById.has(i)}invalidateIndex(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)}set(i,s){if(!this._indexInvalid){const s=this._boundsById.get(i);s&&(this._index.remove(s),this._idByBounds.delete(s))}this._boundsById.set(i,s),s&&(this._idByBounds.set(s,i),this._indexInvalid||(this._boundsToLoad.push(s),this._boundsToLoad.length>n&&this._loadIndex()))}}export{h as BoundsStore};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{isNone as t}from\"../../../core/maybe.js\";import{getCentroidOptimizedGeometry as e}from\"../centroid.js\";import{OptimizedFeature as r}from\"../OptimizedFeature.js\";import o from\"../OptimizedGeometry.js\";const i={getObjectId:t=>t.objectId,getAttributes:t=>t.attributes,getAttribute:(t,e)=>t.attributes[e],cloneWithGeometry:(t,e)=>new r(e,t.attributes,null,t.objectId),getGeometry:t=>t.geometry,getCentroid:(r,i)=>(t(r.centroid)&&(r.centroid=e(new o,r.geometry,i.hasZ,i.hasM)),r.centroid)};export{i as optimizedFeatureQueryEngineAdapter};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{_ as s}from\"../chunks/tslib.es6.js\";import t from\"./Accessor.js\";import{property as e}from\"./accessorSupport/decorators/property.js\";import{subclass as i}from\"./accessorSupport/decorators/subclass.js\";let r=class extends t{constructor(){super(...arguments),this.updating=!1,this.pending=[]}push(s,t){this.pending.push({promise:s,callback:t}),1===this.pending.length&&this._process()}_process(){if(!this.pending.length)return void(this.updating=!1);this.updating=!0;const s=this.pending[0];s.promise.then((t=>s.callback(t))).catch((()=>{})).then((()=>{this.pending.shift(),this._process()}))}};s([e()],r.prototype,\"updating\",void 0),r=s([i(\"esri.core.AsyncSequence\")],r);export{r as AsyncSequence};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{resultOrAbort as t}from\"../../../../../core/asyncUtils.js\";import{isNone as e}from\"../../../../../core/maybe.js\";import{createTask as s}from\"../../../../../core/promiseUtils.js\";import{create as a,fromExtent as r,intersects as E}from\"../../../../../geometry/support/aaBoundingRect.js\";class o{constructor(t,e){this.data=t,this.resolution=e,this.state={type:u.CREATED},this.alive=!0}process(t){switch(this.state.type){case u.CREATED:return this.state=this._gotoFetchCount(this.state,t),this.state.task.promise.then(t.resume,t.resume);case u.FETCH_COUNT:break;case u.FETCHED_COUNT:return this.state=this._gotoFetchFeatures(this.state,t),this.state.task.promise.then(t.resume,t.resume);case u.FETCH_FEATURES:break;case u.FETCHED_FEATURES:this.state=this._goToDone(this.state,t);case u.DONE:}return null}get debugInfo(){return{data:this.data,featureCount:this.featureCount,state:this.stateToString}}get featureCount(){switch(this.state.type){case u.CREATED:case u.FETCH_COUNT:return 0;case u.FETCHED_COUNT:return this.state.featureCount;case u.FETCH_FEATURES:return this.state.previous.featureCount;case u.FETCHED_FEATURES:return this.state.features.length;case u.DONE:return this.state.previous.features.length}}get stateToString(){switch(this.state.type){case u.CREATED:return\"created\";case u.FETCH_COUNT:return\"fetch-count\";case u.FETCHED_COUNT:return\"fetched-count\";case u.FETCH_FEATURES:return\"fetch-features\";case u.FETCHED_FEATURES:return\"fetched-features\";case u.DONE:return\"done\"}}_gotoFetchCount(e,a){return{type:u.FETCH_COUNT,previous:e,task:s((async e=>{const s=await t(a.fetchCount(this,e));this.state.type===u.FETCH_COUNT&&(this.state=this._gotoFetchedCount(this.state,s.ok?s.value:1/0))}))}}_gotoFetchedCount(t,e){return{type:u.FETCHED_COUNT,featureCount:e,previous:t}}_gotoFetchFeatures(e,a){return{type:u.FETCH_FEATURES,previous:e,task:s((async s=>{const r=await t(a.fetchFeatures(this,e.featureCount,s));this.state.type===u.FETCH_FEATURES&&(this.state=this._gotoFetchedFeatures(this.state,r.ok?r.value:[]))}))}}_gotoFetchedFeatures(t,e){return{type:u.FETCHED_FEATURES,previous:t,features:e}}_goToDone(t,e){return e.finish(this,t.features),{type:u.DONE,previous:t}}reset(){const t=this.state;switch(this.state={type:u.CREATED},t.type){case u.CREATED:case u.FETCHED_COUNT:case u.FETCHED_FEATURES:case u.DONE:break;case u.FETCH_COUNT:case u.FETCH_FEATURES:t.task.abort()}}intersects(t){return!(!e(t)&&this.data.extent)||(r(t,T),E(this.data.extent,T))}}var u;!function(t){t[t.CREATED=0]=\"CREATED\",t[t.FETCH_COUNT=1]=\"FETCH_COUNT\",t[t.FETCHED_COUNT=2]=\"FETCHED_COUNT\",t[t.FETCH_FEATURES=3]=\"FETCH_FEATURES\",t[t.FETCHED_FEATURES=4]=\"FETCHED_FEATURES\",t[t.DONE=5]=\"DONE\"}(u||(u={}));const T=a();export{o as PendingFeatureTile,u as StateType};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../chunks/tslib.es6.js\";import{equals as t}from\"../../../../../core/arrayUtils.js\";import{AsyncSequence as i}from\"../../../../../core/AsyncSequence.js\";import{HandleOwner as s}from\"../../../../../core/HandleOwner.js\";import{makeHandle as r}from\"../../../../../core/handleUtils.js\";import o from\"../../../../../core/Logger.js\";import{isSome as n,isNone as a,unwrap as l}from\"../../../../../core/maybe.js\";import{createTask as u,throwIfAbortError as c}from\"../../../../../core/promiseUtils.js\";import{sync as d}from\"../../../../../core/reactiveUtils.js\";import{property as h}from\"../../../../../core/accessorSupport/decorators/property.js\";import\"../../../../../core/has.js\";import\"../../../../../core/accessorSupport/ensureType.js\";import{subclass as p}from\"../../../../../core/accessorSupport/decorators/subclass.js\";import f from\"../../../../../geometry/Extent.js\";import{toExtent as y}from\"../../../../../geometry/support/aaBoundingRect.js\";import{unquantizeOptimizedFeatureSet as g,convertFromFeatureSet as m}from\"../../../../../layers/graphics/featureConversionUtils.js\";import{isHostedAgolService as _}from\"../../../../../layers/support/arcgisLayerUrl.js\";import{OptimizedFeatureSetParserContext as F}from\"../../../../../rest/query/operations/pbfOptimizedFeatureSet.js\";import{executeQueryForExtent as b,executeQueryPBF as T,executeQuery as P}from\"../../../../../rest/query/operations/query.js\";import v from\"../../../../../rest/support/Query.js\";import{StateType as I,PendingFeatureTile as O}from\"./PendingFeatureTile.js\";const S=o.getLogger(\"esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceTiledFetcher\");let C=class extends s{constructor(e){super(e),this.tilesOfInterest=[],this.availability=0,this.pendingTiles=new Map,this.pendingEdits=new i,this.pendingEditsAbortController=new AbortController}get minimumVerticesPerFeature(){switch(this.store?.featureStore.geometryType){case\"esriGeometryPoint\":case\"esriGeometryMultipoint\":return 1;case\"esriGeometryPolygon\":return 4;case\"esriGeometryPolyline\":return 2}}set filter(e){const t=this._get(\"filter\"),i=this._filterProperties(e);JSON.stringify(t)!==JSON.stringify(i)&&this._set(\"filter\",i)}set customParameters(e){const t=this._get(\"customParameters\");JSON.stringify(t)!==JSON.stringify(e)&&this._set(\"customParameters\",e)}get configuration(){return{filter:this.filter,customParameters:this.customParameters,tileInfo:this.tileInfo,tileSize:this.tileSize}}set tileInfo(e){const t=this._get(\"tileInfo\");t!==e&&(n(e)&&n(t)&&JSON.stringify(e)===JSON.stringify(t)||(this._set(\"tileInfo\",e),this.store.tileInfo=e))}set tileSize(e){this._get(\"tileSize\")!==e&&this._set(\"tileSize\",e)}get updating(){return this.updatingHandles.updating||this.pendingEdits.updating}initialize(){this._initializeFetchExtent(),this.updatingHandles.add((()=>this.configuration),(()=>this.refresh())),this.updatingHandles.add((()=>this.tilesOfInterest),((e,i)=>{t(e,i,(({id:e},{id:t})=>e===t))||this._process()}),d)}destroy(){this.pendingTiles.forEach((e=>this._deletePendingTile(e))),this.pendingTiles.clear(),this.store.destroy(),this.tilesOfInterest.length=0,this.pendingEditsAbortController.abort(),this.pendingEditsAbortController=null}refresh(){this.store.refresh(),this.pendingTiles.forEach((e=>this._deletePendingTile(e))),this._process()}applyEdits(e){this.pendingEdits.push(e,(async e=>{if(0===e.addedFeatures.length&&0===e.updatedFeatures.length&&0===e.deletedFeatures.length)return;for(const[,i]of this.pendingTiles)i.reset();const t={...e,deletedFeatures:e.deletedFeatures.map((({objectId:e,globalId:t})=>e&&-1!==e?e:this._lookupObjectIdByGlobalId(t)))};await this.updatingHandles.addPromise(this.store.processEdits(t,((e,t)=>this._queryFeaturesById(e,t)),this.pendingEditsAbortController.signal)),this._processPendingTiles()}))}_initializeFetchExtent(){if(!this.capabilities.query.supportsExtent||!_(this.url))return;const e=u((async e=>{try{const t=await b(this.url,new v({where:\"1=1\",outSpatialReference:this.spatialReference,cacheHint:!!this.capabilities.query.supportsCacheHint||void 0}),{query:this.configuration.customParameters,signal:e});this.store.extent=f.fromJSON(t.data?.extent)}catch(t){c(t),S.warn(\"Failed to fetch data extent\",t)}}));this.updatingHandles.addPromise(e.promise.then((()=>this._process()))),this.handles.add(r((()=>e.abort())))}get debugInfo(){return{numberOfFeatures:this.store.featureStore.numFeatures,tilesOfInterest:this.tilesOfInterest,pendingTiles:Array.from(this.pendingTiles.values()).map((e=>e.debugInfo)),storedTiles:this.store.debugInfo}}_process(){this._markTilesNotAlive(),this._createPendingTiles(),this._deletePendingTiles(),this._processPendingTiles()}_markTilesNotAlive(){for(const[,e]of this.pendingTiles)e.alive=!1}_createPendingTiles(){const e=this._collectMissingTilesInfo();if(this._setAvailability(a(e)?1:e.coveredArea/e.fullArea),!a(e))for(const{data:t,resolution:i}of e.missingTiles){const e=this.pendingTiles.get(t.id);e?(e.resolution=i,e.alive=!0):this._createPendingTile(t,i)}}_collectMissingTilesInfo(){let e=null;for(let t=this.tilesOfInterest.length-1;t>=0;t--){const i=this.tilesOfInterest[t],s=this.store.process(i,((e,t)=>this._verifyTileComplexity(e,t)));a(e)?e=s:e.prepend(s)}return e}_deletePendingTiles(){for(const[,e]of this.pendingTiles)e.alive||this._deletePendingTile(e)}_processPendingTiles(){const e={fetchCount:(e,t)=>this._fetchCount(e,t),fetchFeatures:(e,t,i)=>this._fetchFeatures(e,t,i),finish:(e,t)=>this._finishPendingTile(e,t),resume:()=>this._processPendingTiles()};if(this._ensureFetchAllCounts(e))for(const[,t]of this.pendingTiles)this._verifyTileComplexity(this.store.getFeatureCount(t.data),t.resolution)&&this.updatingHandles.addPromise(t.process(e))}_verifyTileComplexity(e,t){return this._verifyVertexComplexity(e)&&this._verifyFeatureDensity(e,t)}_verifyVertexComplexity(e){return e*this.minimumVerticesPerFeature<E}_verifyFeatureDensity(e,t){if(a(this.tileInfo))return!1;const i=this.tileSize*t;return e*(w/(i*i))<q}_ensureFetchAllCounts(e){let t=!0;for(const[,i]of this.pendingTiles)i.state.type<I.FETCHED_COUNT&&this.updatingHandles.addPromise(i.process(e)),i.state.type<=I.FETCH_COUNT&&(t=!1);return t}_finishPendingTile(e,t){this.store.add(e.data,t),this._deletePendingTile(e),this._updateAvailability()}_updateAvailability(){const e=this._collectMissingTilesInfo();this._setAvailability(a(e)?1:e.coveredArea/e.fullArea)}_setAvailability(e){this._set(\"availability\",e)}_createPendingTile(e,t){const i=new O(e,t);return this.pendingTiles.set(e.id,i),i}_deletePendingTile(e){e.reset(),this.pendingTiles.delete(e.data.id)}async _fetchCount(e,t){return this.store.fetchCount(e.data,this.url,this._createCountQuery(e),{query:this.customParameters,timeout:x,signal:t})}async _fetchFeatures(e,t,i){let s,r=0,o=0,n=t;for(;;){const a=this._createFeaturesQuery(e),u=this._setPagingParameters(a,r,n),{features:c,exceededTransferLimit:d}=await this._queryFeatures(a,i);if(u&&(r+=l(a.num)),o+=c.length,s=s?s.concat(c):c,n=t-o,!u||!d||n<=0)return s}}_filterProperties(e){return a(e)?{where:\"1=1\",gdbVersion:void 0,timeExtent:void 0}:{where:e.where||\"1=1\",timeExtent:e.timeExtent,gdbVersion:e.gdbVersion}}_lookupObjectIdByGlobalId(e){const t=this.globalIdField,i=this.objectIdField;if(a(t))throw new Error(\"Expected globalIdField to be defined\");let s=null;if(this.store.featureStore.forEach((r=>{e===r.attributes[t]&&(s=r.objectId??r.attributes[i])})),a(s))throw new Error(`Expected to find a feature with globalId ${e}`);return s}_queryFeaturesById(e,t){const i=this._createFeaturesQuery(null);return i.objectIds=e,this._queryFeatures(i,t)}_queryFeatures(e,t){return this.capabilities.query.supportsFormatPBF?this._queryFeaturesPBF(e,t):this._queryFeaturesJSON(e,t)}async _queryFeaturesPBF(e,t){const{sourceSpatialReference:i}=this,{data:s}=await T(this.url,e,new F({sourceSpatialReference:i}),{query:this.configuration.customParameters,timeout:x,signal:t});return g(s)}async _queryFeaturesJSON(e,t){const{sourceSpatialReference:i}=this,{data:s}=await P(this.url,e,i,{query:this.configuration.customParameters,timeout:x,signal:t});return m(s,this.objectIdField)}_createCountQuery(e){const t=this._createBaseQuery(e);return this.capabilities.query.supportsCacheHint&&(t.cacheHint=!0),t}_createFeaturesQuery(e){const t=this._createBaseQuery(e);return t.outFields=this.globalIdField?[this.globalIdField,this.objectIdField]:[this.objectIdField],t.returnGeometry=!0,n(e)&&(this.capabilities.query.supportsResultType?t.resultType=\"tile\":this.capabilities.query.supportsCacheHint&&(t.cacheHint=!0)),t}_createBaseQuery(e){const t=new v({returnZ:!1,returnM:!1,geometry:n(this.tileInfo)&&n(e)?y(e.data.extent,this.tileInfo.spatialReference):void 0}),i=this.configuration.filter;return n(i)&&(t.where=i.where,t.gdbVersion=i.gdbVersion,t.timeExtent=i.timeExtent),t.outSpatialReference=this.spatialReference,t}_setPagingParameters(e,t,i){if(!this.capabilities.query.supportsPagination)return!1;const{supportsMaxRecordCountFactor:s,supportsCacheHint:r,tileMaxRecordCount:o,maxRecordCount:n,supportsResultType:a}=this.capabilities.query,l=s?v.MAX_MAX_RECORD_COUNT_FACTOR:1,u=l*((a||r)&&o?o:n||j);return e.start=t,s?(e.maxRecordCountFactor=Math.min(l,Math.ceil(i/u)),e.num=Math.min(i,e.maxRecordCountFactor*u)):e.num=Math.min(i,u),!0}};e([h({constructOnly:!0})],C.prototype,\"url\",void 0),e([h({constructOnly:!0})],C.prototype,\"objectIdField\",void 0),e([h({constructOnly:!0})],C.prototype,\"globalIdField\",void 0),e([h({constructOnly:!0})],C.prototype,\"capabilities\",void 0),e([h({constructOnly:!0})],C.prototype,\"sourceSpatialReference\",void 0),e([h({constructOnly:!0})],C.prototype,\"spatialReference\",void 0),e([h({constructOnly:!0})],C.prototype,\"store\",void 0),e([h({readOnly:!0})],C.prototype,\"minimumVerticesPerFeature\",null),e([h()],C.prototype,\"filter\",null),e([h()],C.prototype,\"customParameters\",null),e([h({readOnly:!0})],C.prototype,\"configuration\",null),e([h()],C.prototype,\"tileInfo\",null),e([h()],C.prototype,\"tileSize\",null),e([h()],C.prototype,\"tilesOfInterest\",void 0),e([h({readOnly:!0})],C.prototype,\"updating\",null),e([h({readOnly:!0})],C.prototype,\"availability\",void 0),C=e([p(\"esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceTiledFetcher\")],C);const j=2e3,x=6e5,E=1e6,w=25,q=1;export{C as FeatureServiceTiledFetcher};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nclass t{constructor(){this._store=new Map,this._byteSize=0}set(t,e){this.delete(t),this._store.set(t,e),this._byteSize+=e.byteSize}delete(t){const e=this._store.get(t);return!!this._store.delete(t)&&(this._byteSize-=e.byteSize,!0)}get(t){return this._used(t),this._store.get(t)}has(t){return this._used(t),this._store.has(t)}clear(){this._store.clear()}applyByteSizeLimit(t,e){for(const[s,r]of this._store){if(this._byteSize<=t)break;this.delete(s),e(r)}}values(){return this._store.values()}[Symbol.iterator](){return this._store[Symbol.iterator]()}_used(t){const e=this._store.get(t);e&&(this._store.delete(t),this._store.set(t,e))}}export{t as FeatureServiceTileCache};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../chunks/tslib.es6.js\";import t from\"../../../../../core/Accessor.js\";import{ByteSizeUnit as s,estimateAttributesObjectSize as i,estimateFixedArraySize as r}from\"../../../../../core/byteSizeEstimations.js\";import{isNone as o,isSome as n}from\"../../../../../core/maybe.js\";import{property as l}from\"../../../../../core/accessorSupport/decorators/property.js\";import\"../../../../../core/arrayUtils.js\";import\"../../../../../core/has.js\";import\"../../../../../core/accessorSupport/ensureType.js\";import{subclass as a}from\"../../../../../core/accessorSupport/decorators/subclass.js\";import{create as c,intersects as h,fromExtent as u,area as d}from\"../../../../../geometry/support/aaBoundingRect.js\";import{getBoundsOptimizedGeometry as f}from\"../../../../../layers/graphics/featureConversionUtils.js\";import{BoundsStore as p}from\"../../../../../layers/graphics/data/BoundsStore.js\";import m from\"../../../../../layers/support/TileInfo.js\";import{executeQueryForCount as g}from\"../../../../../rest/query/operations/query.js\";import{FeatureServiceTileCache as _}from\"./FeatureServiceTileCache.js\";let v=class extends t{constructor(e){super(e),this.tileInfo=null,this.extent=null,this.maximumByteSize=10*s.MEGABYTES,this.tileBounds=new p,this.tiles=new _,this.refCounts=new Map,this.tileFeatureCounts=new Map,this.tmpBoundingRect=c()}add(e,t){const s=[];for(const i of t)this._referenceFeature(i.objectId)===w.ADDED&&s.push(i);this._addTileStorage(e,new Set(t.map((({objectId:e})=>e))),y(t)),this.featureStore.addMany(s),this.tiles.applyByteSizeLimit(this.maximumByteSize,(e=>this._removeTileStorage(e)))}destroy(){this.clear(),this.tileFeatureCounts.clear()}clear(){this.featureStore.clear(),this.tileBounds.clear(),this.tiles.clear(),this.refCounts.clear()}refresh(){this.clear(),this.tileFeatureCounts.clear()}processEdits(e,t,s){return this._processEditsDelete(e.deletedFeatures.concat(e.updatedFeatures)),this._processEditsRefetch(e.addedFeatures.concat(e.updatedFeatures),t,s)}_addTileStorage(e,t,s){this.tiles.set(e.id,new S(e,t,s)),this.tileBounds.set(e.id,e.extent),this.tileFeatureCounts.set(e.id,t.size)}_remove({id:e}){const t=this.tiles.get(e);t&&this._removeTileStorage(t)}_removeTileStorage(e){const t=[];for(const i of e.objectIds)this._unreferenceFeature(i)===w.REMOVED&&t.push(i);this.featureStore.removeManyById(t);const s=e.data.id;this.tiles.delete(s),this.tileBounds.delete(s)}_processEditsDelete(e){this.featureStore.removeManyById(e);for(const[,t]of this.tiles){for(const s of e)t.objectIds.delete(s);this.tileFeatureCounts.set(t.data.id,t.objectIds.size)}for(const t of e)this.refCounts.delete(t)}async _processEditsRefetch(e,t,s){const i=(await t(e,s)).features,{hasZ:r,hasM:n}=this.featureStore;for(const l of i){const e=f(this.tmpBoundingRect,l.geometry,r,n);o(e)||this.tileBounds.forEachInBounds(e,(e=>{const t=this.tiles.get(e);this.featureStore.add(l),t.objectIds.has(l.objectId)||(t.objectIds.add(l.objectId),this._referenceFeature(l.objectId),this.tileFeatureCounts.set(t.data.id,t.objectIds.size))}))}}process(e,t=(()=>!0)){if(o(this.tileInfo)||!e.extent||n(this.extent)&&!h(u(this.extent,this.tmpBoundingRect),e.extent))return new I(e);if(this.tiles.has(e.id))return new I(e);const s=this._createTileTree(e,this.tileInfo);return this._simplify(s,t,null,0,1),this._collectMissingTiles(e,s,this.tileInfo)}get debugInfo(){return Array.from(this.tiles.values()).map((({data:e})=>({data:e,featureCount:this.tileFeatureCounts.get(e.id)||0})))}getFeatureCount(e){return this.tileFeatureCounts.get(e.id)??0}async fetchCount(e,t,s,i){const r=this.tileFeatureCounts.get(e.id);if(null!=r)return r;const o=await g(t,s,i);return this.tileFeatureCounts.set(e.id,o.data.count),o.data.count}_createTileTree(e,t){const s=new T(e.level,e.row,e.col);return t.updateTileInfo(s,m.ExtrapolateOptions.POWER_OF_TWO),this.tileBounds.forEachInBounds(e.extent,(i=>{const r=this.tiles.get(i).data;this._tilesAreRelated(e,r)&&this._populateChildren(s,r,t,this.tileFeatureCounts.get(r.id)||0)})),s}_tilesAreRelated(e,t){if(!e||!t)return!1;if(e.level===t.level)return e.row===t.row&&e.col===t.col;const s=e.level<t.level,i=s?e:t,r=s?t:e,o=1<<r.level-i.level;return Math.floor(r.row/o)===i.row&&Math.floor(r.col/o)===i.col}_populateChildren(e,t,s,i){const r=t.level-e.level-1;if(r<0)return void(e.isLeaf=!0);const o=t.row>>r,l=t.col>>r,a=e.row<<1,c=l-(e.col<<1)+(o-a<<1),h=e.children[c];if(n(h))this._populateChildren(h,t,s,i);else{const r=new T(e.level+1,o,l);s.updateTileInfo(r,m.ExtrapolateOptions.POWER_OF_TWO),e.children[c]=r,this._populateChildren(r,t,s,i)}}_simplify(e,t,s,i,r){const o=r*r;if(e.isLeaf)return t(this.getFeatureCount(e),r)?0:(this._remove(e),n(s)&&(s.children[i]=null),o);const l=r/2,a=l*l;let c=0;for(let h=0;h<e.children.length;h++){const s=e.children[h];c+=n(s)?this._simplify(s,t,e,h,l):a}return 0===c?this._mergeChildren(e):1-c/o<F&&(this._purge(e),n(s)&&(s.children[i]=null),c=o),c}_mergeChildren(e){const t=new Set;let s=0;this._forEachLeaf(e,(e=>{const i=this.tiles.get(e.id);if(i){s+=i.byteSize;for(const e of i.objectIds)t.has(e)||(t.add(e),this._referenceFeature(e));this._remove(e)}})),this._addTileStorage(e,t,s),e.isLeaf=!0,e.children[0]=e.children[1]=e.children[2]=e.children[3]=null,this.tileFeatureCounts.set(e.id,t.size)}_forEachLeaf(e,t){for(const s of e.children)o(s)||(s.isLeaf?t(s):this._forEachLeaf(s,t))}_purge(e){if(!o(e))if(e.isLeaf)this._remove(e);else for(let t=0;t<e.children.length;t++){const s=e.children[t];this._purge(s),e.children[t]=null}}_collectMissingTiles(e,t,s){const i=new j(s,e,this.extent);return this._collectMissingTilesRecurse(t,i,1),i.info}_collectMissingTilesRecurse(e,t,s){if(e.isLeaf)return;if(!e.hasChildren)return void t.addMissing(e.level,e.row,e.col,s);const i=s/2;for(let r=0;r<e.children.length;r++){const s=e.children[r];o(s)?t.addMissing(e.level+1,(e.row<<1)+((2&r)>>1),(e.col<<1)+(1&r),i):this._collectMissingTilesRecurse(s,t,i)}}_referenceFeature(e){const t=(this.refCounts.get(e)||0)+1;return this.refCounts.set(e,t),1===t?w.ADDED:w.UNCHANGED}_unreferenceFeature(e){const t=(this.refCounts.get(e)||0)-1;return 0===t?(this.refCounts.delete(e),w.REMOVED):(t>0&&this.refCounts.set(e,t),w.UNCHANGED)}get test(){return{tiles:Array.from(this.tiles.values()).map((e=>`${e.data.id}:[${Array.from(e.objectIds)}]`)),featureReferences:Array.from(this.refCounts.keys()).map((e=>`${e}:${this.refCounts.get(e)}`))}}};function y(e){return e.reduce(((e,t)=>e+C(t)),0)}function C(e){return 32+E(e.geometry)+i(e.attributes)}function E(e){if(o(e))return 0;const t=r(e.lengths,4);return 32+r(e.coords,8)+t}e([l({constructOnly:!0})],v.prototype,\"featureStore\",void 0),e([l()],v.prototype,\"tileInfo\",void 0),e([l()],v.prototype,\"extent\",void 0),e([l()],v.prototype,\"maximumByteSize\",void 0),v=e([a(\"esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceTileStore\")],v);class S{constructor(e,t,s){this.data=e,this.objectIds=t,this.byteSize=s}}class T{constructor(e,t,s){this.level=e,this.row=t,this.col=s,this.isLeaf=!1,this.extent=null,this.children=[null,null,null,null]}get hasChildren(){return!this.isLeaf&&(n(this.children[0])||n(this.children[1])||n(this.children[2])||n(this.children[3]))}}class I{constructor(e,t=[]){this.missingTiles=t,this.fullArea=0,this.coveredArea=0,this.fullArea=d(e.extent),this.coveredArea=this.fullArea}prepend(e){this.missingTiles=e.missingTiles.concat(this.missingTiles),this.coveredArea+=e.coveredArea,this.fullArea+=e.fullArea}}class j{constructor(e,t,s){this.tileInfo=e,this.extent=null,this.info=new I(t),n(s)&&(this.extent=u(s))}addMissing(e,t,s,i){const r={id:null,level:e,row:t,col:s};this.tileInfo.updateTileInfo(r,m.ExtrapolateOptions.POWER_OF_TWO),o(r.extent)||n(this.extent)&&!h(this.extent,r.extent)||(this.info.missingTiles.push({data:r,resolution:i}),this.info.coveredArea-=d(r.extent))}}const F=.18751;var w;!function(e){e[e.ADDED=0]=\"ADDED\",e[e.REMOVED=1]=\"REMOVED\",e[e.UNCHANGED=2]=\"UNCHANGED\"}(w||(w={}));export{v as FeatureServiceTileStore,I as ProcessResult};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../chunks/tslib.es6.js\";import t from\"../../../../../core/Evented.js\";import i from\"../../../../../core/Handles.js\";import{isSome as r}from\"../../../../../core/maybe.js\";import{createDeferred as s,throwIfAborted as a}from\"../../../../../core/promiseUtils.js\";import{watch as n,whenOnce as o,sync as p}from\"../../../../../core/reactiveUtils.js\";import{property as u}from\"../../../../../core/accessorSupport/decorators/property.js\";import\"../../../../../core/arrayUtils.js\";import\"../../../../../core/has.js\";import\"../../../../../core/accessorSupport/ensureType.js\";import{subclass as l}from\"../../../../../core/accessorSupport/decorators/subclass.js\";import{WatchUpdatingTracking as c}from\"../../../../../core/support/WatchUpdatingTracking.js\";import d from\"../../../../../geometry/SpatialReference.js\";import h from\"../../../../../layers/graphics/data/FeatureStore.js\";import{QueryEngine as f}from\"../../../../../layers/graphics/data/QueryEngine.js\";import m from\"../../../../../layers/support/TileInfo.js\";import g from\"../../../../../layers/support/TimeInfo.js\";import y from\"../../../../../rest/support/Query.js\";import{FeatureServiceTiledFetcher as S}from\"./FeatureServiceTiledFetcher.js\";import{FeatureServiceTileStore as F}from\"./FeatureServiceTileStore.js\";let I=class extends t.EventedAccessor{constructor(){super(...arguments),this.isInitializing=!0,this.whenSetup=s(),this.handles=new i,this.updatingHandles=new c,this.pendingApplyEdits=new Map}get updating(){return this.featureFetcher.updating||this.isInitializing||this.updatingHandles.updating}destroy(){this.featureFetcher.destroy(),this.queryEngine.destroy(),this.featureStore.clear(),this.handles.destroy()}async setup(e){const{geometryType:t,objectIdField:i,timeInfo:r,fields:s}=e.serviceInfo;return this.featureStore=new h({...e.serviceInfo,hasZ:!1,hasM:!1}),this.queryEngine=new f({spatialReference:e.spatialReference,featureStore:this.featureStore,geometryType:t,fields:s,hasZ:!1,hasM:!1,objectIdField:i,timeInfo:r?g.fromJSON(r):null}),this.featureFetcher=new S({store:new F({featureStore:this.featureStore}),url:e.serviceInfo.url,objectIdField:e.serviceInfo.objectIdField,globalIdField:e.serviceInfo.globalIdField,capabilities:e.serviceInfo.capabilities,spatialReference:d.fromJSON(e.spatialReference),sourceSpatialReference:d.fromJSON(e.serviceInfo.spatialReference)}),this.handles.add([n((()=>this.featureFetcher.availability),(e=>this.emit(\"notify-availability\",{availability:e})),p),n((()=>this.updating),(()=>this._notifyUpdating()))]),this.whenSetup.resolve(),this.isInitializing=!1,this.configure(e.configuration)}async configure(e){return await this.updatingHandles.addPromise(this.whenSetup.promise),this._updateFeatureFetcherConfiguration(e),{result:{}}}async fetchCandidates(e,t){await this.whenSetup.promise,a(t);return{result:await this.queryEngine.executeQueryForSnapping({point:e.point,distance:e.distance,types:e.types,query:r(e.filter)?e.filter:{where:\"1=1\"}},r(t)?t.signal:null)}}async updateTiles(e,t){return await this.updatingHandles.addPromise(this.whenSetup.promise),a(t),this.featureFetcher.tileSize=e.tileSize,this.featureFetcher.tilesOfInterest=e.tiles,this.featureFetcher.tileInfo=r(e.tileInfo)?m.fromJSON(e.tileInfo):null,{result:{}}}async refresh(e,t){return await this.updatingHandles.addPromise(this.whenSetup.promise),a(t),this.featureFetcher.refresh(),{result:{}}}async whenNotUpdating(e,t){return await this.updatingHandles.addPromise(this.whenSetup.promise),a(t),await o((()=>!this.updating),t),a(t),{result:{}}}async getDebugInfo(e,t){return a(t),{result:this.featureFetcher.debugInfo}}async beginApplyEdits(e,t){this.updatingHandles.addPromise(this.whenSetup.promise),a(t);const i=s();return this.pendingApplyEdits.set(e.id,i),this.featureFetcher.applyEdits(i.promise),this.updatingHandles.addPromise(i.promise),{result:{}}}async endApplyEdits(e,t){const i=this.pendingApplyEdits.get(e.id);return i&&i.resolve(e.edits),a(t),{result:{}}}_updateFeatureFetcherConfiguration(e){this.featureFetcher.filter=r(e.filter)?y.fromJSON(e.filter):null,this.featureFetcher.customParameters=e.customParameters}_notifyUpdating(){this.emit(\"notify-updating\",{updating:this.updating})}};function w(){return new I}e([u({readOnly:!0})],I.prototype,\"updating\",null),e([u()],I.prototype,\"isInitializing\",void 0),I=e([l(\"esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceSnappingSourceWorker\")],I);export{I as FeatureServiceSnappingSourceWorker,w as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport e from\"../../../core/Error.js\";import t from\"../../../core/Evented.js\";import r from\"../../../core/Logger.js\";import{isSome as s,isNone as o}from\"../../../core/maybe.js\";import{fromRect as i}from\"../../../geometry/support/aaBoundingBox.js\";import{create as d}from\"../../../geometry/support/aaBoundingRect.js\";import{getBoundsOptimizedGeometry as a}from\"../featureConversionUtils.js\";import{BoundsStore as n}from\"./BoundsStore.js\";import{optimizedFeatureQueryEngineAdapter as h}from\"./optimizedFeatureQueryEngineAdapter.js\";class u{constructor(e){this.geometryInfo=e,this._boundsStore=new n,this._featuresById=new Map,this._markedIds=new Set,this.events=new t,this.featureAdapter=h}get geometryType(){return this.geometryInfo.geometryType}get hasM(){return this.geometryInfo.hasM}get hasZ(){return this.geometryInfo.hasZ}get numFeatures(){return this._featuresById.size}get fullBounds(){return this._boundsStore.fullBounds}get storeStatistics(){let e=0;return this._featuresById.forEach((t=>{s(t.geometry)&&t.geometry.coords&&(e+=t.geometry.coords.length)})),{featureCount:this._featuresById.size,vertexCount:e/(this.hasZ?this.hasM?4:3:this.hasM?3:2)}}add(e){this._add(e),this._emitChanged()}addMany(e){for(const t of e)this._add(t);this._emitChanged()}clear(){this._featuresById.clear(),this._boundsStore.clear(),this._emitChanged()}removeById(e){const t=this._featuresById.get(e);return t?(this._remove(t),this._emitChanged(),t):null}removeManyById(e){this._boundsStore.invalidateIndex();for(const t of e){const e=this._featuresById.get(t);e&&this._remove(e)}this._emitChanged()}forEachBounds(e,t,r){for(const s of e){const e=this._boundsStore.get(s.objectId);e&&t(i(r,e))}}getFeature(e){return this._featuresById.get(e)}has(e){return this._featuresById.has(e)}toArray(){return Array.from(this._featuresById.values())}forEach(e){this._featuresById.forEach((t=>e(t)))}forEachInBounds(e,t){this._boundsStore.forEachInBounds(e,(e=>{t(this._featuresById.get(e))}))}startMarkingUsedFeatures(){this._boundsStore.invalidateIndex(),this._markedIds.clear()}sweep(){let e=!1;this._featuresById.forEach(((t,r)=>{this._markedIds.has(r)||(e=!0,this._remove(t))})),this._markedIds.clear(),e&&this._emitChanged()}_emitChanged(){this.events.emit(\"changed\",void 0)}_add(t){if(!t)return;const i=t.objectId;if(null==i)return void r.getLogger(\"esri.layers.graphics.data.FeatureStore\").error(new e(\"featurestore:invalid-feature\",\"feature id is missing\",{feature:t}));const n=this._featuresById.get(i);let h;if(this._markedIds.add(i),n?(t.displayId=n.displayId,h=this._boundsStore.get(i),this._boundsStore.delete(i)):s(this.onFeatureAdd)&&this.onFeatureAdd(t),o(t.geometry)||!t.geometry.coords||!t.geometry.coords.length)return this._boundsStore.set(i,null),void this._featuresById.set(i,t);h=a(s(h)?h:d(),t.geometry,this.geometryInfo.hasZ,this.geometryInfo.hasM),s(h)&&this._boundsStore.set(i,h),this._featuresById.set(i,t)}_remove(e){return s(this.onFeatureRemove)&&this.onFeatureRemove(e),this._markedIds.delete(e.objectId),this._boundsStore.delete(e.objectId),this._featuresById.delete(e.objectId),e}}export{u as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{indexOf as t,PositionHint as i}from\"../../arrayUtils.js\";import{assumeNonNull as n}from\"../../maybe.js\";import e from\"../../PooledArray.js\";import{q as s}from\"../../../chunks/quickselect.js\";class h{constructor(t=9,i){this.compareMinX=l,this.compareMinY=c,this._toBBox=t=>t,this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),i&&(\"function\"==typeof i?this._toBBox=i:this._initFormat(i)),this.clear()}destroy(){this.clear(),g.prune(),M.prune(),X.prune(),Y.prune()}all(t){this._all(this.data,t)}search(t,i){let n=this.data;const e=this._toBBox;if(p(t,n))for(g.clear();n;){for(let s=0,h=n.children.length;s<h;s++){const h=n.children[s],a=n.leaf?e(h):h;p(t,a)&&(n.leaf?i(h):f(t,a)?this._all(h,i):g.push(h))}n=g.pop()}}collides(t){let i=this.data;const n=this._toBBox;if(!p(t,i))return!1;for(g.clear();i;){for(let e=0,s=i.children.length;e<s;e++){const s=i.children[e],h=i.leaf?n(s):s;if(p(t,h)){if(i.leaf||f(t,h))return!0;g.push(s)}}i=g.pop()}return!1}load(t){if(!t.length)return this;if(t.length<this._minEntries){for(let i=0,n=t.length;i<n;i++)this.insert(t[i]);return this}let i=this._build(t.slice(0,t.length),0,t.length-1,0);if(this.data.children.length)if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){const t=this.data;this.data=i,i=t}this._insert(i,this.data.height-i.height-1,!0)}else this.data=i;return this}insert(t){return t&&this._insert(t,this.data.height-1),this}clear(){return this.data=new b([]),this}remove(i){if(!i)return this;let e,s=this.data,h=null,a=0,r=!1;const o=this._toBBox(i);for(X.clear(),Y.clear();s||X.length>0;){if(s||(s=n(X.pop()),h=X.data[X.length-1],a=Y.pop()??0,r=!0),s.leaf&&(e=t(s.children,i,s.children.length,s.indexHint),-1!==e))return s.children.splice(e,1),X.push(s),this._condense(X),this;r||s.leaf||!f(s,o)?h?(a++,s=h.children[a],r=!1):s=null:(X.push(s),Y.push(a),a=0,h=s,s=s.children[0])}return this}toJSON(){return this.data}fromJSON(t){return this.data=t,this}_all(t,i){let n=t;for(M.clear();n;){if(!0===n.leaf)for(const t of n.children)i(t);else M.pushArray(n.children);n=M.pop()??null}}_build(t,i,n,e){const s=n-i+1;let h=this._maxEntries;if(s<=h){const e=new b(t.slice(i,n+1));return a(e,this._toBBox),e}e||(e=Math.ceil(Math.log(s)/Math.log(h)),h=Math.ceil(s/h**(e-1)));const r=new j([]);r.height=e;const o=Math.ceil(s/h),l=o*Math.ceil(Math.sqrt(h));_(t,i,n,l,this.compareMinX);for(let a=i;a<=n;a+=l){const i=Math.min(a+l-1,n);_(t,a,i,o,this.compareMinY);for(let n=a;n<=i;n+=o){const s=Math.min(n+o-1,i);r.children.push(this._build(t,n,s,e-1))}}return a(r,this._toBBox),r}_chooseSubtree(t,i,n,e){for(;e.push(i),!0!==i.leaf&&e.length-1!==n;){let n,e=1/0,s=1/0;for(let h=0,a=i.children.length;h<a;h++){const a=i.children[h],r=m(a),o=u(t,a)-r;o<s?(s=o,e=r<e?r:e,n=a):o===s&&r<e&&(e=r,n=a)}i=n||i.children[0]}return i}_insert(t,i,n){const e=this._toBBox,s=n?t:e(t);X.clear();const h=this._chooseSubtree(s,this.data,i,X);for(h.children.push(t),o(h,s);i>=0&&X.data[i].children.length>this._maxEntries;)this._split(X,i),i--;this._adjustParentBBoxes(s,X,i)}_split(t,i){const n=t.data[i],e=n.children.length,s=this._minEntries;this._chooseSplitAxis(n,s,e);const h=this._chooseSplitIndex(n,s,e);if(!h)return void console.log(\"  Error: assertion failed at PooledRBush._split: no valid split index\");const r=n.children.splice(h,n.children.length-h),o=n.leaf?new b(r):new j(r);o.height=n.height,a(n,this._toBBox),a(o,this._toBBox),i?t.data[i-1].children.push(o):this._splitRoot(n,o)}_splitRoot(t,i){this.data=new j([t,i]),this.data.height=t.height+1,a(this.data,this._toBBox)}_chooseSplitIndex(t,i,n){let e,s,h;e=s=1/0;for(let a=i;a<=n-i;a++){const i=r(t,0,a,this._toBBox),o=r(t,a,n,this._toBBox),l=x(i,o),c=m(i)+m(o);l<e?(e=l,h=a,s=c<s?c:s):l===e&&c<s&&(s=c,h=a)}return h}_chooseSplitAxis(t,i,n){const e=t.leaf?this.compareMinX:l,s=t.leaf?this.compareMinY:c;this._allDistMargin(t,i,n,e)<this._allDistMargin(t,i,n,s)&&t.children.sort(e)}_allDistMargin(t,i,n,e){t.children.sort(e);const s=this._toBBox,h=r(t,0,i,s),a=r(t,n-i,n,s);let l=d(h)+d(a);for(let r=i;r<n-i;r++){const i=t.children[r];o(h,t.leaf?s(i):i),l+=d(h)}for(let r=n-i-1;r>=i;r--){const i=t.children[r];o(a,t.leaf?s(i):i),l+=d(a)}return l}_adjustParentBBoxes(t,i,n){for(let e=n;e>=0;e--)o(i.data[e],t)}_condense(i){for(let n=i.length-1;n>=0;n--){const e=i.data[n];if(0===e.children.length)if(n>0){const s=i.data[n-1],h=s.children;h.splice(t(h,e,h.length,s.indexHint),1)}else this.clear();else a(e,this._toBBox)}}_initFormat(t){const i=[\"return a\",\" - b\",\";\"];this.compareMinX=new Function(\"a\",\"b\",i.join(t[0])),this.compareMinY=new Function(\"a\",\"b\",i.join(t[1])),this._toBBox=new Function(\"a\",\"return {minX: a\"+t[0]+\", minY: a\"+t[1]+\", maxX: a\"+t[2]+\", maxY: a\"+t[3]+\"};\")}}function a(t,i){r(t,0,t.children.length,i,t)}function r(t,i,n,e,s){s||(s=new b([])),s.minX=1/0,s.minY=1/0,s.maxX=-1/0,s.maxY=-1/0;for(let h,a=i;a<n;a++)h=t.children[a],o(s,t.leaf?e(h):h);return s}function o(t,i){t.minX=Math.min(t.minX,i.minX),t.minY=Math.min(t.minY,i.minY),t.maxX=Math.max(t.maxX,i.maxX),t.maxY=Math.max(t.maxY,i.maxY)}function l(t,i){return t.minX-i.minX}function c(t,i){return t.minY-i.minY}function m(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function d(t){return t.maxX-t.minX+(t.maxY-t.minY)}function u(t,i){return(Math.max(i.maxX,t.maxX)-Math.min(i.minX,t.minX))*(Math.max(i.maxY,t.maxY)-Math.min(i.minY,t.minY))}function x(t,i){const n=Math.max(t.minX,i.minX),e=Math.max(t.minY,i.minY),s=Math.min(t.maxX,i.maxX),h=Math.min(t.maxY,i.maxY);return Math.max(0,s-n)*Math.max(0,h-e)}function f(t,i){return t.minX<=i.minX&&t.minY<=i.minY&&i.maxX<=t.maxX&&i.maxY<=t.maxY}function p(t,i){return i.minX<=t.maxX&&i.minY<=t.maxY&&i.maxX>=t.minX&&i.maxY>=t.minY}function _(t,i,e,h,a){const r=[i,e];for(;r.length;){const i=n(r.pop()),e=n(r.pop());if(i-e<=h)continue;const o=e+Math.ceil((i-e)/h/2)*h;s(t,o,e,i,a),r.push(e,o,o,i)}}const g=new e,M=new e,X=new e,Y=new e({deallocator:void 0});class B{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}}class w extends B{constructor(){super(...arguments),this.height=1,this.indexHint=new i}}class b extends w{constructor(t){super(),this.children=t,this.leaf=!0}}class j extends w{constructor(t){super(),this.children=t,this.leaf=!1}}export{B as BBox,h as PooledRBush};\n"],"sourceRoot":""}