(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-db1c94d6"],{"1c4d":function(e,t,i){"use strict";i.d(t,"a",(function(){return J}));var s,o=i("a4ee"),n=i("fc29"),r=(i("c120"),i("59b2")),a=(i("b50f"),i("cea0"),i("d386")),d=(i("e06a"),i("b2b2")),h=(i("e92d"),i("2dd4"),i("ce6d")),c=i("af40"),l=i("7ffa"),p=i("f4cc"),u=i("a915"),v=i("ce0b"),_=i("1a54"),b=i("3c9c"),m=i("1381"),O=i("8b1a"),y=i("6ae9"),w=i("2c8f"),g=i("1f1c"),j=i("94a9");let f=s=class extends h["a"].EventedAccessor{constructor(e){var t;super(e),this._hasZ=null,this._cursorScreenPoint=null,this._activePointerId=null,this._stagedVertexUnsnapped=null,this._lastVertexUnsnapped=null,this._handles=new c["a"],this._viewHandlesKey="view-handles",this._undoRedoHandlesKey="undo-redo-handles",this._drawToolHandlesKey="draw-tool",this._nativeEventHistory={undoStack:[],redoStack:[]},this.interactiveUndoDisabled=!1,this.history=[],this.redoHistory=[],this.snapToScene=!1,this.view=null,this.elevationInfo=null,this.defaultZ=0,this._coordinateHelper=Object(O["a"])(e.hasZ,!1,e.view.spatialReference),this._snappingManager=e.snappingManager,this._editGeometryOperations=new w["a"](new y["c"](null!=(t=e.editGeometryType)?t:"polygon",this._coordinateHelper)),this._snappingGraphicsLayer=new v["a"]({id:s.SNAPPING_GRAPHICS_LAYER_ID,listMode:"hide",internal:!0}),this._snappingContext=new g["a"]({editGeometryOperations:this._editGeometryOperations,elevationInfo:{mode:"on-the-ground",offset:0},pointer:"mouse",visualizer:new m["a"](this._snappingGraphicsLayer)}),this._activeComponent=new y["a"](e.view.spatialReference,b["a"].Local),this._editGeometryOperations.data.components.push(this._activeComponent)}normalizeCtorArgs(e){const t={...e};return delete t.editGeometryType,t}initialize(){this._snappingOperation=new j["a"]({view:this.view}),"2d"===this.view.type&&this.view.map.layers.add(this._snappingGraphicsLayer)}destroy(){this._handles.destroy(),this.view.map.layers.remove(this._snappingGraphicsLayer),this._snappingGraphicsLayer.destroy(),Object(d["k"])(this._snappingManager)&&this._snappingManager.doneSnapping(),this._snappingOperation=Object(d["d"])(this._snappingOperation),this._editGeometryOperations.destroy()}get _committedVertices(){return this._editGeometryOperations.data.components[0].vertices.map(e=>e.pos)}get vertices(){return Object(d["k"])(this._stagedVertex)?[...this._committedVertices,this._coordinateHelper.pointToArray(this._stagedVertex)]:this._committedVertices}get hasZ(){return Object(d["k"])(this._hasZ)?this._hasZ:"3d"===this.view.type}set hasZ(e){this._hasZ=e,this.notifyChange("hasZ")}get _stagedVertex(){return this._snappingOperation.stagedPoint}set _stagedVertex(e){this._snappingOperation.stagedPoint=Object(l["a"])(e)}canUndo(){return this._editGeometryOperations.canUndo}canRedo(){return this._editGeometryOperations.canRedo}undo(){this.canUndo&&this._editGeometryOperations.undo()}redo(){this.canRedo&&this._editGeometryOperations.redo()}getCoordsFromScreenPoint(e){const t=this.screenToMap(e);return Object(d["j"])(t)?null:t.hasZ?[t.x,t.y,t.z]:[t.x,t.y]}getCoordsAndPointFromScreenPoint(e){const t=this.screenToMap(e);return Object(d["j"])(t)?null:t.hasZ?{vertex:[t.x,t.y,t.z],mapPoint:t}:{vertex:[t.x,t.y],mapPoint:t}}screenToMap(e){let t=null;if("3d"===this.view.type)if(this.hasZ){const i=Object(d["s"])(this.elevationInfo,x);t=this.view.sceneIntersectionHelper.intersectElevationFromScreen(Object(u["f"])(e.x,e.y),i,this._getGeometryZValue())}else{const i=Object(d["s"])(this.elevationInfo,T);t=this.view.sceneIntersectionHelper.intersectElevationFromScreen(Object(u["f"])(e.x,e.y),i,0),Object(d["k"])(t)&&(t.z=void 0)}else t=this.view.toMap(e),Object(d["k"])(t)&&(t.z=this.hasZ?this._getGeometryZValue():void 0);return t}_pushCursorVertex(e,t){const i=Object(_["g"])(e[0],e[1],null,this.view.spatialReference);this._stagedVertexUnsnapped=i;const s=this._snappingManager;if(Object(d["j"])(s))return this._stagedVertex=i,void t();Object(p["i"])(this._snappingOperation.snap(i,s,this._snappingContext)).then(()=>{t()})}_popCursorVertex(){this._stagedVertexUnsnapped=null,this._stagedVertex=null}_getGeometryZValue(){return this.defaultZ}_abortSnapping(){this._snappingOperation.abort()}_isDuplicateOfLastVertex(e){const t=this._editGeometryOperations.data.components[0].getLastVertex();if(Object(d["k"])(t)&&e[0]===t[0]&&e[1]===t[1])return!0;const{x:i,y:s}=this._coordinateHelper.vectorToDehydratedPoint(e);return!(!Object(d["k"])(this._lastVertexUnsnapped)||i!==this._lastVertexUnsnapped.x||s!==this._lastVertexUnsnapped.y)}_shouldHandlePointerEvent(e){return this._isPrimaryPointerAction(e)&&(Object(d["j"])(this._activePointerId)||this._activePointerId===e.pointerId)}_vertexAddHandler(e){const t=Object(d["k"])(this._stagedVertex)?this._coordinateHelper.pointToArray(this._stagedVertex):this.getCoordsFromScreenPoint(this._cursorScreenPoint);Object(d["k"])(t)&&this._addVertex(t,e.native)}_drawCompleteHandler(e){this._completeDrawing(e.native)}_isPrimaryPointerAction(e){return"mouse"!==e.pointerType||0===e.button}};f.SNAPPING_GRAPHICS_LAYER_ID="DrawAction-snapping-graphics-layer",Object(o["a"])([Object(r["b"])({readOnly:!0})],f.prototype,"vertices",null),Object(o["a"])([Object(r["b"])({type:Boolean,nonNullable:!0})],f.prototype,"interactiveUndoDisabled",void 0),Object(o["a"])([Object(r["b"])({readOnly:!0})],f.prototype,"history",void 0),Object(o["a"])([Object(r["b"])({readOnly:!0})],f.prototype,"redoHistory",void 0),Object(o["a"])([Object(r["b"])()],f.prototype,"snapToScene",void 0),Object(o["a"])([Object(r["b"])()],f.prototype,"view",void 0),Object(o["a"])([Object(r["b"])()],f.prototype,"elevationInfo",void 0),Object(o["a"])([Object(r["b"])({nonNullable:!0})],f.prototype,"defaultZ",void 0),Object(o["a"])([Object(r["b"])()],f.prototype,"hasZ",null),Object(o["a"])([Object(r["b"])()],f.prototype,"_snappingOperation",void 0),Object(o["a"])([Object(r["b"])()],f.prototype,"_stagedVertex",null),f=s=Object(o["a"])([Object(a["a"])("esri.views.draw.DrawAction")],f);const x={mode:"absolute-height",offset:0},T={mode:"on-the-ground",offset:0},P=f;class S{constructor(e,t,i,s){this.view=e,this.native=t,this.vertexIndex=i,this.vertices=s,this.defaultPrevented=!1,this.type="vertex-add"}preventDefault(){this.defaultPrevented=!0}}class V{constructor(e,t,i,s){this.view=e,this.native=t,this.vertexIndex=i,this.vertices=s,this.defaultPrevented=!1,this.type="vertex-remove"}preventDefault(){this.defaultPrevented=!0}}class H{constructor(e,t,i,s,o=null){this.view=e,this.native=t,this.vertexIndex=i,this.vertices=s,this.mapPoint=o,this.coordinates=null,this.defaultPrevented=!1,this.type="cursor-update",this.coordinates=1===s.length?s[0]:null}preventDefault(){this.defaultPrevented=!0}}class C{constructor(e,t){this.native=e,this.vertices=t,this.coordinates=null,this.defaultPrevented=!1,this.type="draw-complete",this.coordinates=1===t.length?t[0]:null}preventDefault(){this.defaultPrevented=!0}}var k=i("2589"),D=i("7d9d"),L=i("412f"),A=i("4ae5");let I=class extends P{constructor(e){super(e),this._popVertexOnPointerMove=!1,this._addVertexOnPointerUp=!1}initialize(){this._addViewHandles(),this._addUndoRedoHandles()}destroy(){this._removeViewHandles(),this._removeUndoRedoHandles(),this.emit("destroy")}undo(){super.undo(),this.notifyChange("vertices")}redo(){super.redo(),this.notifyChange("vertices")}complete(){this._completeDrawing()}_addViewHandles(){this._removeViewHandles(),this._handles.add([this.view.on("click",e=>{e.stopPropagation()},k["b"].TOOL),this.view.on("pointer-down",e=>{this._shouldHandlePointerEvent(e)&&(this._abortSnapping(),this._activePointerId=e.pointerId,this._addVertexOnPointerUp=!0,this._cursorScreenPoint=Object(L["a"])(e),"touch"===e.pointerType&&this._updateCursor(e.native))},k["b"].TOOL),this.view.on("pointer-move",e=>{this._popVertexOnPointerMove&&(this.undo(),this._popVertexOnPointerMove=!1),this._abortSnapping(),this._cursorScreenPoint=Object(L["a"])(e),"touch"!==e.pointerType&&this._updateCursor(e.native)},k["b"].TOOL),this.view.on("pointer-drag",e=>{this._shouldHandlePointerEvent(e)&&(this._abortSnapping(),this._addVertexOnPointerUp=!1)},k["b"].TOOL),this.view.on("pointer-up",e=>{if(this._shouldHandlePointerEvent(e))if(this._abortSnapping(),this._activePointerId=null,this._addVertexOnPointerUp)this._vertexAddHandler(e);else{const t="touch"===e.pointerType;this._updateCursor(e.native,t)}},k["b"].TOOL),this.view.on("drag",["Shift"],e=>{e.stopPropagation()},k["b"].TOOL),this.view.on("double-click",e=>{e.stopPropagation(),this._drawCompleteHandler(e)},k["b"].TOOL),this.view.on("double-click",["Control"],e=>{e.stopPropagation(),this._drawCompleteHandler(e)},k["b"].TOOL),this.view.on("key-down",e=>{const{key:t,repeat:i}=e;t===D["a"].vertexAdd&&!i&&this._cursorScreenPoint?(e.stopPropagation(),this._abortSnapping(),this._vertexAddHandler(e)):t!==D["a"].complete||i?t!==D["a"].undo||this.interactiveUndoDisabled||i?t!==D["a"].redo||this.interactiveUndoDisabled||i?t!==D["a"].pan||i||e.stopPropagation():(e.stopPropagation(),this.redo()):(e.stopPropagation(),this.undo()):(e.stopPropagation(),this._drawCompleteHandler(e))},k["b"].TOOL),this.view.on("key-up",e=>{e.key===D["a"].pan&&e.stopPropagation()},k["b"].TOOL)],this._viewHandlesKey)}_addUndoRedoHandles(){this._removeUndoRedoHandles(),this._handles.add([this._editGeometryOperations.on("vertex-remove",e=>{if(this.notifyChange("vertices"),"undo"===e.operation){const t=this._nativeEventHistory.undoStack.pop();this._nativeEventHistory.redoStack.push(t);const i=[...this._committedVertices];Object(d["k"])(this._stagedVertex)&&i.push(this._coordinateHelper.pointToArray(this._stagedVertex)),this.emit("undo",new V(this.view,t,e.vertices[0].index,i))}}),this._editGeometryOperations.on("vertex-add",e=>{if(this.notifyChange("vertices"),"apply"===e.operation){const e=this._nativeEventHistory.undoStack[this._nativeEventHistory.undoStack.length],t=this._committedVertices.length-1,i=new S(this.view,e,t,this.vertices);this.emit("vertex-add",i),i.defaultPrevented&&(this._popVertexOnPointerMove=!0)}else if("redo"===e.operation){const t=this._nativeEventHistory.redoStack.pop();this._nativeEventHistory.undoStack.push(t);const i=[...this._committedVertices];Object(d["k"])(this._stagedVertex)&&i.push(this._coordinateHelper.pointToArray(this._stagedVertex)),this.emit("redo",new S(this.view,t,e.vertices[0].index,i))}})],this._undoRedoHandlesKey)}_removeViewHandles(){this._handles.remove(this._viewHandlesKey)}_removeUndoRedoHandles(){this._handles.remove(this._undoRedoHandlesKey)}_addVertex(e,t){const i=this._coordinateHelper.arrayToVector(e);if(this._isDuplicateOfLastVertex(i))return;this._lastVertexUnsnapped=this._stagedVertexUnsnapped,this._popCursorVertex(),this._editGeometryOperations.appendVertex(i);const s=t||new Event("placeholder");this._nativeEventHistory.undoStack.push(s)}_updateCursor(e,t=!1){if(this._popCursorVertex(),!this._cursorScreenPoint)return;const i=this.getCoordsAndPointFromScreenPoint(this._cursorScreenPoint);Object(d["k"])(i)&&!t&&this._pushCursorVertex(i.vertex,()=>this.emit("cursor-update",new H(this.view,e,this._activeComponent.vertices.length,this.vertices,Object(d["k"])(this._stagedVertex)?new A["a"](this._stagedVertex):null)))}_completeDrawing(e){if(this._activePointerId=null,this._popCursorVertex(),this._abortSnapping(),Object(d["k"])(this._snappingManager)&&this._snappingManager.doneSnapping(),this.vertices.length<1)return;const t=new C(e,this.vertices);this.emit("draw-complete",t),t.defaultPrevented||this._removeViewHandles()}};I=Object(o["a"])([Object(a["a"])("esri.views.draw.MultipointDrawAction")],I);Object.freeze(Object.defineProperty({__proto__:null,get MultipointDrawAction(){return I}},Symbol.toStringTag,{value:"Module"}));var E=i("9096"),M=i("e7e3"),U=i("5bab"),G=i("4772");let R=class extends(Object(E["b"])(h["a"].EventedMixin(G["a"]))){constructor(e){super(e),this.defaultZ=0,this.elevationInfo=null,this.hasZ=!0,this.mode=null,this.snapToScene=null,this.type="draw-3d"}initialize(){const e=Object(d["s"])(this.elevationInfo,{mode:this.hasZ?"absolute-height":"on-the-ground",offset:0}),t=this.view;this.drawOperation=new M["a"]({view:t,manipulators:this.manipulators,geometryType:this.geometryType,drawingMode:this.mode,hasZ:this.hasZ,defaultZ:this.defaultZ,snapToSceneEnabled:this.snapToScene,drawSurface:"3d"===t.type?new U["c"](t,e):null,elevationDrawSurface:"3d"===t.type?new U["a"](e,this.defaultZ,t):null,hasM:!1,elevationInfo:e}),this.handles.add([this.drawOperation.on("vertex-add",e=>this.onVertexAdd(e)),this.drawOperation.on("vertex-remove",e=>this.onVertexRemove(e)),this.drawOperation.on("vertex-update",e=>this.onVertexUpdate(e)),this.drawOperation.on("cursor-update",e=>this.onCursorUpdate(e)),this.drawOperation.on("complete",e=>this.onComplete(e))]),this.finishToolCreation()}destroy(){this.drawOperation=Object(d["d"])(this.drawOperation),this._set("view",null)}get canRedo(){return this.drawOperation.canRedo}get canUndo(){return this.drawOperation.canUndo}set enabled(e){this.drawOperation.interactive=e,this._set("enabled",e)}get updating(){var e,t;return null!=(e=null==(t=this.drawOperation)?void 0:t.updating)&&e}completeCreateOperation(){this.drawOperation.complete()}onDeactivate(){this.drawOperation.isCompleted||this.drawOperation.cancel()}getVertexCoords(){return this.drawOperation.vertices}onInputEvent(e){this.drawOperation.onInputEvent(e)}redo(){this.drawOperation.redo()}reset(){}undo(){this.drawOperation.undo()}onComplete(e){this.emit("complete",e)}onCursorUpdate(e){this.emit("cursor-update",e)}onVertexAdd(e){this.emit("vertex-add",e)}onVertexRemove(e){this.emit("vertex-remove",e)}onVertexUpdate(e){this.emit("vertex-update",e)}};Object(o["a"])([Object(r["b"])({constructOnly:!0,nonNullable:!0})],R.prototype,"defaultZ",void 0),Object(o["a"])([Object(r["b"])()],R.prototype,"drawOperation",void 0),Object(o["a"])([Object(r["b"])({constructOnly:!0})],R.prototype,"elevationInfo",void 0),Object(o["a"])([Object(r["b"])({value:!0})],R.prototype,"enabled",null),Object(o["a"])([Object(r["b"])({constructOnly:!0})],R.prototype,"geometryType",void 0),Object(o["a"])([Object(r["b"])({constructOnly:!0})],R.prototype,"hasZ",void 0),Object(o["a"])([Object(r["b"])({constructOnly:!0})],R.prototype,"mode",void 0),Object(o["a"])([Object(r["b"])()],R.prototype,"snapToScene",void 0),Object(o["a"])([Object(r["b"])({readOnly:!0})],R.prototype,"type",void 0),Object(o["a"])([Object(r["b"])({readOnly:!0})],R.prototype,"updating",null),Object(o["a"])([Object(r["b"])({constructOnly:!0,nonNullable:!0})],R.prototype,"view",void 0),R=Object(o["a"])([Object(a["a"])("esri.views.draw.DrawTool")],R);let Z=class extends P{constructor(e){super(e),this._addVertexOnPointerUp=!1}initialize(){"2d"===this.view.type?this._addViewHandles():this._addDrawTool()}destroy(){"2d"===this.view.type?this._removeViewHandles():this._removeDrawTool(),this.emit("destroy")}complete(){"2d"===this.view.type?this._cursorScreenPoint&&this._completeDrawing():this._drawTool.completeCreateOperation()}_addViewHandles(){this._removeViewHandles(),this._handles.add([this.view.on("pointer-down",e=>{this._shouldHandlePointerEvent(e)&&(this._abortSnapping(),this._activePointerId=e.pointerId,this._addVertexOnPointerUp=!0,this._cursorScreenPoint=Object(L["a"])(e),"touch"===e.pointerType&&this._updateCursor(e.native))},k["b"].TOOL),this.view.on("pointer-move",e=>{this._abortSnapping(),this._cursorScreenPoint=Object(L["a"])(e),"touch"!==e.pointerType&&this._updateCursor(e.native)},k["b"].TOOL),this.view.on("pointer-drag",e=>{this._shouldHandlePointerEvent(e)&&(this._abortSnapping(),this._addVertexOnPointerUp=!1)},k["b"].TOOL),this.view.on("pointer-up",e=>{if(this._shouldHandlePointerEvent(e))if(this._abortSnapping(),this._activePointerId=null,this._addVertexOnPointerUp)e.stopPropagation(),this._vertexAddHandler(e);else{const t="touch"===e.pointerType;this._updateCursor(e.native,t)}},k["b"].TOOL),this.view.on("drag",["Shift"],e=>{e.stopPropagation()},k["b"].TOOL),this.view.on("key-down",e=>{e.key===D["a"].complete&&this._cursorScreenPoint&&(this._abortSnapping(),this._vertexAddHandler(e))},k["b"].TOOL)],this._viewHandlesKey)}_removeViewHandles(){this._handles.remove(this._viewHandlesKey)}_addDrawTool(){this._drawTool=new R({view:this.view,elevationInfo:this.elevationInfo,hasZ:this.hasZ,geometryType:"point",mode:"click"}),this.view.addAndActivateTool(this._drawTool),this._handles.add([this._drawTool.on("cursor-update",e=>{1===e.vertices.length&&this.emit("cursor-update",new H(this.view,null,e.vertices[0].vertexIndex,this._drawTool.getVertexCoords()))}),this._drawTool.on("complete",e=>{this.emit("draw-complete",new C(null,this._drawTool.getVertexCoords())),this._removeDrawTool()})],this._drawToolHandlesKey)}_removeDrawTool(){this._handles.remove(this._drawToolHandlesKey),this.view.tools.remove(this._drawTool),this._drawTool=Object(d["d"])(this._drawTool)}_addVertex(e){const t=this._coordinateHelper.arrayToVector(e);this._isDuplicateOfLastVertex(t)||(this._lastVertexUnsnapped=this._stagedVertexUnsnapped,this._popCursorVertex(),this._editGeometryOperations.appendVertex(t),this.notifyChange("vertices"),this._completeDrawing())}_updateCursor(e,t=!1){if(this._popCursorVertex(),!this._cursorScreenPoint)return;const i=this.getCoordsAndPointFromScreenPoint(this._cursorScreenPoint);Object(d["k"])(i)&&!t&&this._pushCursorVertex(i.vertex,()=>this.emit("cursor-update",new H(this.view,e,this._activeComponent.vertices.length,this.vertices,Object(d["k"])(this._stagedVertex)?new A["a"](this._stagedVertex):null)))}_completeDrawing(e){this._activePointerId=null,this._popCursorVertex(),this._abortSnapping(),Object(d["k"])(this._snappingManager)&&this._snappingManager.doneSnapping();const t=new C(e,this.vertices);this.emit("draw-complete",t),t.defaultPrevented||this._removeViewHandles()}};Z=Object(o["a"])([Object(a["a"])("esri.views.draw.PointDrawAction")],Z);var z=i("4aea");let K=class extends P{constructor(e){super(e),this._panEnabled=!1,this._popVertexOnPointerMove=!1,this._addVertexOnPointerUp=!1,this.mode=z["a"]}initialize(){"2d"===this.view.type?(this._addViewHandles(),this._addUndoRedoHandles()):this._addDrawTool()}destroy(){"2d"===this.view.type?(this._removeViewHandles(),this._removeUndoRedoHandles()):this._removeDrawTool(),this.emit("destroy")}get _dragEnabled(){return"freehand"===this.mode||"hybrid"===this.mode}get _clickEnabled(){return"click"===this.mode||"hybrid"===this.mode}undo(){super.undo(),this.notifyChange("vertices")}redo(){super.redo(),this.notifyChange("vertices")}complete(){"2d"===this.view.type?this._completeDrawing():this._drawTool.completeCreateOperation()}_getGeometryZValue(){return this.hasZ&&this.vertices.length>0?this.vertices[0][2]:this.defaultZ}_addViewHandles(){this._removeViewHandles(),this._handles.add([this.view.on("click",e=>{e.stopPropagation()},k["b"].TOOL),this.view.on("pointer-down",e=>{this._shouldHandlePointerEvent(e)&&(this._abortSnapping(),this._activePointerId=e.pointerId,this._addVertexOnPointerUp=!0,this._cursorScreenPoint=Object(L["a"])(e),"touch"===e.pointerType&&this._updateCursor(e.native))},k["b"].TOOL),this.view.on("pointer-move",e=>{this._abortSnapping(),this._popVertexOnPointerMove&&(this.undo(),this._popVertexOnPointerMove=!1),this._cursorScreenPoint=Object(L["a"])(e),"touch"!==e.pointerType&&this._updateCursor(e.native)},k["b"].TOOL),this.view.on("pointer-drag",e=>{this._shouldHandlePointerEvent(e)&&(this._abortSnapping(),this._cursorScreenPoint=Object(L["a"])(e),this._dragEnabled&&!this._panEnabled?this._vertexAddHandler(e):this._addVertexOnPointerUp=!1)},k["b"].TOOL),this.view.on("pointer-up",e=>{if(this._shouldHandlePointerEvent(e))if(this._abortSnapping(),this._activePointerId=null,this._addVertexOnPointerUp){if(!this._clickEnabled)return 1===this.vertices.length&&this.vertices.pop(),void this._drawCompleteHandler(e);this._vertexAddHandler(e)}else{const t="touch"===e.pointerType;this._updateCursor(e.native,t)}},k["b"].TOOL),this.view.on("drag",e=>{this._dragEnabled&&Object(d["k"])(this._activePointerId)&&!this._panEnabled&&e.stopPropagation()},k["b"].TOOL),this.view.on("drag",["Shift"],e=>{e.stopPropagation()},k["b"].TOOL),this.view.on("double-click",e=>{e.stopPropagation(),this._drawCompleteHandler(e)},k["b"].TOOL),this.view.on("double-click",["Control"],e=>{e.stopPropagation(),this._drawCompleteHandler(e)},k["b"].TOOL),this.view.on("key-down",e=>{const{key:t,repeat:i}=e;t===D["a"].vertexAdd&&!i&&this._cursorScreenPoint?(e.stopPropagation(),this._abortSnapping(),this._vertexAddHandler(e)):t!==D["a"].complete||i?t!==D["a"].undo||this.interactiveUndoDisabled||i?t!==D["a"].redo||this.interactiveUndoDisabled||i?t!==D["a"].pan||i||(e.stopPropagation(),this._panEnabled=!0):(e.stopPropagation(),this.redo()):(e.stopPropagation(),this.undo()):(e.stopPropagation(),this._drawCompleteHandler(e))},k["b"].TOOL),this.view.on("key-up",e=>{e.key===D["a"].pan&&(e.stopPropagation(),this._panEnabled=!1)},k["b"].TOOL)],this._viewHandlesKey)}_addUndoRedoHandles(){this._removeUndoRedoHandles(),this._handles.add([this._editGeometryOperations.on("vertex-remove",e=>{if(this.notifyChange("vertices"),"undo"===e.operation){const t=this._nativeEventHistory.undoStack.pop();this._nativeEventHistory.redoStack.push(t);const i=[...this._committedVertices];Object(d["k"])(this._stagedVertex)&&i.push(this._coordinateHelper.pointToArray(this._stagedVertex)),this.emit("undo",new V(this.view,t,e.vertices[0].index,i))}}),this._editGeometryOperations.on("vertex-add",e=>{if(this.notifyChange("vertices"),"apply"===e.operation){const e=this._nativeEventHistory.undoStack[this._nativeEventHistory.undoStack.length],t=this._committedVertices.length-1,i=new S(this.view,e,t,this.vertices);this.emit("vertex-add",i),i.defaultPrevented&&(this._popVertexOnPointerMove=!0)}else if("redo"===e.operation){const t=this._nativeEventHistory.redoStack.pop();this._nativeEventHistory.undoStack.push(t);const i=[...this._committedVertices];Object(d["k"])(this._stagedVertex)&&i.push(this._coordinateHelper.pointToArray(this._stagedVertex)),this.emit("redo",new S(this.view,t,e.vertices[0].index,i))}})],this._undoRedoHandlesKey)}_removeViewHandles(){this._handles.remove(this._viewHandlesKey)}_removeUndoRedoHandles(){this._handles.remove(this._undoRedoHandlesKey)}_addDrawTool(){this._drawTool=new R({view:this.view,elevationInfo:this.elevationInfo,hasZ:this.hasZ,geometryType:"polygon",mode:this.mode}),this.view.addAndActivateTool(this._drawTool),this._drawTool.on("vertex-add",e=>{1===e.vertices.length&&this.emit("vertex-add",new S(this.view,null,e.vertices[0].vertexIndex,this._drawTool.getVertexCoords()))}),this._drawTool.on("cursor-update",e=>{1===e.vertices.length&&this.emit("cursor-update",new H(this.view,null,e.vertices[0].vertexIndex,this._drawTool.getVertexCoords()))}),this._drawTool.on("complete",e=>{this.emit("draw-complete",new C(null,this._drawTool.getVertexCoords())),this._removeDrawTool()})}_removeDrawTool(){this._handles.remove(this._drawToolHandlesKey),this.view.tools.remove(this._drawTool),this._drawTool=Object(d["d"])(this._drawTool)}_addVertex(e,t){const i=this._coordinateHelper.arrayToVector(e);if(this._isDuplicateOfLastVertex(i))return;this._lastVertexUnsnapped=this._stagedVertexUnsnapped,this._popCursorVertex(),this._editGeometryOperations.appendVertex(i);const s=t||new Event("placeholder");this._nativeEventHistory.undoStack.push(s)}_updateCursor(e,t=!1){if(this._popCursorVertex(),!this._cursorScreenPoint)return;const i=this.getCoordsAndPointFromScreenPoint(this._cursorScreenPoint);Object(d["k"])(i)&&!t&&this._pushCursorVertex(i.vertex,()=>this.emit("cursor-update",new H(this.view,e,this._activeComponent.vertices.length,this.vertices,Object(d["k"])(this._stagedVertex)?new A["a"](this._stagedVertex):null)))}_completeDrawing(e){if(this._activePointerId=null,this._popCursorVertex(),this._committedVertices.length<3)return;this._abortSnapping(),Object(d["k"])(this._snappingManager)&&this._snappingManager.doneSnapping();const t=new C(e,this.vertices);this.emit("draw-complete",t),t.defaultPrevented||this._removeViewHandles()}};Object(o["a"])([Object(r["b"])()],K.prototype,"_dragEnabled",null),Object(o["a"])([Object(r["b"])()],K.prototype,"_clickEnabled",null),Object(o["a"])([Object(r["b"])({type:z["b"]})],K.prototype,"mode",void 0),K=Object(o["a"])([Object(a["a"])("esri.views.draw.PolygonDrawAction")],K);let F=class extends P{constructor(e){super(e),this._panEnabled=!1,this._popVertexOnPointerMove=!1,this._addVertexOnPointerUp=!1,this.mode=z["a"]}initialize(){"2d"===this.view.type?(this._addViewHandles(),this._addUndoRedoHandles()):this._addDrawTool()}destroy(){"2d"===this.view.type?(this._removeViewHandles(),this._removeUndoRedoHandles()):this._removeDrawTool(),this.emit("destroy")}get _clickEnabled(){return"click"===this.mode||"hybrid"===this.mode}get _dragEnabled(){return"freehand"===this.mode||"hybrid"===this.mode}undo(){super.undo(),this.notifyChange("vertices")}redo(){super.redo(),this.notifyChange("vertices")}complete(){"2d"===this.view.type?this._completeDrawing():this._drawTool.completeCreateOperation()}_addViewHandles(){this._removeViewHandles(),this._handles.add([this.view.on("click",e=>{e.stopPropagation()},k["b"].TOOL),this.view.on("pointer-down",e=>{this._shouldHandlePointerEvent(e)&&!this._panEnabled&&(this._abortSnapping(),this._activePointerId=e.pointerId,this._addVertexOnPointerUp=!0,this._cursorScreenPoint=Object(L["a"])(e),"touch"===e.pointerType&&this._updateCursor(e.native))},k["b"].TOOL),this.view.on("pointer-move",e=>{this._popVertexOnPointerMove&&(this.undo(),this._popVertexOnPointerMove=!1),this._abortSnapping(),this._cursorScreenPoint=Object(L["a"])(e),"touch"!==e.pointerType&&this._updateCursor(e.native)},k["b"].TOOL),this.view.on("pointer-drag",e=>{this._shouldHandlePointerEvent(e)&&(this._abortSnapping(),this._cursorScreenPoint=Object(L["a"])(e),this._dragEnabled&&!this._panEnabled?this._vertexAddHandler(e):this._addVertexOnPointerUp=!1)},k["b"].TOOL),this.view.on("pointer-up",e=>{if(this._shouldHandlePointerEvent(e))if(this._abortSnapping(),this._activePointerId=null,this._addVertexOnPointerUp){if(!this._clickEnabled)return 1===this.vertices.length&&this.vertices.pop(),void this._drawCompleteHandler(e);this._vertexAddHandler(e)}else{const t="touch"===e.pointerType;this._updateCursor(e.native,t)}},k["b"].TOOL),this.view.on("drag",e=>{this._dragEnabled&&Object(d["k"])(this._activePointerId)&&!this._panEnabled&&e.stopPropagation()},k["b"].TOOL),this.view.on("drag",["Shift"],e=>{e.stopPropagation()},k["b"].TOOL),this.view.on("double-click",e=>{e.stopPropagation(),this._drawCompleteHandler(e)},k["b"].TOOL),this.view.on("double-click",["Control"],e=>{e.stopPropagation(),this._drawCompleteHandler(e)},k["b"].TOOL),this.view.on("key-down",e=>{const{key:t,repeat:i}=e;t===D["a"].vertexAdd&&!i&&this._cursorScreenPoint?(e.stopPropagation(),this._abortSnapping(),this._vertexAddHandler(e)):t!==D["a"].complete||i?t!==D["a"].undo||this.interactiveUndoDisabled||i?t!==D["a"].redo||this.interactiveUndoDisabled||i?t!==D["a"].pan||i||(e.stopPropagation(),this._panEnabled=!0):(e.stopPropagation(),this.redo()):(e.stopPropagation(),this.undo()):(e.stopPropagation(),this._drawCompleteHandler(e))},k["b"].TOOL),this.view.on("key-up",e=>{e.key===D["a"].pan&&(e.stopPropagation(),this._panEnabled=!1)},k["b"].TOOL)],this._viewHandlesKey)}_addUndoRedoHandles(){this._removeUndoRedoHandles(),this._handles.add([this._editGeometryOperations.on("vertex-remove",e=>{if(this.notifyChange("vertices"),"undo"===e.operation){const t=this._nativeEventHistory.undoStack.pop();this._nativeEventHistory.redoStack.push(t);const i=[...this._committedVertices];Object(d["k"])(this._stagedVertex)&&i.push(this._coordinateHelper.pointToArray(this._stagedVertex)),this.emit("undo",new V(this.view,t,e.vertices[0].index,i))}}),this._editGeometryOperations.on("vertex-add",e=>{if(this.notifyChange("vertices"),"apply"===e.operation){const e=this._nativeEventHistory.undoStack[this._nativeEventHistory.undoStack.length],t=this._committedVertices.length-1,i=new S(this.view,e,t,this.vertices);this.emit("vertex-add",i),i.defaultPrevented&&(this._popVertexOnPointerMove=!0)}else if("redo"===e.operation){const t=this._nativeEventHistory.redoStack.pop();this._nativeEventHistory.undoStack.push(t);const i=[...this._committedVertices];Object(d["k"])(this._stagedVertex)&&i.push(this._coordinateHelper.pointToArray(this._stagedVertex)),this.emit("redo",new S(this.view,t,e.vertices[0].index,i))}})],this._undoRedoHandlesKey)}_removeViewHandles(){this._handles.remove(this._viewHandlesKey)}_removeUndoRedoHandles(){this._handles.remove(this._undoRedoHandlesKey)}_addDrawTool(){this._drawTool=new R({view:this.view,elevationInfo:this.elevationInfo,hasZ:this.hasZ,geometryType:"polyline",mode:this.mode}),this.view.addAndActivateTool(this._drawTool),this._handles.add([this._drawTool.on("vertex-add",e=>{1===e.vertices.length&&this.emit("vertex-add",new S(this.view,null,e.vertices[0].vertexIndex,this._drawTool.getVertexCoords()))}),this._drawTool.on("cursor-update",e=>{1===e.vertices.length&&this.emit("cursor-update",new H(this.view,null,e.vertices[0].vertexIndex,this._drawTool.getVertexCoords()))}),this._drawTool.on("complete",e=>{this.emit("draw-complete",new C(null,this._drawTool.getVertexCoords())),this._removeDrawTool()})],this._drawToolHandlesKey)}_removeDrawTool(){this._handles.remove(this._drawToolHandlesKey),this.view.tools.remove(this._drawTool),this._drawTool=Object(d["d"])(this._drawTool)}_addVertex(e,t){const i=this._coordinateHelper.arrayToVector(e);if(this._isDuplicateOfLastVertex(i))return;this._lastVertexUnsnapped=this._stagedVertexUnsnapped,this._popCursorVertex(),this._editGeometryOperations.appendVertex(i);const s=t||new Event("placeholder");this._nativeEventHistory.undoStack.push(s)}_updateCursor(e,t=!1){if(this._popCursorVertex(),!this._cursorScreenPoint)return;const i=this.getCoordsAndPointFromScreenPoint(this._cursorScreenPoint);Object(d["k"])(i)&&!t&&this._pushCursorVertex(i.vertex,()=>this.emit("cursor-update",new H(this.view,e,this._activeComponent.vertices.length,this.vertices,Object(d["k"])(this._stagedVertex)?new A["a"](this._stagedVertex):null)))}_completeDrawing(e){if(this._activePointerId=null,this._popCursorVertex(),this._committedVertices.length<2)return;this._abortSnapping(),Object(d["k"])(this._snappingManager)&&this._snappingManager.doneSnapping();const t=new C(e,this.vertices);this.emit("draw-complete",t),t.defaultPrevented||this._removeViewHandles()}};Object(o["a"])([Object(r["b"])()],F.prototype,"_clickEnabled",null),Object(o["a"])([Object(r["b"])()],F.prototype,"_dragEnabled",null),Object(o["a"])([Object(r["b"])({type:z["b"]})],F.prototype,"mode",void 0),F=Object(o["a"])([Object(a["a"])("esri.views.draw.PolylineDrawAction")],F);var N=i("a545");const W=["freehand","click"];let B=class extends P{constructor(e){super(e),this._isDragging=!1,this._panEnabled=!1,this._addVertexOnPointerUp=!1,this.viewAlignedCoordinateSystem=null,this.mode="freehand"}initialize(){"2d"===this.view.type?this._addViewHandles():this._addDrawTool()}destroy(){"2d"===this.view.type?this._removeViewHandles():this._removeDrawTool(),this.emit("destroy")}complete(){"2d"===this.view.type?this._completeDrawing():this._drawTool.completeCreateOperation()}_getGeometryZValue(){return this.hasZ&&this.vertices.length>0?this.vertices[0][2]:this.defaultZ}_addViewHandles(){this._removeViewHandles(),"click"===this.mode?this._handles.add(this._getClickModeViewHandles(),this._viewHandlesKey):this._handles.add(this._getDragModeViewHandles(),this._viewHandlesKey)}_getDragModeViewHandles(){return[this.view.on("immediate-click",e=>{if(e.stopPropagation(),e.mapPoint&&!this._panEnabled){const t=this.getCoordsFromScreenPoint(Object(L["a"])(e));Object(d["k"])(t)&&(this._vertexAddHandler(e),this._drawCompleteHandler(e))}},k["b"].TOOL),this.view.on("pointer-down",e=>{this._shouldHandlePointerEvent(e)&&(this._abortSnapping(),this._panEnabled||(this._resetGeometry(),this._addVertexOnPointerUp=!0,this._cursorScreenPoint=Object(L["a"])(e),this._activePointerId=e.pointerId,this._vertexAddHandler(e),this._isDragging=!1,"touch"===e.pointerType&&this._updateCursor(e.native)))},k["b"].TOOL),this.view.on("pointer-move",e=>{this._abortSnapping(),Object(d["j"])(this._activePointerId)&&"touch"!==e.pointerType&&(this._cursorScreenPoint=Object(L["a"])(e),this._updateCursor(e.native))},k["b"].TOOL),this.view.on("pointer-drag",e=>{this._shouldHandlePointerEvent(e)&&(this._abortSnapping(),this._isDragging=!0,this._cursorScreenPoint=Object(L["a"])(e),this._updateCursor(e.native))},k["b"].TOOL),this.view.on("pointer-up",e=>{this._shouldHandlePointerEvent(e)&&this._addVertexOnPointerUp&&(this._abortSnapping(),this._activePointerId=null,this._isDragging&&this._vertexAddHandler(e),2===this._committedVertices.length&&this._drawCompleteHandler(e),this._isDragging=!1)},k["b"].TOOL),this.view.on("key-down",e=>{e.key===D["a"].complete&&this._cursorScreenPoint?(this._abortSnapping(),this._vertexAddHandler(e),this._drawCompleteHandler(e)):e.key===D["a"].pan&&(this._panEnabled=!0)},k["b"].TOOL),this.view.on("key-up",e=>{e.key===D["a"].pan&&(this._panEnabled=!1)},k["b"].TOOL),this.view.on("drag",e=>{Object(d["k"])(this._activePointerId)&&e.stopPropagation()},k["b"].TOOL),this.view.on("drag",["Shift"],e=>{e.stopPropagation()},k["b"].TOOL)]}_getClickModeViewHandles(){return[this.view.on("pointer-down",e=>{this._abortSnapping(),this._cursorScreenPoint=Object(L["a"])(e),this._activePointerId=e.pointerId,this._isDragging=!1,"touch"===e.pointerType&&this._updateCursor(e.native)},k["b"].TOOL),this.view.on("pointer-move",e=>{this._abortSnapping(),this._cursorScreenPoint=Object(L["a"])(e),Object(d["j"])(this._activePointerId)&&"touch"!==e.pointerType&&this._updateCursor(e.native)},k["b"].TOOL),this.view.on("pointer-drag",e=>{this._shouldHandlePointerEvent(e)&&(this._abortSnapping(),this._isDragging=!0)},k["b"].TOOL),this.view.on("pointer-up",e=>{this._shouldHandlePointerEvent(e)&&(this._abortSnapping(),this._activePointerId=null,e.stopPropagation(),this._isDragging||this._vertexAddHandler(e),2!==this.vertices.length||this._isDragging||this._drawCompleteHandler(e),this._isDragging=!1)},k["b"].TOOL),this.view.on("key-down",e=>{e.key===D["a"].vertexAdd&&this._cursorScreenPoint&&(this._vertexAddHandler(e),2===this.vertices.length&&this._drawCompleteHandler(e)),e.key===D["a"].complete&&this._cursorScreenPoint&&2===this.vertices.length&&(this._vertexAddHandler(e),this._drawCompleteHandler(e))},k["b"].TOOL)]}_removeViewHandles(){this._handles.remove(this._viewHandlesKey)}_addDrawTool(){this._drawTool=new R({view:this.view,elevationInfo:this.elevationInfo,hasZ:this.hasZ,geometryType:"segment",mode:this.mode}),this.view.addAndActivateTool(this._drawTool),this._handles.add([this._drawTool.on("vertex-add",e=>{1===e.vertices.length&&this.emit("vertex-add",new S(this.view,null,e.vertices[0].vertexIndex,this._drawTool.getVertexCoords()))}),this._drawTool.on("cursor-update",e=>{1===e.vertices.length&&this.emit("cursor-update",new H(this.view,null,e.vertices[0].vertexIndex,this._drawTool.getVertexCoords()))}),this._drawTool.on("complete",e=>{this.emit("draw-complete",new C(null,this._drawTool.getVertexCoords())),this._removeDrawTool()})],this._drawToolHandlesKey)}_removeDrawTool(){this._handles.remove(this._drawToolHandlesKey),this.view.tools.remove(this._drawTool),this._drawTool=Object(d["d"])(this._drawTool)}_addVertex(e,t){const i=this._coordinateHelper.arrayToVector(e);if(this._isDuplicateOfLastVertex(i))return;this._lastVertexUnsnapped=this._stagedVertexUnsnapped,this._popCursorVertex(),this._editGeometryOperations.appendVertex(i),1===this._committedVertices.length&&(this.viewAlignedCoordinateSystem=Object(N["a"])(this.view,this._committedVertices[0]));const s=this._committedVertices.length-1,o=new S(this.view,t,s,this.vertices);this.emit("vertex-add",o)}_updateCursor(e){if(this._popCursorVertex(),!this._cursorScreenPoint)return;const t=this.getCoordsAndPointFromScreenPoint(this._cursorScreenPoint);Object(d["k"])(t)&&this._pushCursorVertex(t.vertex,()=>this.emit("cursor-update",new H(this.view,e,this._activeComponent.vertices.length,this.vertices,Object(d["k"])(this._stagedVertex)?new A["a"](this._stagedVertex):null)))}_completeDrawing(e){if(this._activePointerId=null,this._popCursorVertex(),this._cursorScreenPoint=null,this._isDragging=!1,this._abortSnapping(),Object(d["k"])(this._snappingManager)&&this._snappingManager.doneSnapping(),this.vertices.length<1)return;const t=new C(e,this.vertices);this.emit("draw-complete",t),t.defaultPrevented||this._removeViewHandles()}_resetGeometry(){this._editGeometryOperations.destroy(),this._editGeometryOperations=new w["a"](new y["c"]("polygon",this._coordinateHelper)),this._activeComponent=new y["a"](this._coordinateHelper.spatialReference,b["a"].Local),this._editGeometryOperations.data.components.push(this._activeComponent)}};Object(o["a"])([Object(r["b"])({type:W})],B.prototype,"mode",void 0),B=Object(o["a"])([Object(a["a"])("esri/views/2d/engine/markup/SegmentDrawAction")],B);let q=class extends n["a"]{constructor(){super(...arguments),this.activeAction=null,this.type="draw",this.view=null}destroy(){this.activeAction&&(this.activeAction.destroy(),this.activeAction=null)}create(e,t){this.reset();const i={view:this.view,...t};switch(e){case"point":i.editGeometryType="point",this.activeAction=new Z(i);break;case"polyline":i.editGeometryType="polyline",this.activeAction=new F(i);break;case"multipoint":i.editGeometryType="polygon",this.activeAction=new I(i);break;case"polygon":i.editGeometryType="polygon",this.activeAction=new K(i);break;case"rectangle":case"circle":case"ellipse":case"triangle":i.editGeometryType="polygon",this.activeAction=new B(i)}return this.activeAction}complete(){this.activeAction&&this.activeAction.complete(),this.activeAction=null}reset(){this.activeAction&&this.activeAction.destroy(),this.activeAction=null}};Object(o["a"])([Object(r["b"])()],q.prototype,"activeAction",void 0),Object(o["a"])([Object(r["b"])({readOnly:!0})],q.prototype,"type",void 0),Object(o["a"])([Object(r["b"])()],q.prototype,"view",void 0),q=Object(o["a"])([Object(a["a"])("esri.views.draw.Draw")],q);const J=q},"3cde":function(e,t,i){"use strict";i.d(t,"a",(function(){return y}));var s=i("a4ee"),o=i("fc29"),n=i("ce6d"),r=i("b2b2"),a=i("477c"),d=i("a915"),h=i("59b2"),c=(i("b50f"),i("c120"),i("cea0"),i("d386")),l=i("3349"),p=i("e431"),u=i("0b2d"),v=i("8188"),_=i("f408"),b=i("a6c1"),m=i("fd14"),O=i("e94b");let y=class extends o["a"]{constructor(e){super(e),this.layer=null,this.interactive=!0,this.selectable=!1,this.grabbable=!0,this.dragging=!1,this.cursor=null,this.events=new n["a"].EventEmitter,this._circleCollisionCache=null,this._graphicSymbolChangedHandle=null,this._originalSymbol=null}set graphic(e){this._circleCollisionCache=null,this._originalSymbol=e.symbol,this._set("graphic",e),this.attachSymbolChanged()}get elevationInfo(){const e="elevationInfo"in this.graphic.layer&&this.graphic.layer.elevationInfo,t=Object(_["f"])(this.graphic),i=e?e.offset:0;return new m["a"]({mode:t,offset:i})}set focusedSymbol(e){e!==this._get("focusedSymbol")&&(this._set("focusedSymbol",e),this._updateGraphicSymbol(),this._circleCollisionCache=null)}grabbableForEvent(){return!0}set grabbing(e){e!==this._get("grabbing")&&(this._set("grabbing",e),this._updateGraphicSymbol())}set hovering(e){e!==this._get("hovering")&&(this._set("hovering",e),this._updateGraphicSymbol())}set selected(e){e!==this._get("selected")&&(this._set("selected",e),this._updateGraphicSymbol(),this.events.emit("select-changed",{action:e?"select":"deselect"}))}get _focused(){return this._get("hovering")||this._get("grabbing")}destroy(){this.detachSymbolChanged(),this._resetGraphicSymbol(),this._set("view",null)}intersectionDistance(e){const t=this.graphic;if(!1===t.visible)return null;const i=t.geometry;if(Object(r["j"])(i))return null;const s=this._get("focusedSymbol"),o=Object(r["k"])(s)?s:t.symbol;return"2d"===this.view.type?this._intersectDistance2D(this.view,e,i,o):this._intersectDistance3D(this.view,e,t)}attach(){this.attachSymbolChanged(),Object(r["k"])(this.layer)&&this.layer.add(this.graphic)}detach(){this.detachSymbolChanged(),this._resetGraphicSymbol(),Object(r["k"])(this.layer)&&this.layer.remove(this.graphic)}attachSymbolChanged(){this.detachSymbolChanged(),this._graphicSymbolChangedHandle=Object(a["f"])(()=>{var e;return null==(e=this.graphic)?void 0:e.symbol},e=>{Object(r["k"])(e)&&e!==this.focusedSymbol&&e!==this._originalSymbol&&(this._originalSymbol=e,this._focused&&Object(r["k"])(this.focusedSymbol)&&(this.graphic.symbol=this.focusedSymbol))},a["d"])}detachSymbolChanged(){Object(r["k"])(this._graphicSymbolChangedHandle)&&(this._graphicSymbolChangedHandle.remove(),this._graphicSymbolChangedHandle=null)}_updateGraphicSymbol(){this.graphic.symbol=this._focused&&Object(r["k"])(this.focusedSymbol)?this.focusedSymbol:this._originalSymbol}_resetGraphicSymbol(){this.graphic.symbol=this._originalSymbol}_intersectDistance2D(e,t,i,s){if(s=s||Object(b["h"])(i),Object(r["j"])(s))return null;const o=1;let n=this._circleCollisionCache;if("point"!==i.type||"simple-marker"!==s.type)return Object(O["b"])(t,i,e)?o:null;if(Object(r["j"])(n)||!n.originalPoint.equals(i)){const t=i,o=e.spatialReference;if(Object(v["b"])(t.spatialReference,o)){const e=Object(v["j"])(t,o);n={originalPoint:t.clone(),mapPoint:e,radiusPx:Object(d["g"])(s.size)},this._circleCollisionCache=n}}if(Object(r["k"])(n)){const i=Object(d["i"])(t,g),r=e.toScreen(n.mapPoint),a=n.radiusPx,h=r.x+Object(d["g"])(s.xoffset),c=r.y-Object(d["g"])(s.yoffset);return Object(l["s"])(i,[h,c])<a*a?o:null}return null}_intersectDistance3D(e,t,i){const s=e.toMap(t,{include:[i]});return s&&Object(v["p"])(s,w,e.renderSpatialReference)?Object(p["m"])(w,e.state.camera.eye):null}};Object(s["a"])([Object(h["b"])({constructOnly:!0,nonNullable:!0})],y.prototype,"graphic",null),Object(s["a"])([Object(h["b"])()],y.prototype,"elevationInfo",null),Object(s["a"])([Object(h["b"])({constructOnly:!0,nonNullable:!0})],y.prototype,"view",void 0),Object(s["a"])([Object(h["b"])({value:null})],y.prototype,"focusedSymbol",null),Object(s["a"])([Object(h["b"])({constructOnly:!0})],y.prototype,"layer",void 0),Object(s["a"])([Object(h["b"])()],y.prototype,"interactive",void 0),Object(s["a"])([Object(h["b"])()],y.prototype,"selectable",void 0),Object(s["a"])([Object(h["b"])()],y.prototype,"grabbable",void 0),Object(s["a"])([Object(h["b"])({value:!1})],y.prototype,"grabbing",null),Object(s["a"])([Object(h["b"])()],y.prototype,"dragging",void 0),Object(s["a"])([Object(h["b"])()],y.prototype,"hovering",null),Object(s["a"])([Object(h["b"])({value:!1})],y.prototype,"selected",null),Object(s["a"])([Object(h["b"])()],y.prototype,"cursor",void 0),y=Object(s["a"])([Object(c["a"])("esri.views.interactive.GraphicManipulator")],y);const w=Object(u["f"])(),g=Object(d["f"])()},"536f":function(e,t,i){"use strict";function s(e,t){return t?"xoffset"in t&&t.xoffset?Math.max(e,Math.abs(t.xoffset)):"yoffset"in t&&t.yoffset?Math.max(e,Math.abs(t.yoffset||0)):e:e}function o(e){let t=0,i=0;for(let s=0;s<e.length;s++){const o=e[s].size;"number"==typeof o&&(t+=o,i++)}return t/i}function n(e,t){return"number"==typeof e?e:e&&e.stops&&e.stops.length?o(e.stops):t}function r(e,t){if(!t)return e;const i=t.filter(e=>"size"===e.type).map(t=>{const{maxSize:i,minSize:s}=t;return(n(i,e)+n(s,e))/2});let s=0;const o=i.length;if(0===o)return e;for(let n=0;n<o;n++)s+=i[n];const r=Math.floor(s/o);return Math.max(r,e)}function a(e){const t=e&&e.renderer,i="touch"===(e&&e.event&&e.event.pointerType)?9:6;if(!t)return i;const o="visualVariables"in t?r(i,t.visualVariables):i;if("simple"===t.type)return s(o,t.symbol);if("unique-value"===t.type){let e=o;return t.uniqueValueInfos.forEach(t=>{e=s(e,t.symbol)}),e}if("class-breaks"===t.type){let e=o;return t.classBreakInfos.forEach(t=>{e=s(e,t.symbol)}),e}return"dot-density"===t.type||t.type,o}i.d(t,"a",(function(){return a}))},"62df":function(e,t,i){"use strict";i.r(t),i.d(t,"default",(function(){return Q}));var s=i("a4ee"),o=i("f4cc"),n=i("8048"),r=i("4adc"),a=(i("b50f"),i("c120"),i("cea0"),i("59b2")),d=i("d386"),h=i("121a"),c=i("af40"),l=i("b2b2"),p=i("477c"),u=i("8188"),v=i("caf1"),_=(i("e06a"),i("8d60")),b=(i("1b8f"),i("1fd7"),i("6aa9")),m=i("ea51"),O=i("40b6"),y=i("ce0b"),w=i("3c9c"),g=i("1c4d"),j=i("c20d"),f=i("3cde"),x=i("4772"),T=i("6323"),P=i("2035"),S=i("4ae5"),V=i("4cac"),H=i("21ba"),C=i("9787"),k=i("4dc9"),D=i("521c"),L=i("5996");const A=1e5;let I=class extends x["a"]{constructor(e){super(e),this._drawActive=!1,this._handles=new c["a"],this._measurementLayer=new y["a"]({internal:!0,listMode:"hide",visible:!1}),this._manipulatorLayer=new y["a"]({internal:!0,listMode:"hide",visible:!1}),this._vertices=[],this.geodesicDistanceThreshold=1e5,this.measurement=null,this.measurementLabel=null}initialize(){Object(T["a"])("esri/core/t9n/Units").then(e=>{this.messages=e}),this._handles.add(Object(P["c"])(async()=>{this.messages=await Object(T["a"])("esri/core/t9n/Units")}));const e=this.view;this._draw=new g["a"]({view:e}),e.map.addMany([this._measurementLayer,this._manipulatorLayer]),e.focus(),this._handles.add([Object(p["f"])(()=>[this.unit,this.geodesicDistanceThreshold,this.palette,this.messages],()=>{this._vertices.length>0&&this._updatePolylines()},p["a"])])}destroy(){const{map:e}=this.view;this._draw.view=null,this._draw=Object(l["d"])(this._draw),e.removeMany([this._measurementLayer,this._manipulatorLayer]),this._handles.removeAll(),this._measurementLayer.removeAll(),this._manipulatorLayer.removeAll(),this._set("measurement",null),this._set("measurementLabel",null),this._handles=Object(l["d"])(this._handles),this._measurementLayer=Object(l["d"])(this._measurementLayer),this._manipulatorLayer=Object(l["d"])(this._manipulatorLayer)}get cursor(){return this._drawActive?"crosshair":null}set editable(e){this._set("editable",e),e||this._draw.reset()}onActivate(){this._drawActive||0!==this._vertices.length||this._startSketch()}onShow(){this._measurementLayer.visible=!0,this._manipulatorLayer.visible=!0}onHide(){this._measurementLayer.visible=!1,this._manipulatorLayer.visible=!1}reset(){this._vertices=[],this._measurementLayer.removeAll(),this._set("measurement",null),this._set("measurementLabel",null),this._draw.reset(),this._drawActive=!1,this._updateSketch([])}_startSketch(){this._drawActive=!0;const e=this._draw.create("polyline",{mode:"click"});e.on(["vertex-add","vertex-update","vertex-remove","cursor-update","undo","redo"],e=>this._updateSketch(e.vertices)),e.on("draw-complete",()=>{this._stopSketch()})}_stopSketch(){this.manipulators.forEach(e=>{e.manipulator.interactive=!0}),this._drawActive=!1,this.finishToolCreation()}_updateSketch(e){if(e.length<2)return this._vertices=[],this.manipulators.removeAll(),void this._measurementLayer.removeAll();const{spatialReference:t}=this.view;for(;this._vertices.length>e.length;){const{manipulatorId:e}=this._vertices.pop();this.manipulators.remove(e)}for(let a=this._vertices.length;a<e.length;a++){const[i,s]=e[a],o=E(new S["a"]({x:i,y:s,spatialReference:t}),this.view,this._manipulatorLayer,this.palette),n=this.manipulators.add(o);Object(j["e"])(o,(e,t)=>{t.next(Object(j["l"])(this.view)).next(Object(j["g"])(e.graphic,w["a"].Local)).next(()=>{const t=e.graphic.geometry;this._vertices[a].coord=[t.x,t.y],this._updatePolylines()})}),this._vertices.push({manipulatorId:n,coord:[i,s]})}const i=this._vertices.length-1,s=this._vertices[i],[o,n]=e[i];if(s.coord[0]!==o||s.coord[1]!==n){s.coord=[o,n];const e=new S["a"]({x:o,y:n,spatialReference:t});this.manipulators.findById(s.manipulatorId).graphic.geometry=e}const r=this._drawActive?this._vertices[i].manipulatorId:null;this.manipulators.forEach(e=>{e.manipulator.interactive=null==r||e.id!==r}),this._updatePolylines()}_updatePolylines(){const e=this._vertices.map(e=>e.coord),{measurement:t,drawing:i,original:s}=M(e,this.view.spatialReference,this.geodesicDistanceThreshold);this._set("measurement",t);const o=R(this.messages,t,this.unit);let n,r;this._set("measurementLabel",o);const{graphics:a}=this._measurementLayer;if(2===a.length)n=a.getItemAt(0),r=a.getItemAt(1);else{const{pathPrimaryColor:e,pathSecondaryColor:t,pathWidth:i}=this.palette;n=new _["a"]({symbol:new V["a"]({data:{type:"CIMSymbolReference",symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",effects:[{type:"CIMGeometricEffectDashes",dashTemplate:[14,12],lineDashEnding:"FullGap",controlPointEnding:"NoConstraint"}],enable:!0,capStyle:"Butt",joinStyle:"Round",width:i-1.5,color:t},{type:"CIMSolidStroke",enable:!0,capStyle:"Butt",joinStyle:"Round",width:i,color:e}]}}})}),r=new _["a"]({symbol:new H["a"]({color:[255,255,255,1],haloColor:[0,0,0,.5],haloSize:2,font:new C["a"]({size:14,family:"sans-serif"})})}),a.removeAll(),a.addMany([n,r])}n.geometry=i,r.geometry=s.extent.center,r.symbol.text=o}};function E(e,t,i,s){const o=new k["a"]({style:"circle",color:s.handleColor,size:s.handleWidth,outline:{type:"simple-line",width:0}}),n=new k["a"]({style:"circle",color:s.handleColor,size:1.5*s.handleWidth,outline:{type:"simple-line",width:0}}),r=new _["a"]({geometry:e,symbol:o});return new f["a"]({view:t,layer:i,graphic:r,focusedSymbol:n})}function M(e,t,i){const s=new D["a"]({paths:[e],spatialReference:t});let o,n;if(t.isGeographic)if(Object(O["f"])(t))o=Object(O["d"])([s],"meters")[0],n=Object(O["c"])(s,A);else{const e=Object(u["j"])(s,L["a"].WGS84),i=Object(O["c"])(e,A);o=Object(O["d"])([e],"meters")[0],n=Object(u["j"])(i,t)}else if(t.isWebMercator)o=Object(m["geodesicLength"])(s,"meters"),n=Object(m["geodesicDensify"])(s,A,"meters");else{const e=Object(m["planarLength"])(s,"meters");if(e>=i){const e=Object(u["j"])(s,L["a"].WGS84),i=Object(O["c"])(e,A);o=Object(O["d"])([e],"meters")[0],n=Object(u["j"])(i,t)}else o=e,n=s}return{measurement:{geometry:n,length:o},original:s,drawing:n}}function U(e){return null!=e}function G(e){if(!e)return!1;const{isGeographic:t,isWebMercator:i,isWGS84:s}=e;return t&&!s&&!Object(O["f"])(e)||!t&&!i}function R(e,t,i){if(!t||!e)return null;switch(i){case"metric":return Object(b["k"])(e,t.length,"meters");case"imperial":return Object(b["f"])(e,t.length,"meters");default:return Object(b["c"])(e,Object(n["d"])(t.length,"meters",i),i)}}Object(s["a"])([Object(a["b"])()],I.prototype,"_drawActive",void 0),Object(s["a"])([Object(a["b"])({readOnly:!0})],I.prototype,"cursor",null),Object(s["a"])([Object(a["b"])({value:!0})],I.prototype,"editable",null),Object(s["a"])([Object(a["b"])({type:Number})],I.prototype,"geodesicDistanceThreshold",void 0),Object(s["a"])([Object(a["b"])({readOnly:!0})],I.prototype,"measurement",void 0),Object(s["a"])([Object(a["b"])({readOnly:!0})],I.prototype,"measurementLabel",void 0),Object(s["a"])([Object(a["b"])()],I.prototype,"messages",void 0),Object(s["a"])([Object(a["b"])()],I.prototype,"palette",void 0),Object(s["a"])([Object(a["b"])()],I.prototype,"unit",void 0),Object(s["a"])([Object(a["b"])({constructOnly:!0})],I.prototype,"view",void 0),I=Object(s["a"])([Object(d["a"])("esri.widgets.DistanceMeasurement2D.DistanceMeasurement2DTool")],I);var Z=i("7ea8");const z={handleWidth:8,handleColor:[255,128,0,.5],pathWidth:5,pathPrimaryColor:[255,128,0,255],pathSecondaryColor:[255,255,255,255]};let K=class extends Z["a"]{constructor(e){super(e),this.supportedViewType="2d",this.unsupportedErrorMessage="DistanceMeasurement2DViewModel is only supported in 2D views.",this._handles=new c["a"],this.geodesicDistanceThreshold=1e5,this.measurement=null,this.measurementLabel=null,this.palette=z}initialize(){this._handles.add([Object(p["f"])(()=>{var e;return null==(e=Object(l["r"])(this.view))?void 0:e.spatialReference},()=>this.clear()),Object(p["f"])(()=>this.unit,e=>{Object(l["k"])(this.tool)&&(this.tool.unit=e)},p["a"]),Object(p["f"])(()=>this.geodesicDistanceThreshold,e=>{Object(l["k"])(this.tool)&&(this.tool.geodesicDistanceThreshold=e)},p["a"]),Object(p["f"])(()=>this.palette,e=>{Object(l["k"])(this.tool)&&(this.tool.palette=e)},p["a"])])}destroy(){this._handles&&(this._handles.destroy(),this._handles=null)}get state(){var e;return this.disabled||Object(l["j"])(this.view)||!U(null==(e=this.view)?void 0:e.spatialReference)?"disabled":Object(l["k"])(this.tool)&&this.measurement?this.tool.active?"measuring":"measured":"ready"}get unit(){return this._validateUnit(this.defaultUnit)}set unit(e){void 0!==e?this._override("unit",this._validateUnit(e)):this._clearOverride("unit")}get unitOptions(){return n["q"]}set unitOptions(e){void 0!==e?this._override("unitOptions",this._validateUnits(e)):this._clearOverride("unitOptions")}async start(){const e=this.view;Object(l["k"])(e)&&(await Object(p["h"])(()=>e.ready),G(e.spatialReference)&&await Object(u["h"])()),this.createTool({interactive:!0})}clear(){this.removeTool()}constructTool(){return new I({view:Object(l["r"])(this.view),visible:this.visible,geodesicDistanceThreshold:this.geodesicDistanceThreshold,palette:this.palette,unit:this.unit})}_validateUnit(e){return this.unitOptions.includes(e)?e:this.unitOptions.includes(this.defaultUnit)?this.defaultUnit:this.unitOptions[0]}_validateUnits(e=[]){const t=e.filter(e=>n["q"].includes(e));return 0===t.length?n["q"].slice():t}};Object(s["a"])([Object(a["b"])(v["a"])],K.prototype,"defaultUnit",void 0),Object(s["a"])([Object(a["b"])({type:Number})],K.prototype,"geodesicDistanceThreshold",void 0),Object(s["a"])([Object(a["b"])({readOnly:!0,aliasOf:"tool.measurement"})],K.prototype,"measurement",void 0),Object(s["a"])([Object(a["b"])({readOnly:!0,aliasOf:"tool.measurementLabel"})],K.prototype,"measurementLabel",void 0),Object(s["a"])([Object(a["b"])()],K.prototype,"palette",void 0),Object(s["a"])([Object(a["b"])({readOnly:!0})],K.prototype,"state",null),Object(s["a"])([Object(a["b"])({type:String})],K.prototype,"unit",null),Object(s["a"])([Object(a["b"])({type:[String]})],K.prototype,"unitOptions",null),K=Object(s["a"])([Object(d["a"])("esri.widgets.DistanceMeasurement2D.DistanceMeasurement2DViewModel")],K);const F=K;var N=i("8750"),W=i("755e"),B=i("d822");i("702a");const q="esri-distance-measurement-2d",J={buttonDisabled:"esri-button--disabled",widgetIcon:"esri-icon-measure-line",base:q+" esri-widget esri-widget--panel",container:q+"__container",hint:q+"__hint",hintText:q+"__hint-text",panelError:q+"__panel--error",measurement:q+"__measurement",measurementItem:q+"__measurement-item",measurementItemDisabled:q+"__measurement-item--disabled",measurementItemTitle:q+"__measurement-item-title",measurementItemValue:q+"__measurement-item-value",settings:q+"__settings",units:q+"__units",unitsLabel:q+"__units-label",unitsSelect:q+"__units-select esri-select",unitsSelectWrapper:q+"__units-select-wrapper",actionSection:q+"__actions",newMeasurementButton:q+"__clear-button esri-button esri-button--primary"};let Y=class extends h["a"]{constructor(e,t){super(e,t),this.iconClass=J.widgetIcon,this.label=void 0,this.messages=null,this.messagesUnits=null,this.unit=null,this.unitOptions=null,this.view=null,this.viewModel=new F}render(){const{id:e,messages:t,messagesUnits:i,viewModel:s,visible:o}=this,{active:r,supported:a,measurementLabel:d,state:h,unit:c,unitOptions:l}=s,p="disabled"===h,u="measuring"===h||"measured"===h,v=r&&"ready"===h?Object(B["a"])("section",{key:"hint",class:J.hint},Object(B["a"])("p",{class:J.hintText},t.hint)):null,_=a?null:Object(B["a"])("section",{key:"unsupported",class:J.panelError},Object(B["a"])("p",null,t.unsupported)),b=(e,t,i)=>t?Object(B["a"])("div",{key:i+"-enabled",class:J.measurementItem},Object(B["a"])("span",{class:J.measurementItemTitle},e),Object(B["a"])("span",{class:J.measurementItemValue},t)):Object(B["a"])("div",{key:i+"-disabled",class:this.classes(J.measurementItem,J.measurementItemDisabled),"aria-disabled":"true"},Object(B["a"])("span",{class:J.measurementItemTitle},e)),m=u?Object(B["a"])("section",{key:"measurement",class:J.measurement},b(t.distance,d,"distance")):null,O=e+"-units",y=u?Object(B["a"])("section",{key:"units",class:J.units},Object(B["a"])("label",{class:J.unitsLabel,for:O},t.unit),Object(B["a"])("div",{class:J.unitsSelectWrapper},Object(B["a"])("select",{class:J.unitsSelect,id:O,onchange:this._changeUnit,bind:this,value:c},l.map(e=>{var t;return Object(B["a"])("option",{key:e,value:e},Object(n["l"])(e)?i.systems[e]:null==(t=i.units[e])?void 0:t.pluralCapitalized)})))):null,w=u?Object(B["a"])("div",{key:"settings",class:J.settings},y):null,g=!a||r&&!u?null:Object(B["a"])("div",{class:J.actionSection},Object(B["a"])("button",{disabled:p,class:this.classes(J.newMeasurementButton,p&&J.buttonDisabled),bind:this,onclick:this._newMeasurement,title:t.newMeasurement,"aria-label":t.newMeasurement,type:"button"},t.newMeasurement)),j=o?Object(B["a"])("div",{class:J.container},_,v,w,m,g):null;return Object(B["a"])("div",{class:J.base},j)}_newMeasurement(){Object(o["i"])(this.viewModel.start())}_changeUnit(e){const t=e.target,i=t.options[t.selectedIndex];i&&(this.viewModel.unit=i.value)}};Object(s["a"])([Object(r["a"])("viewModel.active")],Y.prototype,"active",void 0),Object(s["a"])([Object(a["b"])()],Y.prototype,"iconClass",void 0),Object(s["a"])([Object(a["b"])({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],Y.prototype,"label",void 0),Object(s["a"])([Object(a["b"])()],Y.prototype,"uiStrings",void 0),Object(s["a"])([Object(a["b"])(),Object(W["a"])("esri/widgets/DistanceMeasurement2D/t9n/DistanceMeasurement2D")],Y.prototype,"messages",void 0),Object(s["a"])([Object(a["b"])(),Object(W["a"])("esri/core/t9n/Units")],Y.prototype,"messagesUnits",void 0),Object(s["a"])([Object(r["a"])("viewModel.unit")],Y.prototype,"unit",void 0),Object(s["a"])([Object(r["a"])("viewModel.unitOptions")],Y.prototype,"unitOptions",void 0),Object(s["a"])([Object(r["a"])("viewModel.view")],Y.prototype,"view",void 0),Object(s["a"])([Object(a["b"])({type:F})],Y.prototype,"viewModel",void 0),Object(s["a"])([Object(r["a"])("viewModel.visible")],Y.prototype,"visible",void 0),Object(s["a"])([Object(N["a"])()],Y.prototype,"_newMeasurement",null),Object(s["a"])([Object(N["a"])()],Y.prototype,"_changeUnit",null),Y=Object(s["a"])([Object(d["a"])("esri.widgets.DistanceMeasurement2D")],Y);const Q=Y},"7ea8":function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));var s=i("a4ee"),o=i("fc29"),n=i("af40"),r=i("e92d"),a=i("b2b2"),d=i("477c"),h=i("59b2"),c=(i("b50f"),i("c120"),i("cea0"),i("d386"));let l=class extends o["a"]{constructor(e){super(e),this.tool=null,this._baseHandles=new n["a"],this._loggedUnsupportedErrorOnce=!1,this.logger=r["a"].getLogger(this.declaredClass),e&&null!=e.visible&&(this.visible=e.visible)}initialize(){this._baseHandles.add(Object(d["f"])(()=>({ready:Object(a["k"])(this.view)&&this.view.ready,supported:this.supported}),({ready:e,supported:t})=>{!e||t||this._loggedUnsupportedErrorOnce||(this.logError(this.unsupportedErrorMessage),this._loggedUnsupportedErrorOnce=!0)},d["e"]))}destroy(){this.removeTool(),this.view=null,this._baseHandles=Object(a["d"])(this._baseHandles)}get supported(){return Object(a["j"])(this.view)||this.view.type===this.supportedViewType}get view(){return this._get("view")}set view(e){if(e===this.view)return;this.removeTool(),this._set("view",e);const t="tools";this._baseHandles.remove(t),Object(a["j"])(e)||this._baseHandles.add(e.tools.on("after-remove",e=>{e.item===this.tool&&this._set("tool",null)}),t)}set visible(e){this._set("visible",e),Object(a["k"])(this.tool)&&(this.tool.visible=e)}get active(){return Object(a["k"])(this.tool)&&this.tool.active}get disabled(){return Object(a["j"])(this.view)||!this.view.ready||!this.supported}createTool(e={interactive:!1}){if(this.removeTool(),Object(a["j"])(this.view)||!this.view.ready||!this.supported)return;const t=this.constructTool();t.created?(this._set("tool",t),this.view.tools.add(t)):e.interactive?(this._set("tool",t),this.view.addAndActivateTool(t),Object(d["g"])(()=>t.created,()=>{t.active&&Object(a["k"])(this.view)&&(this.view.activeTool=null)},{initial:!0,once:!0})):t.destroy()}removeTool(){const e=this.tool;if(Object(a["j"])(e))return;const t=Object(a["b"])(this.view,e=>e.tools);Object(a["k"])(t)?t.remove(e):e.destroy(),this._set("tool",null)}logError(...e){this.logger.error(...e)}};Object(s["a"])([Object(h["b"])({constructOnly:!0})],l.prototype,"tool",void 0),Object(s["a"])([Object(h["b"])()],l.prototype,"supported",null),Object(s["a"])([Object(h["b"])({value:null})],l.prototype,"view",null),Object(s["a"])([Object(h["b"])({type:Boolean,value:!0})],l.prototype,"visible",null),Object(s["a"])([Object(h["b"])()],l.prototype,"active",null),Object(s["a"])([Object(h["b"])()],l.prototype,"disabled",null),l=Object(s["a"])([Object(c["a"])("esri.widgets.support.InteractiveToolViewModel")],l)},e94b:function(e,t,i){"use strict";i.d(t,"a",(function(){return a})),i.d(t,"b",(function(){return d}));i("e06a");var s=i("b2b2"),o=i("8048"),n=i("536f"),r=i("3af1");function a(e,t,i,n=new r["a"]){let a;if("2d"===i.type)a=t*i.resolution;else if("3d"===i.type){const n=i.overlayPixelSizeInMapUnits(e),r=i.basemapSpatialReference;a=Object(s["k"])(r)&&!r.equals(i.spatialReference)?Object(o["f"])(r)/Object(o["f"])(i.spatialReference):t*n}const d=e.x-a,h=e.y-a,c=e.x+a,l=e.y+a,{spatialReference:p}=i;return n.xmin=Math.min(d,c),n.ymin=Math.min(h,l),n.xmax=Math.max(d,c),n.ymax=Math.max(h,l),n.spatialReference=p,n}function d(e,t,i){const o=i.toMap(e);return!Object(s["j"])(o)&&a(o,Object(n["a"])(),i,h).intersects(t)}const h=new r["a"]}}]);
//# sourceMappingURL=chunk-db1c94d6.a22e9fc9.js.map