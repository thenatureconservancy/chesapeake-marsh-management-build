{"version":3,"sources":["webpack:///./node_modules/@arcgis/core/rest/query/operations/pbfDehydratedFeatureSet.js","webpack:///./node_modules/@arcgis/core/views/3d/support/PBFDecoderWorker.js","webpack:///./node_modules/@arcgis/core/layers/graphics/dehydratedFeatures.js","webpack:///./node_modules/@arcgis/core/layers/graphics/dehydratedFeatureComparison.js"],"names":["u","t","e","p","r","o","m","originPosition","y","d","c","f","translate","scale","g","constructor","this","options","geometryTypes","previousCoordinate","transform","applyTransform","lengths","currentLengthIndex","toAddInCurrentPath","vertexDimension","coordinateBuffer","coordinateBufferPtr","_attributesConstructor","createFeatureResult","i","finishFeatureResult","length","hasZ","s","geometryType","sourceSpatialReference","spatialReference","features","geometry","createSpatialReference","addField","fields","push","l","fromJSON","map","name","addFeature","maxStringAttributeLength","attributes","addQueryGeometry","queryGeometry","queryGeometryType","a","clone","h","n","type","prepareFeatures","_deriveApplyTransform","hasM","addCoordinate","addCoordinatePoint","createGeometry","createPointGeometry","_addCoordinatePolygon","_createPolygonGeometry","_addCoordinatePolyline","_createPolylineGeometry","_addCoordinateMultipoint","_createMultipointGeometry","createFeature","allocateCoordinates","reduce","Float64Array","addLength","x","z","_transformPathLikeValue","_dehydratedAddPointsCoordinate","paths","rings","points","buffer","BYTES_PER_ELEMENT","_parseFeatureQuery","toJSON","Promise","resolve","j","uid","visible","objectId","centroid","M","N","exceededTransferLimit","objectIdFieldName","globalIdFieldName","geometryProperties","geohashFieldName","v","w","vertexAttributes","position","T","extent","xmin","ymin","xmax","ymax","zmin","zmax","J","O","equals"],"mappings":"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","file":"js/chunk-3c6b352b.422fc588.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{neverReached as t}from\"../../../core/compilerUtils.js\";import{isNone as e}from\"../../../core/maybe.js\";import{generateUID as r}from\"../../../core/uid.js\";import o from\"../../../geometry/SpatialReference.js\";import{getGeometryZScaler as s}from\"../../../geometry/support/zscale.js\";import{DehydratedFeatureSetClass as i,DehydratedFeatureClass as n}from\"../../../layers/graphics/dehydratedFeatures.js\";import{unquantizeOptimizedGeometry as a,convertToGeometry as h}from\"../../../layers/graphics/featureConversionUtils.js\";import l from\"../../../layers/support/Field.js\";function u(t,e){return e}function p(t,e,r,o){switch(r){case 0:return m(t,e+o,0);case 1:return\"lowerLeft\"===t.originPosition?m(t,e+o,1):y(t,e+o,1)}}function d(t,e,r,o){return 2===r?m(t,e,2):p(t,e,r,o)}function c(t,e,r,o){return 2===r?m(t,e,3):p(t,e,r,o)}function f(t,e,r,o){return 3===r?m(t,e,3):d(t,e,r,o)}function m({translate:t,scale:e},r,o){return t[o]+r*e[o]}function y({translate:t,scale:e},r,o){return t[o]-r*e[o]}class g{constructor(t){this.options=t,this.geometryTypes=[\"point\",\"multipoint\",\"polyline\",\"polygon\"],this.previousCoordinate=[0,0],this.transform=null,this.applyTransform=u,this.lengths=[],this.currentLengthIndex=0,this.toAddInCurrentPath=0,this.vertexDimension=0,this.coordinateBuffer=null,this.coordinateBufferPtr=0,this._attributesConstructor=()=>{}}createFeatureResult(){return new i}finishFeatureResult(t){if(this.options.applyTransform&&(t.transform=null),this._attributesConstructor=()=>{},this.coordinateBuffer=null,this.lengths.length=0,!t.hasZ)return;const r=s(t.geometryType,this.options.sourceSpatialReference,t.spatialReference);if(!e(r))for(const e of t.features)r(e.geometry)}createSpatialReference(){return new o}addField(t,e){t.fields.push(l.fromJSON(e));const r=t.fields.map((t=>t.name));this._attributesConstructor=function(){for(const t of r)this[t]=null}}addFeature(t,e){const r=this.options.maxStringAttributeLength?this.options.maxStringAttributeLength:0;if(r>0)for(const o in e.attributes){const t=e.attributes[o];\"string\"==typeof t&&t.length>r&&(e.attributes[o]=\"\")}t.features.push(e)}addQueryGeometry(t,e){const{queryGeometry:r,queryGeometryType:o}=e,s=a(r.clone(),r,!1,!1,this.transform),i=h(s,o,!1,!1);let n=null;switch(o){case\"esriGeometryPoint\":n=\"point\";break;case\"esriGeometryPolygon\":n=\"polygon\";break;case\"esriGeometryPolyline\":n=\"polyline\";break;case\"esriGeometryMultipoint\":n=\"multipoint\"}i.type=n,t.queryGeometryType=o,t.queryGeometry=i}prepareFeatures(e){switch(this.transform=e.transform,this.options.applyTransform&&e.transform&&(this.applyTransform=this._deriveApplyTransform(e)),this.vertexDimension=2,e.hasZ&&this.vertexDimension++,e.hasM&&this.vertexDimension++,e.geometryType){case\"point\":this.addCoordinate=(t,e,r)=>this.addCoordinatePoint(t,e,r),this.createGeometry=t=>this.createPointGeometry(t);break;case\"polygon\":this.addCoordinate=(t,e,r)=>this._addCoordinatePolygon(t,e,r),this.createGeometry=t=>this._createPolygonGeometry(t);break;case\"polyline\":this.addCoordinate=(t,e,r)=>this._addCoordinatePolyline(t,e,r),this.createGeometry=t=>this._createPolylineGeometry(t);break;case\"multipoint\":this.addCoordinate=(t,e,r)=>this._addCoordinateMultipoint(t,e,r),this.createGeometry=t=>this._createMultipointGeometry(t);break;case\"mesh\":case\"extent\":break;default:t(e.geometryType)}}createFeature(){return this.lengths.length=0,this.currentLengthIndex=0,this.previousCoordinate[0]=0,this.previousCoordinate[1]=0,new n(r(),null,new this._attributesConstructor)}allocateCoordinates(){const t=this.lengths.reduce(((t,e)=>t+e),0);this.coordinateBuffer=new Float64Array(t*this.vertexDimension),this.coordinateBufferPtr=0}addLength(t,e,r){0===this.lengths.length&&(this.toAddInCurrentPath=e),this.lengths.push(e)}createPointGeometry(t){const e={type:\"point\",x:0,y:0,spatialReference:t.spatialReference,hasZ:!!t.hasZ,hasM:!!t.hasM};return e.hasZ&&(e.z=0),e.hasM&&(e.m=0),e}addCoordinatePoint(t,e,r){switch(e=this.applyTransform(this.transform,e,r,0),r){case 0:t.x=e;break;case 1:t.y=e;break;case 2:t.hasZ?t.z=e:t.m=e;break;case 3:t.m=e}}_transformPathLikeValue(t,e){let r=0;return e<=1&&(r=this.previousCoordinate[e],this.previousCoordinate[e]+=t),this.applyTransform(this.transform,t,e,r)}_addCoordinatePolyline(t,e,r){this._dehydratedAddPointsCoordinate(t.paths,e,r)}_addCoordinatePolygon(t,e,r){this._dehydratedAddPointsCoordinate(t.rings,e,r)}_addCoordinateMultipoint(t,e,r){0===r&&t.points.push([]);const o=this._transformPathLikeValue(e,r);t.points[t.points.length-1].push(o)}_createPolygonGeometry(t){return{type:\"polygon\",rings:[[]],spatialReference:t.spatialReference,hasZ:!!t.hasZ,hasM:!!t.hasM}}_createPolylineGeometry(t){return{type:\"polyline\",paths:[[]],spatialReference:t.spatialReference,hasZ:!!t.hasZ,hasM:!!t.hasM}}_createMultipointGeometry(t){return{type:\"multipoint\",points:[],spatialReference:t.spatialReference,hasZ:!!t.hasZ,hasM:!!t.hasM}}_dehydratedAddPointsCoordinate(t,e,r){0===r&&0==this.toAddInCurrentPath--&&(t.push([]),this.toAddInCurrentPath=this.lengths[++this.currentLengthIndex]-1,this.previousCoordinate[0]=0,this.previousCoordinate[1]=0);const o=this._transformPathLikeValue(e,r),s=t[t.length-1];0===r&&s.push(new Float64Array(this.coordinateBuffer.buffer,this.coordinateBufferPtr*Float64Array.BYTES_PER_ELEMENT,this.vertexDimension)),this.coordinateBuffer[this.coordinateBufferPtr++]=o}_deriveApplyTransform(t){const{hasZ:e,hasM:r}=t;return e&&r?f:e?d:r?c:p}}export{g as DehydratedFeatureSetParserContext};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{DehydratedFeatureSetParserContext as e}from\"../../../rest/query/operations/pbfDehydratedFeatureSet.js\";import{parsePBFFeatureQuery as r}from\"../../../rest/query/operations/pbfQueryUtils.js\";class t{_parseFeatureQuery(t){const s=r(t.buffer,new e(t.options)),o={...s,spatialReference:s.spatialReference.toJSON(),fields:s.fields?s.fields.map((e=>e.toJSON())):void 0};return Promise.resolve(o)}}function s(){return new t}export{s as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{estimateAttributesObjectSize as e}from\"../../core/byteSizeEstimations.js\";import\"../../core/has.js\";import{isSome as t,isNone as s}from\"../../core/maybe.js\";import{estimateSize as r}from\"../../core/typedArrayUtil.js\";import{generateUID as n}from\"../../core/uid.js\";import o from\"../../geometry/SpatialReference.js\";import{create as a,empty as i,expandWithNestedArray as l,expandWithAABB as p}from\"../../geometry/support/aaBoundingBox.js\";import{create as c,empty as u,expandWithNestedArray as h,expand as m}from\"../../geometry/support/aaBoundingRect.js\";import{unquantizePolyline as y,unquantizePolygon as f,unquantizeMultipoint as g,unquantizePoint as d}from\"../../geometry/support/quantizationUtils.js\";import{isFeatureGeometryType as b,featureGeometryTypeKebabDictionary as x}from\"../../geometry/support/typeUtils.js\";import Z from\"../support/Field.js\";export{equals}from\"./dehydratedFeatureComparison.js\";class j{constructor(e,t,s){this.uid=e,this.geometry=t,this.attributes=s,this.visible=!0,this.objectId=null,this.centroid=null}}function M(e){return t(e.geometry)}function k(e){return b(e.type)}class N{constructor(){this.exceededTransferLimit=!1,this.features=[],this.fields=[],this.hasM=!1,this.hasZ=!1,this.geometryType=null,this.objectIdFieldName=null,this.globalIdFieldName=null,this.geometryProperties=null,this.geohashFieldName=null,this.spatialReference=null,this.transform=null}}function z(e){const s=x.fromJSON(e.geometryType),r=o.fromJSON(e.spatialReference),n=e.transform,a=e.features.map((o=>{const a=F(o,s,r,e.objectIdFieldName),i=a.geometry;if(t(i)&&n)switch(i.type){case\"point\":a.geometry=d(n,i,i,i.hasZ,i.hasM);break;case\"multipoint\":a.geometry=g(n,i,i,i.hasZ,i.hasM);break;case\"polygon\":a.geometry=f(n,i,i,i.hasZ,i.hasM);break;case\"polyline\":a.geometry=y(n,i,i,i.hasZ,i.hasM);break;case\"extent\":case\"mesh\":a.geometry=i}return a}));return{geometryType:s,features:a,spatialReference:r,fields:e.fields?e.fields.map((e=>Z.fromJSON(e))):null,objectIdFieldName:e.objectIdFieldName,globalIdFieldName:e.globalIdFieldName,geohashFieldName:e.geohashFieldName,geometryProperties:e.geometryProperties,hasZ:e.hasZ,hasM:e.hasM,exceededTransferLimit:e.exceededTransferLimit,transform:null}}function F(e,t,s,r){return{uid:n(),objectId:r&&e.attributes?e.attributes[r]:null,attributes:e.attributes,geometry:I(e.geometry,t,s),visible:!0}}function I(e,t,r){if(s(e))return null;switch(t){case\"point\":{const t=e;return{x:t.x,y:t.y,z:t.z,m:t.m,hasZ:null!=t.z,hasM:null!=t.m,type:\"point\",spatialReference:r}}case\"polyline\":{const t=e;return{paths:t.paths,hasZ:!!t.hasZ,hasM:!!t.hasM,type:\"polyline\",spatialReference:r}}case\"polygon\":{const t=e;return{rings:t.rings,hasZ:!!t.hasZ,hasM:!!t.hasM,type:\"polygon\",spatialReference:r}}case\"multipoint\":{const t=e;return{points:t.points,hasZ:!!t.hasZ,hasM:!!t.hasM,type:\"multipoint\",spatialReference:r}}}}function v(e,t,s,r){return{x:e,y:t,z:s,hasZ:null!=s,hasM:!1,spatialReference:r,type:\"point\"}}function R(e){if(s(e))return 0;let t=32;switch(e.type){case\"point\":t+=42;break;case\"polyline\":case\"polygon\":{let s=0;const r=2+(e.hasZ?1:0)+(e.hasM?1:0),n=\"polyline\"===e.type?e.paths:e.rings;for(const e of n)s+=e.length;t+=8*s*r+64,t+=128*s,t+=34,t+=32*(n.length+1);break}case\"multipoint\":{const s=2+(e.hasZ?1:0)+(e.hasM?1:0),r=e.points.length;t+=8*r*s+64,t+=128*r,t+=34,t+=32;break}case\"extent\":t+=98,e.hasM&&(t+=32),e.hasZ&&(t+=32);break;case\"mesh\":t+=r(e.vertexAttributes.position),t+=r(e.vertexAttributes.normal),t+=r(e.vertexAttributes.uv),t+=r(e.vertexAttributes.tangent)}return t}function A(t){let s=32;return s+=e(t.attributes),s+=3,s+=8+R(t.geometry),s}function w(e){if(s(e))return 0;switch(e.type){case\"point\":return 1;case\"polyline\":{let t=0;for(const s of e.paths)t+=s.length;return t}case\"polygon\":{let t=0;for(const s of e.rings)t+=s.length;return t}case\"multipoint\":return e.points.length;case\"extent\":return 2;case\"mesh\":{const t=e.vertexAttributes&&e.vertexAttributes.position;return t?t.length/3:0}default:return}}function S(e){if(s(e))return!1;switch(e.type){case\"extent\":case\"point\":return!0;case\"polyline\":for(const t of e.paths)if(t.length>0)return!0;return!1;case\"polygon\":for(const t of e.rings)if(t.length>0)return!0;return!1;case\"multipoint\":return e.points.length>0;case\"mesh\":return!e.loaded||e.vertexAttributes.position.length>0}}function T(e,t){switch(i(t),\"mesh\"===e.type&&(e=e.extent),e.type){case\"point\":t[0]=t[3]=e.x,t[1]=t[4]=e.y,e.hasZ&&(t[2]=t[5]=e.z);break;case\"polyline\":for(let s=0;s<e.paths.length;s++)l(t,e.paths[s],e.hasZ);break;case\"polygon\":for(let s=0;s<e.rings.length;s++)l(t,e.rings[s],e.hasZ);break;case\"multipoint\":l(t,e.points,e.hasZ);break;case\"extent\":t[0]=e.xmin,t[1]=e.ymin,t[3]=e.xmax,t[4]=e.ymax,null!=e.zmin&&(t[2]=e.zmin),null!=e.zmax&&(t[5]=e.zmax)}}function B(e,t){T(e,P),p(t,P)}function J(e,t){switch(u(t),\"mesh\"===e.type&&(e=e.extent),e.type){case\"point\":t[0]=t[2]=e.x,t[1]=t[3]=e.y;break;case\"polyline\":for(let s=0;s<e.paths.length;s++)h(t,e.paths[s]);break;case\"polygon\":for(let s=0;s<e.rings.length;s++)h(t,e.rings[s]);break;case\"multipoint\":h(t,e.points);break;case\"extent\":t[0]=e.xmin,t[1]=e.ymin,t[2]=e.xmax,t[3]=e.ymax}}function L(e,s){t(e)&&(J(e,U),m(s,U,s))}function O(e,t){return null!=e.objectId?e.objectId:e.attributes&&t?e.attributes[t]:null}const P=a(),U=c();export{j as DehydratedFeatureClass,N as DehydratedFeatureSetClass,T as computeAABB,J as computeAABR,R as estimateGeometryObjectSize,A as estimateSize,B as expandAABB,L as expandAABR,z as fromFeatureSetJSON,I as fromJSONGeometry,O as getObjectId,M as hasGeometry,S as hasVertices,k as isFeatureGeometry,v as makeDehydratedPoint,w as numVertices};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport\"../../core/has.js\";import{isNone as e}from\"../../core/maybe.js\";function n(e,n){if(e===n)return!0;if(null==e||null==n)return!1;if(e.length!==n.length)return!1;for(let t=0;t<e.length;t++){const r=e[t],a=n[t];if(r.length!==a.length)return!1;for(let e=0;e<r.length;e++)if(r[e]!==a[e])return!1}return!0}function t(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!n(e[r],t[r]))return!1;return!0}function r(e,n){return!!f(e.spatialReference,n.spatialReference)&&(e.x===n.x&&e.y===n.y&&e.z===n.z&&e.m===n.m)}function a(e,n){return e.hasZ===n.hasZ&&e.hasM===n.hasM&&(!!f(e.spatialReference,n.spatialReference)&&t(e.paths,n.paths))}function i(e,n){return e.hasZ===n.hasZ&&e.hasM===n.hasM&&(!!f(e.spatialReference,n.spatialReference)&&t(e.rings,n.rings))}function u(e,t){return e.hasZ===t.hasZ&&e.hasM===t.hasM&&(!!f(e.spatialReference,t.spatialReference)&&n(e.points,t.points))}function s(e,n){return e.hasZ===n.hasZ&&e.hasM===n.hasM&&(!!f(e.spatialReference,n.spatialReference)&&(e.xmin===n.xmin&&e.ymin===n.ymin&&e.zmin===n.zmin&&e.xmax===n.xmax&&e.ymax===n.ymax&&e.zmax===n.zmax))}function f(e,n){return e===n||e&&n&&e.equals(n)}function l(n,t){if(n===t)return!0;if(e(n)||e(t))return!1;if(n.type!==t.type)return!1;switch(n.type){case\"point\":return r(n,t);case\"extent\":return s(n,t);case\"polyline\":return a(n,t);case\"polygon\":return i(n,t);case\"multipoint\":return u(n,t);case\"mesh\":return!1;default:return}}function c(e,n){if(e===n)return!0;if(!e||!n)return!1;const t=Object.keys(e),r=Object.keys(n);if(t.length!==r.length)return!1;for(const a of t)if(e[a]!==n[a])return!1;return!0}function o(e,n){return e===n||null!=e&&null!=n&&e.objectId===n.objectId&&(!!l(e.geometry,n.geometry)&&!!c(e.attributes,n.attributes))}export{o as equals,r as pointEquals};\n"],"sourceRoot":""}