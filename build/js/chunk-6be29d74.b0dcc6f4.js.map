{"version":3,"sources":["webpack:///./node_modules/@arcgis/core/core/floatRGBA.js","webpack:///./node_modules/@arcgis/core/views/2d/arcade/callExpressionWithFeature.js","webpack:///./node_modules/@arcgis/core/symbols/support/previewCIMSymbol.js"],"names":["o","r","e","i","t","f","Math","floor","l","n","Uint8ClampedArray","s","a","referencesGeometry","u","repurposeFeature","evaluate","$feature","c","getLogger","warn","Map","transform","hasZ","hasM","has","set","get","geometry","error","maxSize","async","size","node","m","opacity","p","cimOptions","feature","y","fieldMap","h","geometryType","style","d","g","w","b","min","clone","preserveOutlineWidth","M","data","symbol","type","S","rasterizeCIMSymbolAsync","scaleFactor","j","document","createElement","width","imageData","height","getContext","putImageData","x","z","scale","ceil","C","Image","src","toDataURL","D","effectView","shape","fill","stroke","offset","appendChild"],"mappings":"kHAAA,oFAIuC,SAASA,EAAEA,EAAEC,EAAEC,EAAE,GAAG,MAAMC,EAAEC,eAAEJ,EAAE,EAAEK,GAAG,IAAI,IAAID,EAAE,EAAEA,EAAE,EAAEA,IAAIH,EAAEC,EAAEE,GAAGE,KAAKC,MAAM,IAAIC,EAAEL,EAAEM,EAAEL,KAAK,SAASH,EAAEG,EAAEJ,EAAE,GAAG,IAAIC,EAAE,EAAE,IAAI,IAAIQ,EAAE,EAAEA,EAAE,EAAEA,IAAIR,GAAGG,EAAEJ,EAAES,GAAGP,EAAEO,GAAG,OAAOR,EAAE,MAAMQ,EAAE,CAAC,EAAE,IAAI,MAAM,UAAUP,EAAE,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,SAAS,EAAE,YAAYG,EAAEJ,EAAE,IAAIS,kBAAkB,CAAC,IAAI,IAAI,IAAI,OAAO,SAASF,EAAEJ,GAAG,OAAOA,EAAEE,KAAKC,MAAMH,K,oCCJhW,0EAIuO,SAASO,EAAET,EAAEE,EAAEJ,EAAES,EAAEG,GAAG,MAAMD,EAAET,EAAEW,sBAAsBD,EAAEE,EAAEV,EAAEK,EAAEG,GAAGR,EAAED,EAAED,EAAEa,iBAAiBJ,GAAG,IAAI,OAAOT,EAAEc,SAAS,IAAIhB,EAAEiB,SAASd,IAAI,MAAMe,GAAG,OAAOjB,OAAEkB,UAAU,wCAAwCC,KAAK,oCAAoCF,GAAG,MAAM,MAAMf,EAAE,IAAIkB,IAAI,SAASP,EAAEZ,EAAED,EAAEG,GAAG,MAAMkB,UAAUtB,EAAEuB,KAAKd,EAAEe,KAAKZ,GAAGR,EAAED,EAAEsB,IAAIxB,IAAIE,EAAEuB,IAAIzB,EAAEiB,EAAEjB,IAAI,MAAMU,EAAER,EAAEwB,IAAI1B,EAANE,CAASD,EAAE0B,SAAS5B,EAAES,EAAEG,GAAG,MAAM,IAAIV,EAAE0B,SAASjB,GAAG,SAASO,EAAEP,GAAG,MAAMR,EAAE,GAAG,OAAOQ,GAAG,IAAI,oBAAoB,MAAM,CAACT,EAAED,EAAEG,EAAEJ,IAAIY,eAAEX,EAAEE,EAAED,EAAEE,EAAEJ,GAAG,IAAI,sBAAsB,MAAM,CAACE,EAAED,EAAEG,EAAEJ,IAAIS,eAAER,EAAEE,EAAED,EAAEE,EAAEJ,GAAG,IAAI,uBAAuB,MAAM,CAACE,EAAED,EAAEG,EAAEK,IAAIT,eAAEC,EAAEE,EAAED,EAAEE,EAAEK,GAAG,IAAI,yBAAyB,MAAM,CAACP,EAAED,EAAED,EAAES,IAAIL,eAAEH,EAAEE,EAAED,EAAEF,EAAES,GAAG,QAAQ,OAAOR,OAAEkB,UAAU,wCAAwCU,MAAM,IAAI3B,OAAE,iBAAkB,kCAAiCS,IAAMT,GAAGA,K,kCCJzgC,wHAI0S,MAAMS,EAAE,IAAIP,yBAAE,MAAK,GAAIK,EAAEG,OAAEkB,QAAQC,eAAe9B,EAAEG,EAAEQ,EAAE,IAAI,MAAMoB,KAAK/B,EAAE6B,QAAQZ,EAAEe,KAAKC,EAAEC,QAAQ9B,GAAGO,EAAEwB,EAAExB,EAAEyB,YAAYzB,GAAG0B,QAAQC,EAAEC,SAASC,EAAEC,aAAa5B,EAAE6B,MAAMC,GAAGR,EAAES,EAAE1C,eAAEC,GAAG0C,EAAE,iBAAiB7C,EAAEA,EAAE,KAAK8C,EAAEzC,KAAK0C,IAAI,MAAMF,EAAEA,EAAED,EAAE,MAAM3B,EAAEA,EAAEhB,eAAEO,IAAIsC,IAAIF,IAAIzC,EAAEA,EAAE6C,QAAQzC,eAAEJ,EAAE2C,EAAE,CAACG,sBAAqB,KAAM,IAAIC,EAAE,EAAE/C,GAAGA,EAAEgD,MAAMhD,EAAEgD,KAAKC,QAAQ,mBAAmBjD,EAAEgD,KAAKC,OAAOC,OAAOH,EAAE,GAAG,MAAMI,QAAQ5C,EAAE6C,wBAAwBpD,EAAEmC,EAAEE,EAAE3B,EAAE,CAAC2C,YAAYN,EAAER,MAAMC,IAAIc,EAAEC,SAASC,cAAc,UAAUF,EAAEG,MAAMN,EAAEO,UAAUD,MAAMH,EAAEK,OAAOR,EAAEO,UAAUC,OAAOL,EAAEM,WAAW,MAAMC,aAAaV,EAAEO,UAAU,EAAE,GAAG,IAAII,EAAER,EAAEG,MAAMV,EAAEgB,EAAET,EAAEK,OAAOZ,EAAE,GAAG,MAAMlD,IAAI,aAAMW,OAAN,EAAMA,EAAGwD,QAAT,MAAgBxD,KAAGwD,OAAO,CAAC,MAAMlE,EAAEgE,EAAEC,EAAED,EAAEhE,GAAG,EAAEI,KAAK+D,KAAKtB,EAAE7C,GAAG6C,EAAEoB,EAAEjE,GAAG,EAAE6C,EAAEzC,KAAK+D,KAAKtB,EAAE7C,GAAG,MAAMoE,EAAE,IAAIC,MAAML,EAAEC,GAAGG,EAAEE,IAAId,EAAEe,YAAY,MAAMpE,IAAIiE,EAAE3B,MAAMR,QAAS,GAAE9B,GAAK,IAAIqE,EAAEJ,EAAE,GAAG,MAAM1D,EAAE+D,WAAW,CAAC,MAAMzE,EAAE,CAAC0E,MAAM,CAACtB,KAAK,QAAQY,EAAE,EAAE3B,EAAE,EAAEsB,MAAMK,EAAEH,OAAOI,EAAEK,IAAIF,EAAEE,KAAKK,KAAK,KAAKC,OAAO,KAAKC,OAAO,CAAC,EAAE,IAAIL,EAAE1E,eAAE,CAAC,CAACE,IAAI,CAACgE,EAAEC,GAAG,CAACQ,WAAW/D,EAAE+D,aAAa,OAAOzC,GAAGA,EAAE8C,YAAYN,GAAGA","file":"js/chunk-6be29d74.b0dcc6f4.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{clamp as t}from\"./mathUtils.js\";function o(o,r,e=0){const i=t(o,0,f);for(let t=0;t<4;t++)r[e+t]=Math.floor(256*l(i*n[t]))}function r(t,o=0){let r=0;for(let n=0;n<4;n++)r+=t[o+n]*e[n];return r}const n=[1,256,65536,16777216],e=[1/256,1/65536,1/16777216,1/4294967296],f=r(new Uint8ClampedArray([255,255,255,255]));function l(t){return t-Math.floor(t)}export{o as packFloatRGBA,r as unpackFloatRGBA};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport e from\"../../../core/Error.js\";import r from\"../../../core/Logger.js\";import{unquantizeMultipoint as t,unquantizePolyline as o,unquantizePolygon as n,unquantizePoint as a}from\"../../../geometry/support/quantizationUtils.js\";function s(e,t,o,n,a){const s=e.referencesGeometry()&&a?u(t,n,a):t,i=e.repurposeFeature(s);try{return e.evaluate({...o,$feature:i})}catch(c){return r.getLogger(\"esri.views.2d.support.arcadeOnDemand\").warn(\"Feature arcade evaluation failed:\",c),null}}const i=new Map;function u(e,r,t){const{transform:o,hasZ:n,hasM:a}=t;i.has(r)||i.set(r,c(r));const s=i.get(r)(e.geometry,o,n,a);return{...e,geometry:s}}function c(s){const i={};switch(s){case\"esriGeometryPoint\":return(e,r,t,o)=>a(r,i,e,t,o);case\"esriGeometryPolygon\":return(e,r,t,o)=>n(r,i,e,t,o);case\"esriGeometryPolyline\":return(e,r,t,n)=>o(r,i,e,t,n);case\"esriGeometryMultipoint\":return(e,r,o,n)=>t(r,i,e,o,n);default:return r.getLogger(\"esri.views.2d.support.arcadeOnDemand\").error(new e(\"mapview-arcade\",`Unable to handle geometryType: ${s}`)),e=>e}}export{s as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{px2pt as e}from\"../../core/screenUtils.js\";import{CIMSymbolRasterizer as t}from\"../cim/CIMSymbolRasterizer.js\";import{getCIMSymbolSize as i,scaleCIMSymbolTo as l}from\"./cimSymbolUtils.js\";import{SymbolSizeDefaults as a}from\"./previewUtils.js\";import{renderSymbol as o}from\"./renderUtils.js\";const s=new t(null,!0),n=a.maxSize;async function r(t,a={}){const{size:r,maxSize:c,node:m,opacity:f}=a,p=a.cimOptions||a,{feature:y,fieldMap:h,geometryType:u,style:d}=p,g=i(t),w=\"number\"==typeof r?r:null,b=Math.min(null!=w?w:g,null!=c?c:e(n));b!==g&&(t=t.clone(),l(t,b,{preserveOutlineWidth:!0}));let M=3;t&&t.data&&t.data.symbol&&\"CIMPointSymbol\"!==t.data.symbol.type&&(M=1);const S=await s.rasterizeCIMSymbolAsync(t,y,h,u,{scaleFactor:M,style:d}),j=document.createElement(\"canvas\");j.width=S.imageData.width,j.height=S.imageData.height;j.getContext(\"2d\").putImageData(S.imageData,0,0);let x=j.width/M,z=j.height/M;if(null!=r&&(null==a?.scale||a?.scale)){const e=x/z;x=e<=1?Math.ceil(b*e):b,z=e<=1?b:Math.ceil(b/e)}const C=new Image(x,z);C.src=j.toDataURL(),null!=f&&(C.style.opacity=`${f}`);let D=C;if(null!=a.effectView){const e={shape:{type:\"image\",x:0,y:0,width:x,height:z,src:C.src},fill:null,stroke:null,offset:[0,0]};D=o([[e]],[x,z],{effectView:a.effectView})}return m&&m.appendChild(D),D}export{r as previewCIMSymbol};\n"],"sourceRoot":""}