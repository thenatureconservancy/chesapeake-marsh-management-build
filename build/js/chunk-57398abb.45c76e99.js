(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-57398abb"],{"0f2e":function(t,e,n){"use strict";n.d(e,"a",(function(){return f}));var i=n("b2b2"),r=n("b66e"),o=(n("e06a"),n("f315")),a=n("ea51"),s=n("8188"),c=n("40b6"),l=n("41ef"),u=n("5996");function p(t){const{spatialReference:e}=t;return Object(l["a"])(e,h,b,d,t)}function h(t){return Object(o["b"])(Math.abs(Object(c["b"])([t],"square-meters")[0]),"square-meters")}function b(t){try{return Object(o["b"])(Math.abs(Object(a["geodesicArea"])(t,"square-meters")),"square-meters")}catch(e){return null}}function d(t){const e=[];return Object(s["s"])(t,e)?Object(o["b"])(Math.abs(Object(c["b"])([{type:"polygon",rings:e,spatialReference:u["a"].WGS84}],"square-meters")[0]),"square-meters"):null}function f(t,e,n=Object(r["a"])()){if(e){const e=p(t);return Object(i["k"])(e)?e:Object(r["b"])(t,n)}return Object(r["c"])(t,n)}},3170:function(t,e,n){"use strict";n.d(e,"a",(function(){return O})),n.d(e,"b",(function(){return j})),n.d(e,"c",(function(){return d})),n.d(e,"d",(function(){return g})),n.d(e,"e",(function(){return f})),n.d(e,"f",(function(){return h})),n.d(e,"g",(function(){return p})),n.d(e,"h",(function(){return m})),n.d(e,"i",(function(){return v}));var i=n("b2b2"),r=n("f315"),o=n("8048"),a=n("e431"),s=n("0b2d"),c=n("8188"),l=n("7f83"),u=n("d245");function p(t){return b(t,"direct")}function h(t){return b(t,"horizontal")}function b(t,e){const{hasZ:n,spatialReference:a}=t,s=Object(u["a"])(a);let c=0;const l=Object(o["n"])(s);if(Object(i["j"])(l))return null;const p="direct"===e?j:g;for(const r of t.paths){if(r.length<2)continue;const t=r.length-1;for(let e=0;e<t;++e){const t=r[e];_[0]=t[0],_[1]=t[1],_[2]=n?t[2]:0;const o=r[e+1];w[0]=o[0],w[1]=o[1],w[2]=n?o[2]:0;const s=p(_,w,a);if(Object(i["j"])(s))return null;c+=s.value}}return Object(r["c"])(c,l)}function d(t,e){const{spatialReference:n}=t;return Object(l["d"])(n,e.spatialReference)?(_[0]=t.x,_[1]=t.y,_[2]=t.hasZ?t.z:0,w[0]=e.x,w[1]=e.y,w[2]=e.hasZ?e.z:0,j(_,w,n)):null}function f(t,e){const{spatialReference:n}=t;return Object(l["d"])(n,e.spatialReference)?(_[0]=t.x,_[1]=t.y,_[2]=t.hasZ?t.z:0,w[0]=e.x,w[1]=e.y,w[2]=e.hasZ?e.z:0,g(_,w,n)):null}function v(t,e){const{spatialReference:n}=t;return Object(l["d"])(n,e.spatialReference)?(_[0]=t.x,_[1]=t.y,_[2]=t.hasZ?t.z:0,w[0]=e.x,w[1]=e.y,w[2]=e.hasZ?e.z:0,m(_,w,n)):null}function O(t){return _[0]=t.x,_[1]=t.y,_[2]=t.hasZ?t.z:0,x(_,t.spatialReference)}function j(t,e,n){const o=y(t,e,n,"direct");return Object(i["k"])(o)?Object(r["c"])(o.direct,o.unit):null}function g(t,e,n){const o=y(t,e,n,"horizontal");return Object(i["k"])(o)?Object(r["c"])(o.horizontal,o.unit):null}function m(t,e,n){const o=y(t,e,n,"vertical");return Object(i["k"])(o)?Object(r["c"])(o.verticalSigned,o.unit):null}function x(t,e){const n=Object(o["z"])(e);return Object(i["k"])(n)?Object(r["c"])(t[2],n):null}function y(t,e,n,r){const s=Object(u["a"])(n),l=Object(o["n"])(s);if(Object(i["j"])(l))return null;const p=e[2]-t[2];if("vertical"===r)return{verticalSigned:p,unit:l};if(!Object(c["w"])(t,n,T,s)||!Object(c["w"])(e,n,k,s))return null;if("direct"===r)return{direct:Object(a["m"])(k,T),unit:l};if(Object(a["w"])(S,t[0],t[1],e[2]),!Object(c["w"])(S,n,S,s))return null;const h=Object(a["m"])(S,k);return"horizontal"===r?{horizontal:h,unit:l}:{direct:Object(a["m"])(k,T),horizontal:h,vertical:Math.abs(p),unit:l}}const _=Object(s["f"])(),w=Object(s["f"])(),T=Object(s["f"])(),k=Object(s["f"])(),S=Object(s["f"])()},"41ef":function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var i=n("40b6"),r=n("7f83");function o(t,e,n,o,...a){return Object(r["h"])(t)&&Object(i["f"])(t)?e.apply(void 0,a):Object(r["p"])(t)?n.apply(void 0,a):o.apply(void 0,a)}},4492:function(t,e,n){"use strict";n.d(e,"a",(function(){return X}));var i=n("a4ee"),r=n("fc29"),o=n("b2b2"),a=n("477c"),s=n("59b2"),c=(n("b50f"),n("c120"),n("cea0"),n("d386"));const l="esri-tooltip",u=l+"-content";n("e92d"),n("2dd4"),n("1b8f");var p=n("7617"),h=n("8048"),b=n("121a"),d=n("702a"),f=n("755e"),v=n("21e2");let O=class extends b["a"]{constructor(){super(...arguments),this._messagesUnits=null,this._messagesTooltip=null}get _units(){const t=Object(h["e"])(this.tooltip.view);return{length:t,verticalLength:t,area:t}}_formatScale(t){return Object(v["b"])(t,{style:"percent",maximumFractionDigits:0})}_formatRelativeOrientation(t){return Object(v["b"])(t,{maximumFractionDigits:2,minimumFractionDigits:2,signDisplay:"exceptZero"})}_formatLength(t,e,n){return Object(p["c"])(this._messagesUnits,t,Object(o["s"])(e,this._units.length),n)}_formatRelativeLength(t){return Object(p["e"])(this._messagesUnits,t,this._units.length)}_formatVerticalLength(t){return Object(p["g"])(this._messagesUnits,t,this._units.verticalLength)}_formatRelativeVerticalLength(t){return Object(p["f"])(this._messagesUnits,t,this._units.verticalLength)}_formatTotalLength(t){return Object(p["c"])(this._messagesUnits,t,this._units.length)}_formatArea(t){return Object(p["b"])(this._messagesUnits,t,this._units.area)}_formatPercentage(t){return Object(v["b"])(t.value,{style:"percent"})}};Object(i["a"])([Object(s["b"])()],O.prototype,"info",void 0),Object(i["a"])([Object(s["b"])()],O.prototype,"tooltip",void 0),Object(i["a"])([Object(s["b"])()],O.prototype,"_units",null),Object(i["a"])([Object(f["a"])("esri/core/t9n/Units"),Object(s["b"])()],O.prototype,"_messagesUnits",void 0),Object(i["a"])([Object(f["a"])("esri/views/interactive/tooltip/t9n/Tooltip"),Object(s["b"])()],O.prototype,"_messagesTooltip",void 0),O=Object(i["a"])([Object(c["a"])("esri.views.interactive.tooltip.content.TooltipContent")],O);var j=n("d822");const g=l+"-field",m={base:g,title:g+"__title",value:g+"__value"};let x=class extends b["a"]{render(){return Object(j["a"])("div",{class:m.base},Object(j["a"])("div",{class:m.title},this.title),Object(j["a"])("div",{class:m.value},this.value))}};Object(i["a"])([Object(s["b"])()],x.prototype,"title",void 0),Object(i["a"])([Object(s["b"])()],x.prototype,"value",void 0),x=Object(i["a"])([Object(c["a"])("esri.views.interactive.tooltip.support.TooltipField")],x);const y={base:`${u} ${u+"--draw-point"}`};let _=class extends O{render(){var t;const{elevation:e}=this.info,n=null==(t=this._messagesTooltip)?void 0:t.sketch;return Object(j["a"])("div",{class:y.base},Object(j["a"])(x,{title:null==n?void 0:n.elevation,value:this._formatVerticalLength(e)}))}};_=Object(i["a"])([Object(c["a"])("esri.views.interactive.tooltip.content.TooltipContentDrawPoint")],_);const w={base:`${u} ${u+"--draw-polygon"}`};let T=class extends O{render(){var t;const{area:e,elevation:n}=this.info,i=null==(t=this._messagesTooltip)?void 0:t.sketch;return Object(j["a"])("div",{class:w.base},Object(j["a"])(x,{title:null==i?void 0:i.elevation,value:this._formatVerticalLength(n)}),Object(j["a"])(x,{title:null==i?void 0:i.area,value:this._formatArea(e)}))}};T=Object(i["a"])([Object(c["a"])("esri.views.interactive.tooltip.content.TooltipContentDrawPolygon")],T);const k={base:`${u} ${u+"--draw-polyline"}`};let S=class extends O{render(){var t;const{elevation:e,totalLength:n}=this.info,i=null==(t=this._messagesTooltip)?void 0:t.sketch;return Object(j["a"])("div",{class:k.base},Object(j["a"])(x,{title:null==i?void 0:i.elevation,value:this._formatVerticalLength(e)}),Object(j["a"])(x,{title:null==i?void 0:i.totalLength,value:this._formatLength(n)}))}};S=Object(i["a"])([Object(c["a"])("esri.views.interactive.tooltip.content.TooltipContentDrawPolyline")],S);const C={base:`${u} ${u+"--extent-rotate"}`};let M=class extends O{render(){var t;const{angle:e}=this.info,n=null==(t=this._messagesTooltip)?void 0:t.sketch;return Object(j["a"])("div",{class:C.base},Object(j["a"])(x,{title:null==n?void 0:n.rotation,value:this._formatRelativeOrientation(e)}))}};M=Object(i["a"])([Object(c["a"])("esri.views.interactive.tooltip.content.TooltipContentExtentRotate")],M);const V={base:l+"-value-by-value"};let P=class extends b["a"]{constructor(){super(...arguments),this.divider="Ã—"}render(){return Object(j["a"])("div",{class:V.base},Object(j["a"])("span",null,this.left),Object(j["a"])("span",null,this.divider),Object(j["a"])("span",null,this.right))}};Object(i["a"])([Object(s["b"])()],P.prototype,"left",void 0),Object(i["a"])([Object(s["b"])()],P.prototype,"divider",void 0),Object(i["a"])([Object(s["b"])()],P.prototype,"right",void 0),P=Object(i["a"])([Object(c["a"])("esri.views.interactive.tooltip.support.ValueByValue")],P);const I={base:`${u} ${u+"--extent-scale"}`};let R=class extends O{render(){var t;const{xScale:e,yScale:n,xSize:i,ySize:r}=this.info,o=null==(t=this._messagesTooltip)?void 0:t.sketch;return Object(j["a"])("div",{class:I.base},Object(j["a"])(x,{title:null==o?void 0:o.size,value:Object(j["a"])(P,{left:this._formatLength(i),right:this._formatLength(r)})}),Object(j["a"])(x,{title:null==o?void 0:o.scale,value:Object(j["a"])(P,{left:this._formatScale(e),right:this._formatScale(n)})}))}};R=Object(i["a"])([Object(c["a"])("esri.views.interactive.tooltip.content.TooltipContentExtentScale")],R);const Z={base:`${u} ${u+"--reshape-edge-offset"}`};let D=class extends O{render(){var t;const{distance:e}=this.info,n=null==(t=this._messagesTooltip)?void 0:t.sketch;return Object(j["a"])("div",{class:Z.base},Object(j["a"])(x,{title:null==n?void 0:n.distance,value:this._formatRelativeLength(e)}))}};D=Object(i["a"])([Object(c["a"])("esri.views.interactive.tooltip.content.TooltipContentReshapeEdgeOffset")],D);const z={base:`${u} ${u+"--reshape-move-graphic"}`};let L=class extends O{render(){var t;const{distance:e}=this.info,n=null==(t=this._messagesTooltip)?void 0:t.sketch;return Object(j["a"])("div",{class:z.base},Object(j["a"])(x,{title:null==n?void 0:n.distance,value:this._formatLength(e)}))}};L=Object(i["a"])([Object(c["a"])("esri.views.interactive.tooltip.content.TooltipContentReshapeMoveGraphic")],L);const E={base:`${u} ${u+"--transform-absolute"}`};let W=class extends O{render(){var t;const{orientation:e,orientationEnabled:n,orientationPrecision:i,rotationType:r,size:o,sizeEnabled:a,sizeUnit:s,sizePrecision:c}=this.info,l=null==(t=this._messagesTooltip)?void 0:t.sketch;return Object(j["a"])("div",{class:E.base},n&&Object(j["a"])(x,{title:null==l?void 0:l.orientation,value:Object(p["a"])(e,r,i)}),a&&Object(j["a"])(x,{title:null==l?void 0:l.size,value:this._formatLength(o,s,c)}))}};W=Object(i["a"])([Object(c["a"])("esri.views.interactive.tooltip.content.TooltipContentTransformAbsolute")],W);const H={base:`${u} ${u+"--transform-rotate"}`};let F=class extends O{render(){var t;const{rotation:e,rotationPrecision:n,orientation:i,orientationPrecision:r,rotationType:o}=this.info,a=null==(t=this._messagesTooltip)?void 0:t.sketch;return Object(j["a"])("div",{class:H.base},Object(j["a"])(x,{title:null==a?void 0:a.rotation,value:Object(p["d"])(e,o,n)}),Object(j["a"])(x,{title:null==a?void 0:a.orientation,value:Object(p["a"])(i,o,r)}))}};F=Object(i["a"])([Object(c["a"])("esri.views.interactive.tooltip.content.TooltipContentTransformRotate")],F);const G={base:`${u} ${u+"--transform-scale"}`};let $=class extends O{render(){var t;const{scale:e,size:n,sizePrecision:i,sizeUnit:r}=this.info,o=null==(t=this._messagesTooltip)?void 0:t.sketch;return Object(j["a"])("div",{class:G.base},Object(j["a"])(x,{title:null==o?void 0:o.scale,value:this._formatPercentage(e)}),Object(j["a"])(x,{title:null==o?void 0:o.size,value:this._formatLength(n,r,i)}))}};$=Object(i["a"])([Object(c["a"])("esri.views.interactive.tooltip.content.TooltipContentTransformScale")],$);const A={base:`${u} ${u+"--translate-vertex"}`};let U=class extends O{render(){var t;const{area:e,distance:n,elevation:i,totalLength:r}=this.info,a=null==(t=this._messagesTooltip)?void 0:t.sketch;return Object(j["a"])("div",{class:A.base},Object(j["a"])(x,{title:null==a?void 0:a.distance,value:this._formatLength(n)}),Object(o["k"])(i)&&Object(j["a"])(x,{title:null==a?void 0:a.elevation,value:this._formatVerticalLength(i)}),Object(o["k"])(e)&&Object(j["a"])(x,{title:null==a?void 0:a.area,value:this._formatArea(e)}),Object(o["k"])(r)&&Object(j["a"])(x,{title:null==a?void 0:a.totalLength,value:this._formatLength(r)}))}};U=Object(i["a"])([Object(c["a"])("esri.views.interactive.tooltip.content.TooltipContentTranslateVertex")],U);const q={base:`${u} ${u+"--extent-move-z"}`};let N=class extends O{render(){var t;const{distance:e}=this.info,n=null==(t=this._messagesTooltip)?void 0:t.sketch;return Object(j["a"])("div",{class:q.base},Object(j["a"])(x,{title:null==n?void 0:n.distance,value:this._formatRelativeVerticalLength(e)}))}};function B(t,e){if(Object(o["j"])(e))return null;const n=document.createElement("div");switch(e.type){case"draw-point":return new _({tooltip:t,info:e,container:n});case"draw-polygon":return new T({tooltip:t,info:e,container:n});case"draw-polyline":return new S({tooltip:t,info:e,container:n});case"extent-rotate":return new M({tooltip:t,info:e,container:n});case"extent-scale":return new R({tooltip:t,info:e,container:n});case"reshape-edge-offset":return new D({tooltip:t,info:e,container:n});case"transform-absolute":return new W({tooltip:t,info:e,container:n});case"transform-rotate":return new F({tooltip:t,info:e,container:n});case"transform-scale":return new $({tooltip:t,info:e,container:n});case"translate-graphic":return new L({tooltip:t,info:e,container:n});case"translate-vertex":return new U({tooltip:t,info:e,container:n});case"translate-z":return new N({tooltip:t,info:e,container:n})}}N=Object(i["a"])([Object(c["a"])("esri.views.interactive.tooltip.content.TooltipContentTranslateZ")],N);const J={base:""+l};let X=class extends r["a"]{constructor(t){super(t),this.info=null,this._contentContainer=(()=>{const t=document.createElement("div");return t.classList.add(J.base),t})(),this._contentWidget=null}initialize(){const t=this._contentContainer;this.own([Object(a["f"])(()=>{var t;return null==(t=this.view.overlay)?void 0:t.surface},e=>{t.remove(),Object(o["b"])(e,e=>e.appendChild(t))},a["e"]),Object(a["f"])(()=>this.info,(e,n)=>{Object(o["k"])(this._contentWidget)&&Object(o["k"])(e)&&Object(o["k"])(n)&&e.type===n.type?this._contentWidget.info=e:(this._contentWidget=Object(o["d"])(this._contentWidget),Object(o["b"])(B(this,e),e=>{this._contentWidget=e,t.appendChild(e.container)}))},a["e"]),Object(a["f"])(()=>{var t;return{container:this._contentContainer,contentWidget:this._contentWidget,screenPoint:null==(t=this.view.inputManager)?void 0:t.latestPointerLocation}},Y,a["e"])])}destroy(){this._contentWidget=Object(o["d"])(this._contentWidget),this._contentContainer.remove()}clear(){this.info=null}get test(){return{contentContainer:this._contentContainer}}};function Y({container:t,contentWidget:e,screenPoint:n}){const{style:i}=t;if(Object(o["k"])(n)&&Object(o["k"])(e)){i.display="block";const e=Object(d["e"])(t),r=`translate(${Math.round(n.x)+K[0]*(e?-1:1)}px, ${Math.round(n.y)+K[1]}px)`;i.transform=e?"translate(-100%, 0) "+r:r}else i.display="none"}Object(i["a"])([Object(s["b"])({nonNullable:!0})],X.prototype,"view",void 0),Object(i["a"])([Object(s["b"])()],X.prototype,"info",void 0),Object(i["a"])([Object(s["b"])()],X.prototype,"_contentContainer",void 0),Object(i["a"])([Object(s["b"])()],X.prototype,"_contentWidget",void 0),X=Object(i["a"])([Object(c["a"])("esri.views.interactive.tooltip.Tooltip")],X);const K=[20,20]},"4aea":function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return i}));const i=["freehand","hybrid","click"],r="click"},"5bab":function(t,e,n){"use strict";n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return l})),n.d(e,"c",(function(){return c}));var i=n("b2b2"),r=n("a915"),o=n("1a54"),a=n("f408");class s{constructor(t,e,n,i=null){this.elevationInfo=t,this.defaultZ=e,this.view=n,this.excludeGraphics=i}screenToMap(t){if(Object(i["k"])(this.defaultZ))return this.view.sceneIntersectionHelper.intersectElevationFromScreen(Object(r["f"])(t.x,t.y),this.elevationInfo,this.defaultZ,this.excludeGraphics);const e=this.view.sceneIntersectionHelper.intersectElevationFromScreen(Object(r["f"])(t.x,t.y),this.elevationInfo,0,this.excludeGraphics);return Object(i["k"])(e)&&(e.z=void 0),e}mapToScreen(t){const e=Object(o["g"])(t.x,t.y,Object(a["a"])(this.view,t,this.elevationInfo),t.spatialReference);return this.view.toScreen(e)}}class c{constructor(t,e,n=[]){this.view=t,this.elevationInfo=e,this.exclude=n}screenToMap(t){const e=this.view.toMap(t,{exclude:this.exclude});return Object(i["k"])(e)&&(e.z=Object(a["g"])(e,this.view,this.elevationInfo)),e}mapToScreen(t){let e=t;return Object(i["k"])(this.elevationInfo)&&(e=Object(o["g"])(t.x,t.y,Object(a["a"])(this.view,t,this.elevationInfo),t.spatialReference)),this.view.toScreen(e)}}class l{constructor(t){this.view=t,this.screenToMap=e=>t.toMap(e),this.mapToScreen=e=>t.toScreen(e)}}},"5dd2":function(t,e,n){"use strict";n.d(e,"a",(function(){return h})),n.d(e,"b",(function(){return p})),n.d(e,"c",(function(){return u}));var i=n("f315"),r=n("0b2d"),o=n("ea51"),a=n("8188"),s=n("40b6"),c=n("7f83"),l=n("41ef");function u(t){const{spatialReference:e}=t;return Object(l["a"])(e,v,O,j,t)}function p(t,e){if(!Object(c["d"])(t.spatialReference,e.spatialReference))return null;const{spatialReference:n}=t;return x[0]=t.x,x[1]=t.y,x[2]=t.hasZ?t.z:0,y[0]=e.x,y[1]=e.y,y[2]=e.hasZ?e.z:0,h(x,y,n)}function h(t,e,n){return Object(l["a"])(n,b,d,f,t,e,n)}function b(t,e,n){return Object(i["c"])(Object(s["e"])(m,t,e,n).distance,"meters")}function d(t,e,n){return Object(i["c"])(Object(o["geodesicLength"])(g(t,e,n),"meters"),"meters")}function f(t,e,n){return Object(a["x"])(t,n,_)&&Object(a["x"])(e,n,w)?Object(i["c"])(Object(s["e"])(m,_,w).distance,"meters"):null}function v(t){return Object(i["c"])(Object(s["d"])([t],"meters")[0],"meters")}function O(t){return Object(i["c"])(Object(o["geodesicLength"])(t,"meters"),"meters")}function j(t){const e=[];if(!Object(a["t"])(t,e))return null;let n=0;for(const i of e){let t=0;for(let e=1;e<i.length;++e)t+=Object(s["e"])(m,i[e-1],i[e]).distance;n+=t}return Object(i["c"])(n,"meters")}function g(t,e,n){return{type:"polyline",spatialReference:n,paths:[[[...t],[...e]]]}}const m={distance:null},x=Object(r["f"])(),y=Object(r["f"])(),_=Object(r["f"])(),w=Object(r["f"])()},7617:function(t,e,n){"use strict";n.d(e,"a",(function(){return j})),n.d(e,"b",(function(){return w})),n.d(e,"c",(function(){return m})),n.d(e,"d",(function(){return g})),n.d(e,"e",(function(){return x})),n.d(e,"f",(function(){return _})),n.d(e,"g",(function(){return y}));var i=n("b2b2"),r=n("f315"),o=n("6aa9");function a(t,e,n,i=2,a="abbr"){return Object(o["c"])(t,Object(r["e"])(e,n).value,n,i,a)}function s(t,e,n,i=2,a="abbr"){return Object(o["p"])(t,Object(r["e"])(e,n).value,n,i,a)}function c(t,e,n=2,i="abbr"){return Object(o["k"])(t,e.value,e.unit,n,i)}function l(t,e,n=2,i="abbr"){return Object(o["l"])(t,e.value,e.unit,n,i)}function u(t,e,n=2,i="abbr"){return Object(o["n"])(t,e.value,e.unit,n,i)}function p(t,e,n=2,i="abbr"){return Object(o["m"])(t,e.value,e.unit,n,i)}function h(t,e,n=2,i="abbr"){return Object(o["j"])(t,e.value,e.unit,n,i)}function b(t,e,n=2,i="abbr"){return Object(o["f"])(t,e.value,e.unit,n,i)}function d(t,e,n=2,i="abbr"){return Object(o["g"])(t,e.value,e.unit,n,i)}function f(t,e,n=2,i="abbr"){return Object(o["i"])(t,e.value,e.unit,n,i)}function v(t,e,n=2,i="abbr"){return Object(o["h"])(t,e.value,e.unit,n,i)}function O(t,e,n=2,i="abbr"){return Object(o["e"])(t,e.value,e.unit,n,i)}function j(t,e,n){return Object(o["a"])(t.value,t.unit,t.rotationType,e,n)}function g(t,e,n){return Object(o["o"])(t.value,t.unit,t.rotationType,e,n)}function m(t,e,n,r,o="abbr"){switch(r=Object(i["s"])(r,2),n){case"imperial":return b(t,e,r,o);case"metric":return c(t,e,r,o);default:return a(t,e,n,r,o)}}function x(t,e,n,i=2,r="abbr"){switch(n){case"imperial":return d(t,e,i,r);case"metric":return l(t,e,i,r);default:return s(t,e,n,i,r)}}function y(t,e,n,i=2,r="abbr"){switch(n){case"imperial":return f(t,e,i,r);case"metric":return u(t,e,i,r);default:return a(t,e,n,i,r)}}function _(t,e,n,i=2,r="abbr"){switch(n){case"imperial":return v(t,e,i,r);case"metric":return p(t,e,i,r);default:return s(t,e,n,i,r)}}function w(t,e,n,i=2,r="abbr"){switch(n){case"imperial":return O(t,e,i,r);case"metric":return h(t,e,i,r);default:return a(t,e,n,i,r)}}},"8a19":function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var i=n("b2b2"),r=n("f4cc"),o=n("3563"),a=n("c20d"),s=n("1f1c"),c=n("9305");class l{constructor(){this.next=new a["a"]}createSnapDragEventPipelineStep({predicate:t=(()=>!0),cancel:e,snappingManager:n,snappingContext:l,updatingHandles:u}){if(Object(i["j"])(n))return t=>t;let p=null,h=null;const b=()=>{p=Object(i["a"])(p),n.doneSnapping(),Object(i["k"])(h)&&h.frameTask.remove(),h=null};e.next(t=>(b(),t)),this.next=new a["a"];const d=Object(r["f"])(async({frameTask:t,point:e,context:i,event:r,dx:a,dy:s},c)=>{const l=await t.schedule(()=>n.snap(e,i,c),c);if(l.valid){let u=await t.schedule(()=>l.apply(),c);e!==f&&(u=n.update(f,i)),Object(o["a"])(u,v)||(r.mapEnd.x=u.x+a,r.mapEnd.y=u.y+s,this.next.execute(r))}});let f,v;return e=>{if(!t(e))return e;if("start"===e.action){const t="3d"===n.view.type?n.view.resourceController.scheduler.registerTask(c["b"].SNAPPING):c["a"];h={context:new s["a"]({editGeometryOperations:l.editGeometryOperations,elevationInfo:l.elevationInfo,pointer:l.pointer,vertexHandle:Object(i["k"])(e.info)?e.info.handle:null,excludeFeature:l.excludeFeature,visualizer:l.visualizer}),originalPos:Object(i["k"])(e.snapOrigin)?l.coordinateHelper.vectorToDehydratedPoint(e.snapOrigin):e.mapStart,frameTask:t}}if(Object(i["k"])(h)){const t=h.context.coordinateHelper.vectorToDehydratedPoint(h.context.coordinateHelper.arrayToVector([h.originalPos.x,h.originalPos.y,h.originalPos.z]));t.x+=e.mapEnd.x-e.mapStart.x,t.y+=e.mapEnd.y-e.mapStart.y;const o=e.mapStart.x-h.originalPos.x,a=e.mapStart.y-h.originalPos.y,s={...e,action:"update"},c=h.context,l=n.update(t,h.context);if(v=l,e.mapEnd.x=l.x+o,e.mapEnd.y=l.y+a,f=t,"end"!==e.action){const e=h.frameTask;Object(i["k"])(p)||(p=new AbortController),u.addPromise(Object(r["i"])(d({frameTask:e,event:s,context:c,point:t,dx:o,dy:a},p.signal)))}}return"end"===e.action&&b(),e}}}},"94a9":function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var i=n("a4ee"),r=n("fc29"),o=n("b2b2"),a=n("f4cc"),s=n("59b2"),c=(n("b50f"),n("c120"),n("cea0"),n("d386")),l=n("9305");let u=class extends r["a"]{constructor(t){super(t),this.stagedPoint=null,this._abortController=null,this._snap=Object(a["f"])(async(t,e,n,i)=>{const r=await this._frameTask.schedule(()=>e.snap(t,n,i),i);r.valid&&await this._frameTask.schedule(()=>{this.stagedPoint=r.apply(),t!==this._snapMapPoint&&(this.stagedPoint=e.update(this._snapMapPoint,n))},i)})}initialize(){var t,e;const n="3d"===this.view.type?null==(t=this.view)||null==(e=t.resourceController)?void 0:e.scheduler:null;this._frameTask=Object(o["k"])(n)?n.registerTask(l["b"].SNAPPING):l["a"]}destroy(){this._abortController=Object(o["a"])(this._abortController),this._frameTask=Object(o["q"])(this._frameTask)}async snap(t,e,n){return this.stagedPoint=e.update(t,n),this._snapMapPoint=t,Object(o["j"])(this._abortController)&&(this._abortController=new AbortController),this._snap(t,e,n,this._abortController.signal)}abort(){this._abortController=Object(o["a"])(this._abortController)}};Object(i["a"])([Object(s["b"])({constructOnly:!0})],u.prototype,"view",void 0),Object(i["a"])([Object(s["b"])()],u.prototype,"stagedPoint",void 0),u=Object(i["a"])([Object(c["a"])("esri.views.interactive.snapping.SnappingOperation")],u)},9812:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var i,r,o,a={exports:{}};i=a,r=function(){function t(t,n,r){r=r||2;var o,a,s,l,u,p,h,b=n&&n.length,d=b?n[0]*r:t.length,f=e(t,0,d,r,!0),v=[];if(!f||f.next===f.prev)return v;if(b&&(f=c(t,n,f,r)),t.length>80*r){o=s=t[0],a=l=t[1];for(var O=r;O<d;O+=r)(u=t[O])<o&&(o=u),(p=t[O+1])<a&&(a=p),u>s&&(s=u),p>l&&(l=p);h=0!==(h=Math.max(s-o,l-a))?1/h:0}return i(f,v,r,o,a,h),v}function e(t,e,n,i,r){var o,a;if(r===I(t,e,n,i)>0)for(o=e;o<n;o+=i)a=M(o,t[o],t[o+1],a);else for(o=n-i;o>=e;o-=i)a=M(o,t[o],t[o+1],a);if(a&&x(a,a.next)){var s=a.next;V(a),a=s}return a}function n(t,e){if(!t)return t;e||(e=t);var n,i=t;do{if(n=!1,i.steiner||!x(i,i.next)&&0!==m(i.prev,i,i.next))i=i.next;else{var r=i.prev;if(V(i),(i=e=r)===i.next)break;n=!0}}while(n||i!==e);return e}function i(t,e,c,l,u,p,h){if(t){!h&&p&&d(t,l,u,p);for(var b,f,v=t;t.prev!==t.next;)if(b=t.prev,f=t.next,p?o(t,l,u,p):r(t))e.push(b.i/c),e.push(t.i/c),e.push(f.i/c),V(t),t=f.next,v=f.next;else if((t=f)===v){h?1===h?i(t=a(n(t),e,c),e,c,l,u,p,2):2===h&&s(t,e,c,l,u,p):i(n(t),e,c,l,u,p,1);break}}}function r(t){var e=t.prev,n=t,i=t.next;if(m(e,n,i)>=0)return!1;for(var r=t.next.next;r!==t.prev;){if(j(e.x,e.y,n.x,n.y,i.x,i.y,r.x,r.y)&&m(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function o(t,e,n,i){var r=t.prev,o=t,a=t.next;if(m(r,o,a)>=0)return!1;for(var s=r.x<o.x?r.x<a.x?r.x:a.x:o.x<a.x?o.x:a.x,c=r.y<o.y?r.y<a.y?r.y:a.y:o.y<a.y?o.y:a.y,l=r.x>o.x?r.x>a.x?r.x:a.x:o.x>a.x?o.x:a.x,u=r.y>o.y?r.y>a.y?r.y:a.y:o.y>a.y?o.y:a.y,p=v(s,c,e,n,i),h=v(l,u,e,n,i),b=t.prevZ,d=t.nextZ;b&&b.z>=p&&d&&d.z<=h;){if(b!==t.prev&&b!==t.next&&j(r.x,r.y,o.x,o.y,a.x,a.y,b.x,b.y)&&m(b.prev,b,b.next)>=0)return!1;if(b=b.prevZ,d!==t.prev&&d!==t.next&&j(r.x,r.y,o.x,o.y,a.x,a.y,d.x,d.y)&&m(d.prev,d,d.next)>=0)return!1;d=d.nextZ}for(;b&&b.z>=p;){if(b!==t.prev&&b!==t.next&&j(r.x,r.y,o.x,o.y,a.x,a.y,b.x,b.y)&&m(b.prev,b,b.next)>=0)return!1;b=b.prevZ}for(;d&&d.z<=h;){if(d!==t.prev&&d!==t.next&&j(r.x,r.y,o.x,o.y,a.x,a.y,d.x,d.y)&&m(d.prev,d,d.next)>=0)return!1;d=d.nextZ}return!0}function a(t,e,i){var r=t;do{var o=r.prev,a=r.next.next;!x(o,a)&&y(o,r,r.next,a)&&k(o,a)&&k(a,o)&&(e.push(o.i/i),e.push(r.i/i),e.push(a.i/i),V(r),V(r.next),r=t=a),r=r.next}while(r!==t);return n(r)}function s(t,e,r,o,a,s){var c=t;do{for(var l=c.next.next;l!==c.prev;){if(c.i!==l.i&&g(c,l)){var u=C(c,l);return c=n(c,c.next),u=n(u,u.next),i(c,e,r,o,a,s),void i(u,e,r,o,a,s)}l=l.next}c=c.next}while(c!==t)}function c(t,i,r,o){var a,s,c,u=[];for(a=0,s=i.length;a<s;a++)(c=e(t,i[a]*o,a<s-1?i[a+1]*o:t.length,o,!1))===c.next&&(c.steiner=!0),u.push(O(c));for(u.sort(l),a=0;a<u.length;a++)r=n(r=p(u[a],r),r.next);return r}function l(t,e){return t.x-e.x}function u(t){if(t.next.prev===t)return t;let e=t;for(;;){const n=e.next;if(n.prev===e||n===e||n===t)break;e=n}return e}function p(t,e){var i=h(t,e);if(!i)return e;var r=C(i,t),o=n(i,i.next);let a=u(r);return n(a,a.next),o=u(o),u(e===i?o:e)}function h(t,e){var n,i=e,r=t.x,o=t.y,a=-1/0;do{if(o<=i.y&&o>=i.next.y&&i.next.y!==i.y){var s=i.x+(o-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(s<=r&&s>a){if(a=s,s===r){if(o===i.y)return i;if(o===i.next.y)return i.next}n=i.x<i.next.x?i:i.next}}i=i.next}while(i!==e);if(!n)return null;if(r===a)return n;var c,l=n,u=n.x,p=n.y,h=1/0;i=n;do{r>=i.x&&i.x>=u&&r!==i.x&&j(o<p?r:a,o,u,p,o<p?a:r,o,i.x,i.y)&&(c=Math.abs(o-i.y)/(r-i.x),k(i,t)&&(c<h||c===h&&(i.x>n.x||i.x===n.x&&b(n,i)))&&(n=i,h=c)),i=i.next}while(i!==l);return n}function b(t,e){return m(t.prev,t,e.prev)<0&&m(e.next,t,t.next)<0}function d(t,e,n,i){var r=t;do{null===r.z&&(r.z=v(r.x,r.y,e,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,f(r)}function f(t){var e,n,i,r,o,a,s,c,l=1;do{for(n=t,t=null,o=null,a=0;n;){for(a++,i=n,s=0,e=0;e<l&&(s++,i=i.nextZ);e++);for(c=l;s>0||c>0&&i;)0!==s&&(0===c||!i||n.z<=i.z)?(r=n,n=n.nextZ,s--):(r=i,i=i.nextZ,c--),o?o.nextZ=r:t=r,r.prevZ=o,o=r;n=i}o.nextZ=null,l*=2}while(a>1);return t}function v(t,e,n,i,r){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*r)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*r)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function O(t){var e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function j(t,e,n,i,r,o,a,s){return(r-a)*(e-s)-(t-a)*(o-s)>=0&&(t-a)*(i-s)-(n-a)*(e-s)>=0&&(n-a)*(o-s)-(r-a)*(i-s)>=0}function g(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!T(t,e)&&(k(t,e)&&k(e,t)&&S(t,e)&&(m(t.prev,t,e.prev)||m(t,e.prev,e))||x(t,e)&&m(t.prev,t,t.next)>0&&m(e.prev,e,e.next)>0)}function m(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function x(t,e){return t.x===e.x&&t.y===e.y}function y(t,e,n,i){var r=w(m(t,e,n)),o=w(m(t,e,i)),a=w(m(n,i,t)),s=w(m(n,i,e));return r!==o&&a!==s||!(0!==r||!_(t,n,e))||!(0!==o||!_(t,i,e))||!(0!==a||!_(n,t,i))||!(0!==s||!_(n,e,i))}function _(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function w(t){return t>0?1:t<0?-1:0}function T(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&y(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function k(t,e){return m(t.prev,t,t.next)<0?m(t,e,t.next)>=0&&m(t,t.prev,e)>=0:m(t,e,t.prev)<0||m(t,t.next,e)<0}function S(t,e){var n=t,i=!1,r=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&r<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==t);return i}function C(t,e){var n=new P(t.i,t.x,t.y),i=new P(e.i,e.x,e.y),r=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=r,r.prev=n,i.next=n,n.prev=i,o.next=i,i.prev=o,i}function M(t,e,n,i){var r=new P(t,e,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function V(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function P(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function I(t,e,n,i){for(var r=0,o=e,a=n-i;o<n;o+=i)r+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return r}return t.deviation=function(t,e,n,i){var r=e&&e.length,o=r?e[0]*n:t.length,a=Math.abs(I(t,0,o,n));if(r)for(var s=0,c=e.length;s<c;s++){var l=e[s]*n,u=s<c-1?e[s+1]*n:t.length;a-=Math.abs(I(t,l,u,n))}var p=0;for(s=0;s<i.length;s+=3){var h=i[s]*n,b=i[s+1]*n,d=i[s+2]*n;p+=Math.abs((t[h]-t[d])*(t[b+1]-t[h+1])-(t[h]-t[b])*(t[d+1]-t[h+1]))}return 0===a&&0===p?0:Math.abs((p-a)/a)},t.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},i=0,r=0;r<t.length;r++){for(var o=0;o<t[r].length;o++)for(var a=0;a<e;a++)n.vertices.push(t[r][o][a]);r>0&&(i+=t[r-1].length,n.holes.push(i))}return n},t},void 0!==(o=r())&&(i.exports=o);const s=a.exports},a545:function(t,e,n){"use strict";n.d(e,"a",(function(){return O})),n.d(e,"b",(function(){return b}));n("e06a");var i=n("b2b2"),r=n("a29a"),o=n("f7eb"),a=n("04f0"),s=n("b139"),c=n("e431"),l=n("0b2d"),u=n("3a35"),p=n("4ae5");function h(t,e,n=null){return Object(i["k"])(n)?[t,e,n]:[t,e]}function b(t,e,n=null){return Object(i["k"])(n)?{x:t,y:e,z:n}:{x:t,y:e}}class d{constructor(t){this.spatialReference=t}mapToLocalMultiple(t){return Object(i["g"])(t.map(t=>this.mapToLocal(t)))}get doUnnormalization(){return!1}}class f extends d{constructor(t,e,n=null){super(e),this.defaultZ=n,this.transform=Object(o["b"])(),this.transformInv=Object(o["b"])(),this.transform=Object(o["a"])(t),Object(r["b"])(this.transformInv,this.transform)}makeMapPoint(t,e){return h(t,e,this.defaultZ)}mapToLocal(t){return b(this.transform[0]*t[0]+this.transform[2]*t[1]+this.transform[4],this.transform[1]*t[0]+this.transform[3]*t[1]+this.transform[5])}localToMap(t){return h(this.transformInv[0]*t.x+this.transformInv[2]*t.y+this.transformInv[4],this.transformInv[1]*t.x+this.transformInv[3]*t.y+this.transformInv[5],this.defaultZ)}}class v extends d{constructor(t,e){super(t.spatialReference),this.view=t,this.defaultZ=null,this.pWS=Object(l["f"])(),this.tangentFrameUpWS=Object(l["f"])(),this.tangentFrameRightWS=Object(l["f"])(),this.tangentFrameForwardWS=Object(l["f"])(),this.localFrameRightWS=Object(l["f"])(),this.localFrameUpWS=Object(l["f"])(),this.worldToLocalTransform=Object(s["b"])(),this.localToWorldTransform=Object(s["b"])(),this.scale=1,this.scale=t.resolution,this.referenceMapPoint=e,this.defaultZ=e.hasZ?e.z:null;const n=t.state.camera.viewRight;this.view.renderCoordsHelper.toRenderCoords(this.referenceMapPoint,this.pWS),this.view.renderCoordsHelper.worldBasisAtPosition(this.pWS,u["a"].X,this.tangentFrameRightWS),this.view.renderCoordsHelper.worldBasisAtPosition(this.pWS,u["a"].Y,this.tangentFrameUpWS),this.view.renderCoordsHelper.worldBasisAtPosition(this.pWS,u["a"].Z,this.tangentFrameForwardWS);const i=Object(l["f"])();Object(c["k"])(i,this.tangentFrameForwardWS,Object(c["i"])(n,this.tangentFrameForwardWS)),Object(c["f"])(this.localFrameRightWS,n,i),Object(c["r"])(this.localFrameRightWS,this.localFrameRightWS),Object(c["j"])(this.localFrameUpWS,this.tangentFrameForwardWS,this.localFrameRightWS),Object(a["g"])(this.worldToLocalTransform,this.localFrameRightWS,this.tangentFrameRightWS),Object(a["c"])(this.localToWorldTransform,this.worldToLocalTransform)}get doUnnormalization(){return"global"===this.view.viewingMode}makeMapPoint(t,e){return h(t,e,this.defaultZ)}mapToLocal(t){const e=Object(l["f"])();this.view.renderCoordsHelper.toRenderCoords(new p["a"]({x:t[0],y:t[1],spatialReference:this.spatialReference}),e),Object(c["u"])(e,e,this.worldToLocalTransform);const n=this.view.renderCoordsHelper.fromRenderCoords(e,this.view.spatialReference);return Object(i["k"])(n)?b(n.x/this.scale,n.y/this.scale):null}localToMap(t){const e=Object(l["f"])();this.view.renderCoordsHelper.toRenderCoords(new p["a"]({x:t.x*this.scale,y:t.y*this.scale,spatialReference:this.spatialReference}),e),Object(c["u"])(e,e,this.localToWorldTransform);const n=this.view.renderCoordsHelper.fromRenderCoords(e,this.view.spatialReference);return Object(i["k"])(n)?h(n.x,n.y,this.defaultZ):null}}function O(t,e){if("2d"===t.type)return new f(t.state.transform,t.spatialReference,e.length>2?e[2]:null);if("3d"===t.type){const n=e.length>2?new p["a"]({x:e[0],y:e[1],z:e[2],spatialReference:t.spatialReference}):new p["a"]({x:e[0],y:e[1],spatialReference:t.spatialReference});return new v(t,n)}return null}},b66e:function(t,e,n){"use strict";n.d(e,"a",(function(){return j})),n.d(e,"b",(function(){return f})),n.d(e,"c",(function(){return d}));var i=n("b2b2"),r=n("f315"),o=n("8048"),a=n("9812"),s=n("e431"),c=n("0b2d"),l=n("8188"),u=n("7289"),p=n("579f"),h=n("7361"),b=n("d245");function d(t,e=j()){return v(t,e)}function f(t,e=j()){return v(t,e,!1)}function v(t,e,n=t.hasZ){const a=Object(b["a"])(t.spatialReference),d=Object(o["a"])(a);if(Object(i["j"])(d))return null;const f=(t,e)=>!(e.length<2)&&(Object(s["w"])(t,e[0],e[1],n&&e[2]||0),!0);let v=0;for(const i of t.rings){if(i.length<3)continue;const{positionsWorldCoords:n}=e;for(;n.length<i.length;)n.push(Object(c["f"])());const r=O;for(let e=0;e<3;e++){if(!f(r,i[e]))return null;if(!Object(l["w"])(r,t.spatialReference,n[e],a))return null}if(Object(s["o"])(n[0],n[1])||Object(s["o"])(n[0],n[2])||Object(s["o"])(n[1],n[2]))continue;const o=Object(u["f"])(n[0],n[1],n[2],Object(u["v"])()),b=Object(s["g"])(h["d"].get(),n[0]);for(let t=0;t<3;t++)Object(u["s"])(o,b,n[t],n[t]);for(let e=3;e<i.length;e++){if(!f(r,i[e]))return null;Object(l["w"])(r,t.spatialReference,n[e],a),Object(u["s"])(o,b,n[e],n[e])}const d=g(n);for(let t=0;t<d.length;t+=3)v+=Object(p["a"])(n[d[t]],n[d[t+1]],n[d[t+2]])}return Object(r["b"])(v,d)}const O=Object(c["f"])();function j(){return{positionsWorldCoords:[]}}function g(t){return Object(a["a"])(m(t),[],2)}function m(t){const e=new Float64Array(2*t.length);for(let n=0;n<t.length;++n){const i=t[n],r=2*n;e[r+0]=i[0],e[r+1]=i[1]}return e}},be4a:function(t,e,n){"use strict";n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return l})),n.d(e,"c",(function(){return c})),n.d(e,"d",(function(){return a}));var i=n("b2b2"),r=n("3170"),o=n("5dd2");function a(t,e){return u(r["g"],o["c"],r["f"],e,t)}function s(t,e,n,i){return u(r["b"],o["a"],r["d"],i,t,e,n)}function c(t,e,n){return u(r["e"],o["b"],r["e"],n,t,e)}function l(t,e,n,i){return u(r["d"],o["a"],r["d"],i,t,e,n)}function u(t,e,n,r,...o){if("on-the-ground"===r){const t=e.apply(void 0,o);return Object(i["k"])(t)?t:n.apply(void 0,o)}return t.apply(void 0,o)}},cfb5:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var i=n("a4ee"),r=n("fc29"),o=n("59b2"),a=(n("b50f"),n("c120"),n("cea0"),n("d386"));let s=class extends r["a"]{constructor(t){super(t)}};Object(i["a"])([Object(o["b"])()],s.prototype,"tooltipOptions",void 0),s=Object(i["a"])([Object(a["a"])("esri.views.interactive.tooltip.SketchTooltipInfo")],s)},d245:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var i=n("8188"),r=n("f694");function o(t){const e=Object(r["g"])(t),n=e===r["a"]?r["d"]:e;return Object(i["b"])(t,n)?n:t}},e7e3:function(t,e,n){"use strict";n.d(e,"a",(function(){return F}));var i=n("a4ee"),r=n("ce6d"),o=n("9096"),a=n("7ffa"),s=n("b2b2"),c=n("f4cc"),l=n("f315"),u=n("477c"),p=n("a915"),h=n("8048"),b=n("59b2"),d=(n("cea0"),n("d386")),f=n("3563"),v=n("f408"),O=n("3c9c"),j=n("4aea");class g{constructor({grabbableForEvent:t}){this.events=new r["a"],this.interactive=!0,this.selectable=!1,this.cursor=null,this.grabbable=!0,this.grabbableForEvent=t}intersectionDistance(t,e){return 0}attach(){}detach(){}}var m=n("8b1a"),x=n("c20d"),y=n("6ae9"),_=n("2c8f"),w=n("bd72"),T=n("5aed"),k=n("1f1c"),S=n("8a19"),C=n("94a9"),M=n("cfb5");let V=class extends M["a"]{constructor(t){super(t),this.type="draw-point"}};Object(i["a"])([Object(b["b"])()],V.prototype,"type",void 0),Object(i["a"])([Object(b["b"])()],V.prototype,"elevation",void 0),V=Object(i["a"])([Object(d["a"])("esri.views.interactive.tooltip.DrawPointTooltipInfo")],V);let P=class extends M["a"]{constructor(t){super(t),this.type="draw-polyline"}};Object(i["a"])([Object(b["b"])()],P.prototype,"type",void 0),Object(i["a"])([Object(b["b"])()],P.prototype,"elevation",void 0),Object(i["a"])([Object(b["b"])()],P.prototype,"totalLength",void 0),P=Object(i["a"])([Object(d["a"])("esri.views.interactive.tooltip.DrawPolylineTooltipInfo")],P);let I=class extends M["a"]{constructor(t){super(t),this.type="draw-polygon"}};Object(i["a"])([Object(b["b"])()],I.prototype,"type",void 0),Object(i["a"])([Object(b["b"])()],I.prototype,"elevation",void 0),Object(i["a"])([Object(b["b"])()],I.prototype,"area",void 0),I=Object(i["a"])([Object(d["a"])("esri.views.interactive.tooltip.DrawPolygonTooltipInfo")],I);var R=n("4492"),Z=n("0b2d"),D=n("0f2e"),z=n("be4a"),L=n("b66e");function E(t,e){var n,i,r;const o=t=>Object(z["d"])(t,e),a=(t,n,i)=>Object(z["a"])(t,n,i,e),c=o(t),u=null!=(n=null==(i=t.paths[0])?void 0:i[(null==(r=t.paths[0])?void 0:r.length)-1])?n:null,{hasZ:p,spatialReference:h}=t,b=u?Object(Z["h"])(u[0],u[1],p?u[2]:0):null;return t=>{if(Object(s["j"])(t)||Object(s["j"])(c)||Object(s["j"])(b))return c;H[0]=t.x,H[1]=t.y,H[2]=p?t.z:0;const e=a(b,H,h);return Object(s["j"])(e)?c:Object(l["c"])(c.value+e.value,c.unit)}}function W(t,e){const n=Object(L["a"])(),i=t=>Object(D["a"])(t,e,n);return e=>{if(Object(s["j"])(e)||t.rings.length<1||t.rings[0].length<2)return i(t);const n=t.clone();return n.rings[0].push([e.x,e.y]),i(n)}}const H=Object(Z["f"])();let F=class extends(r["a"].EventedMixin(o["a"])){constructor(t){super(t),this._createOperationCompleted=!1,this._pointerDownStates=new Set,this._snappingPipeline=new S["a"],this._tooltip=null,this._tooltipContext={calculateElevation:null,calculateTotalLength:null,calculateArea:null},this.isDraped=!0,this.labelOptions=new w["a"],this.tooltipOptions=new T["a"],this.snapToSceneEnabled=null,Object(s["j"])(t.elevationInfo)&&(this.elevationInfo={mode:t.hasZ?"absolute-height":"on-the-ground",offset:0})}initialize(){const{geometryType:t,view:e}=this,{spatialReference:n}=e,i="viewingMode"in e.state?e.state.viewingMode:O["a"].Local,r="segment"===t||"multipoint"===t?"polyline":t;this.coordinateHelper=Object(m["a"])(this.hasZ,this.hasM,n),this._editGeometryOperations=new _["a"](new y["c"](r,this.coordinateHelper)),this._snappingOperation=new C["a"]({view:e}),this.handles.add(Object(u["f"])(()=>this.stagedVertex,(t,e)=>{Object(s["k"])(this._tooltip)&&(Object(s["k"])(e)!==Object(s["k"])(t)?this._tooltip.info=this._getTooltipInfo():this._updateTooltipInfo()),Object(s["j"])(t)||this.emit("cursor-update",{updated:null,vertices:[{componentIndex:0,vertexIndex:this._activeComponent.vertices.length,coordinates:this.coordinateHelper.pointToArray(t)}],operation:"apply",type:"vertex-update"})},{sync:!0,equals:(t,e)=>Object(s["f"])(t,e,f["a"])})),this._activeComponent=new y["a"](n,i),this._editGeometryOperations.data.components.push(this._activeComponent);const o=this.segmentLabels;Object(s["k"])(o)&&(o.context={view:e,editGeometryOperations:this._editGeometryOperations,elevationInfo:this.elevationInfo,labelOptions:this.labelOptions},this.handles.add([Object(u["f"])(()=>this.labelOptions.enabled,t=>{o.visible=t},u["e"]),this.on("cursor-update",()=>{const t=this.stagedVertex;o.stagedVertex=Object(s["k"])(t)?this.coordinateHelper.pointToVector(t):null})])),this.handles.add(this._editGeometryOperations.on(["vertex-add","vertex-update","vertex-remove"],t=>{const e=t.vertices.map(t=>({componentIndex:0,vertexIndex:t.index,coordinates:this.coordinateHelper.vectorToArray(t.pos)})),n=e.map(t=>t.coordinates);switch(t.type){case"vertex-add":this.emit(t.type,{...t,added:n,vertices:e});break;case"vertex-update":this.emit(t.type,{...t,updated:n,vertices:e});break;case"vertex-remove":this.emit(t.type,{...t,removed:n,vertices:e})}})),this._manipulator=new g({grabbableForEvent:t=>"click"!==this.drawingMode||"touch"===t.pointerType&&this._snappingEnabled&&1===this._pointerDownStates.size}),this.manipulators.add(this._manipulator),this._manipulator.grabbable="point"!==t,this.handles.add([this._createManipulatorDragPipeline(this._manipulator),this._manipulator.events.on("immediate-click",t=>this._onImmediateClick(t)),this._manipulator.events.on("immediate-double-click",t=>this._onImmediateDoubleClick(t)),Object(u["f"])(()=>this.tooltipOptions.enabled,t=>{this._tooltip=t?new R["a"]({view:e,info:this._getTooltipInfo()}):Object(s["d"])(this._tooltip)},u["a"]),this._editGeometryOperations.on(["vertex-add","vertex-update","vertex-remove"],()=>Object(s["b"])(this._tooltip,t=>{t.info=this._getTooltipInfo()}))])}destroy(){Object(s["d"])(this.segmentLabels),Object(s["d"])(this._snappingOperation),this._tooltip=Object(s["d"])(this._tooltip),this._editGeometryOperations=Object(s["d"])(this._editGeometryOperations)}get _snappingEnabled(){return Object(s["k"])(this.snappingManager)&&this.snappingManager.options.effectiveEnabled}get _defaultElevation(){return Object(l["c"])(this.defaultZ,"meters")}get canRedo(){return this._editGeometryOperations.canRedo}get canUndo(){return this._editGeometryOperations.canUndo}get committedVertices(){return this._activeComponent.vertices.map(t=>this.coordinateHelper.vectorToArray(t.pos))}set drawingMode(t){this._set("drawingMode",null!=t?t:j["a"])}get interactive(){return this._manipulator.interactive}set interactive(t){this._manipulator.interactive=t}get isCompleted(){return this._createOperationCompleted}get numCommittedVertices(){return this._activeComponent.vertices.length}get numVertices(){return Object(s["k"])(this.stagedVertex)?this._activeComponent.vertices.length+1:this._activeComponent.vertices.length}get stagedVertex(){return this._snappingOperation.stagedPoint}set stagedVertex(t){this._snappingOperation.stagedPoint=Object(a["a"])(t)}get updating(){return this.updatingHandles.updating}get vertices(){const t=this.committedVertices;return Object(s["k"])(this.stagedVertex)&&t.push(this.coordinateHelper.pointToArray(this.stagedVertex)),t}get stagedOrLastVertex(){if(Object(s["k"])(this.stagedVertex))return this.stagedVertex;const t=this._activeComponent.getLastVertex();return Object(s["j"])(t)?null:this._editGeometryOperations.data.coordinateHelper.vectorToDehydratedPoint(t.pos)}cancel(){this.complete({aborted:!0})}commitStagedVertex(){if(this._snappingOperation.abort(),Object(s["k"])(this.stagedVertex)){const{stagedVertex:t}=this;this.stagedVertex=null,this._editGeometryOperations.appendVertex(this.coordinateHelper.pointToVector(t))}}complete(t){const e=t&&t.aborted||!1;this._snappingOperation.abort(),Object(s["k"])(this.snappingManager)&&this.snappingManager.doneSnapping(),"segment"===this.geometryType||"point"===this.geometryType?this.commitStagedVertex():this.stagedVertex=null;const n="multipoint"===this.geometryType&&0===this.numVertices||"polyline"===this.geometryType&&this.numVertices<2||"polygon"===this.geometryType&&this.numVertices<3;this._createOperationCompleted=!n,(this.isCompleted||e)&&this.emit("complete",{vertices:this.vertices.map((t,e)=>({componentIndex:0,vertexIndex:e,coordinates:t})),aborted:e,type:"complete"})}onInputEvent(t){switch(t.type){case"pointer-down":this._pointerDownStates.add(t.pointerId);break;case"pointer-up":this._pointerDownStates.delete(t.pointerId)}switch(t.type){case"pointer-move":return this._onPointerMove(t);case"hold":return this._onHold(t)}}redo(){this._editGeometryOperations.redo()}undo(){Object(s["k"])(this.snappingManager)&&this.snappingManager.doneSnapping(),this._editGeometryOperations.undo()}_closeOnClickVertexIndex(t){const e=this._activeComponent;if("polygon"===this.geometryType&&e.vertices.length>2){if(this._vertexWithinPointerDistance(e.vertices[0].pos,t))return 0;if(this._vertexWithinPointerDistance(e.vertices[e.vertices.length-1].pos,t))return e.vertices.length-1}return null}_createManipulatorDragPipeline(t){switch(Object(s["r"])(this.drawingMode)){case"click":return this._createManipulatorDragPipelineClick(t);case"freehand":return this._createManipulatorDragPipelineFreehand(t);case"hybrid":return this._createManipulatorDragPipelineHybrid(t)}}_createManipulatorDragPipelineClick(t){return Object(x["e"])(t,(t,e,n,i)=>{const r="touch"===i&&this._snappingEnabled;!this.isCompleted&&r&&(e.next(this._screenToMapDragEventStep()).next(t=>("start"===t.action&&(this.stagedVertex=t.mapStart,("segment"===this.geometryType||r&&0===this.numVertices)&&this.commitStagedVertex()),t)).next(this._snappingPipeline.createSnapDragEventPipelineStep({predicate:()=>r,cancel:n,snappingManager:this.snappingManager,snappingContext:new k["a"]({editGeometryOperations:this._editGeometryOperations,elevationInfo:this.elevationInfo,pointer:i,visualizer:this.snappingVisualizer}),updatingHandles:this.updatingHandles}),this._snappingPipeline.next).next(t=>(r&&(this.stagedVertex=t.mapEnd,"end"===t.action&&this.commitStagedVertex()),t)).next(t=>("end"===t.action&&("segment"!==this.geometryType&&"point"!==this.geometryType||this.complete()),t)),n.next(()=>{r&&Object(s["k"])(this.snappingManager)&&this.snappingManager.doneSnapping()}))})}_createManipulatorDragPipelineFreehand(t){return Object(x["e"])(t,(t,e)=>{this.isCompleted||e.next(this._screenToMapDragEventStep()).next(t=>("start"===t.action&&(Object(s["j"])(this.stagedVertex)&&(this.stagedVertex=t.mapStart),"segment"===this.geometryType&&this.commitStagedVertex()),t)).next(t=>{switch(t.action){case"start":case"update":this.stagedVertex=t.mapEnd,"polygon"!==this.geometryType&&"polyline"!==this.geometryType||this.commitStagedVertex();break;case"end":this.complete()}return t})})}_createManipulatorDragPipelineHybrid(t){return Object(x["e"])(t,(t,e)=>{this.isCompleted||e.next(this._screenToMapDragEventStep()).next(t=>("start"===t.action&&(Object(s["j"])(this.stagedVertex)&&(this.stagedVertex=t.mapStart),this.commitStagedVertex()),t)).next(t=>{switch(t.action){case"start":case"update":this.stagedVertex=t.mapEnd,"polygon"!==this.geometryType&&"polyline"!==this.geometryType||this.commitStagedVertex();break;case"end":"segment"!==this.geometryType&&"point"!==this.geometryType||this.complete()}return t})})}_getDrawSurface(){if(Object(s["j"])(this.elevationDrawSurface))return this.drawSurface;if(!this.coordinateHelper.hasZ)return this.elevationDrawSurface.defaultZ=null,this.elevationDrawSurface;let t=this.defaultZ,e=!1;Object(s["k"])(this.elevationInfo)&&"absolute-height"===this.elevationInfo.mode&&(e=!0),Object(s["k"])(this.snapToSceneEnabled)&&(e=this.snapToSceneEnabled),Object(s["k"])(this.elevationInfo)&&"on-the-ground"===this.elevationInfo.mode&&(e=!1);const n=this._activeComponent.vertices.length;return("segment"===this.geometryType||"polygon"===this.geometryType)&&n>0&&(t=this.coordinateHelper.getZ(this._activeComponent.vertices[0].pos),e=!1),e?this.drawSurface:(this.elevationDrawSurface.defaultZ=t,this.elevationDrawSurface)}_mapToScreen(t){return this._getDrawSurface().mapToScreen(t)}_onHold(t){this._snappingOperation.abort(),"click"===this.drawingMode&&"touch"===t.pointerType&&this._snappingEnabled&&(this.stagedVertex=t.mapPoint),t.stopPropagation()}_onImmediateClick(t){if("mouse"===t.pointerType&&2===t.button||this._manipulator.dragging)return;const e=this._activeComponent,n=this._closeOnClickVertexIndex(t.screenPoint);if(Object(s["k"])(n))return t.stopPropagation(),void this.complete();const i=this._screenToMap(t.screenPoint);if(Object(s["k"])(i))switch(this.drawingMode){case"freehand":"point"===this.geometryType&&(Object(s["k"])(this.stagedVertex)?this.commitStagedVertex():this._editGeometryOperations.appendVertex(this.coordinateHelper.pointToVector(i)),this.complete());break;case"click":case"hybrid":this._snappingOperation.abort(),Object(s["k"])(this.stagedVertex)?this.commitStagedVertex():this._editGeometryOperations.appendVertex(this.coordinateHelper.pointToVector(i)),("point"===this.geometryType||"segment"===this.geometryType&&2===e.vertices.length||"segment"===this.geometryType&&"hybrid"===this.drawingMode&&1===e.vertices.length)&&this.complete()}t.stopPropagation()}_onImmediateDoubleClick(t){this._manipulator.dragging||"point"===this.geometryType||(this.complete(),t.stopPropagation())}_onPointerMove(t){const e=Object(p["e"])(t.x,t.y);if(this._manipulator.dragging||this._pointerDownStates.has(t.pointerId)||this._manipulator.grabbing||!this._manipulator.interactive)return void this._snappingOperation.abort();t.stopPropagation();const n=this._closeOnClickVertexIndex(e);if(Object(s["k"])(n))return this._closeOnVertex(n),void this._snappingOperation.abort();const i=this._screenToMap(e);if(this._manipulator.cursor=Object(s["k"])(i)?"crosshair":null,Object(s["j"])(i))return void this._snappingOperation.abort();if(Object(s["j"])(this.snappingManager))return this.stagedVertex=i,void this._snappingOperation.abort();const r=this.snappingManager,o=new k["a"]({editGeometryOperations:this._editGeometryOperations,elevationInfo:this.elevationInfo,pointer:t.pointerType,visualizer:this.snappingVisualizer});this.updatingHandles.addPromise(Object(c["i"])(this._snappingOperation.snap(i,r,o)))}_closeOnVertex(t){this.stagedVertex=null;const e={componentIndex:0,vertexIndex:t,coordinates:this.coordinateHelper.vectorToArray(this._activeComponent.vertices[t].pos)};this.emit("cursor-update",{updated:null,vertices:[e],operation:"apply",type:"vertex-update"})}_screenToMap(t){return this._getDrawSurface().screenToMap(t)}_screenToMapDragEventStep(){let t=null;return e=>{if("start"===e.action&&(t=this._screenToMap(e.screenStart)),Object(s["j"])(t))return null;const n=this._screenToMap(e.screenEnd);return Object(s["k"])(n)?{...e,mapStart:t,mapEnd:n}:null}}_vertexWithinPointerDistance(t,e){const n=25,i=this._mapToScreen(this.coordinateHelper.vectorToDehydratedPoint(t));return!!Object(s["k"])(i)&&G(i,e,n)}_calculateVertexTooltipElevation(t){const{tooltipOptions:e,view:n}=this;if(Object(s["j"])(t)||"2d"===n.type)return this._defaultElevation;const i=this.elevationInfo,r=e.elevation.mode,{spatialReference:o}=t,a=Object(h["g"])(o),c=Object(v["a"])(n,t,i,{mode:r,offset:0});return Object(l["c"])(c*a,"meters")}_getTooltipInfo(){const{tooltipOptions:t,stagedOrLastVertex:e}=this;if(Object(s["j"])(e))return null;this._tooltipContext.calculateElevation=t=>this._calculateVertexTooltipElevation(t);const n=this._elevationTooltipDetail(e);switch(this.geometryType){case"point":return new V({tooltipOptions:t,elevation:n});case"polyline":return this._tooltipContext.calculateTotalLength=E(this._editGeometryOperations.data.geometry,this.isDraped?"on-the-ground":"absolute-height"),new P({tooltipOptions:t,elevation:n,totalLength:this._totalLengthTooltipDetail(e)});case"polygon":return this._tooltipContext.calculateArea=W(this._editGeometryOperations.data.geometry,this.isDraped),new I({tooltipOptions:t,elevation:n,area:this._areaTooltipDetail(e)});default:return null}}_elevationTooltipDetail(t){return{mode:this.elevationInfo.mode,...Object(s["r"])(this._tooltipContext.calculateElevation)(t)}}_totalLengthTooltipDetail(t){return{...Object(s["s"])(Object(s["r"])(this._tooltipContext.calculateTotalLength)(t),Object(l["c"])(0,"meters"))}}_areaTooltipDetail(t){return{...Object(s["s"])(Object(s["r"])(this._tooltipContext.calculateArea)(t),Object(l["b"])(0,"square-meters"))}}_updateTooltipInfo(){const t=this._tooltip;if(Object(s["j"])(t))return;const{stagedOrLastVertex:e}=this,n=this._elevationTooltipDetail(e);switch(this.geometryType){case"point":t.info.elevation=n;break;case"polyline":{const i=t.info;i.elevation=n,i.totalLength=this._totalLengthTooltipDetail(e);break}case"polygon":{const i=t.info;i.elevation=n,i.area=this._areaTooltipDetail(e);break}}}get test(){return{tooltip:this._tooltip}}};function G(t,e,n){const i=t.x-e.x,r=t.y-e.y;return i*i+r*r<=n}Object(i["a"])([Object(b["b"])()],F.prototype,"_defaultElevation",null),Object(i["a"])([Object(b["b"])()],F.prototype,"defaultZ",void 0),Object(i["a"])([Object(b["b"])()],F.prototype,"isDraped",void 0),Object(i["a"])([Object(b["b"])({value:j["a"]})],F.prototype,"drawingMode",null),Object(i["a"])([Object(b["b"])({constructOnly:!0})],F.prototype,"elevationDrawSurface",void 0),Object(i["a"])([Object(b["b"])({constructOnly:!0})],F.prototype,"elevationInfo",void 0),Object(i["a"])([Object(b["b"])({constructOnly:!0,type:w["a"]})],F.prototype,"labelOptions",void 0),Object(i["a"])([Object(b["b"])({constructOnly:!0,type:T["a"]})],F.prototype,"tooltipOptions",void 0),Object(i["a"])([Object(b["b"])({constructOnly:!0})],F.prototype,"geometryType",void 0),Object(i["a"])([Object(b["b"])({constructOnly:!0})],F.prototype,"hasM",void 0),Object(i["a"])([Object(b["b"])({constructOnly:!0})],F.prototype,"hasZ",void 0),Object(i["a"])([Object(b["b"])({constructOnly:!0})],F.prototype,"manipulators",void 0),Object(i["a"])([Object(b["b"])({constructOnly:!0})],F.prototype,"drawSurface",void 0),Object(i["a"])([Object(b["b"])({constructOnly:!0})],F.prototype,"segmentLabels",void 0),Object(i["a"])([Object(b["b"])({constructOnly:!0})],F.prototype,"snappingManager",void 0),Object(i["a"])([Object(b["b"])({constructOnly:!0})],F.prototype,"snappingVisualizer",void 0),Object(i["a"])([Object(b["b"])()],F.prototype,"snapToSceneEnabled",void 0),Object(i["a"])([Object(b["b"])()],F.prototype,"_snappingOperation",void 0),Object(i["a"])([Object(b["b"])()],F.prototype,"stagedVertex",null),Object(i["a"])([Object(b["b"])()],F.prototype,"updating",null),Object(i["a"])([Object(b["b"])({constructOnly:!0})],F.prototype,"view",void 0),F=Object(i["a"])([Object(d["a"])("esri.views.draw.DrawOperation")],F)},f315:function(t,e,n){"use strict";n.d(e,"a",(function(){return c})),n.d(e,"b",(function(){return s})),n.d(e,"c",(function(){return a})),n.d(e,"d",(function(){return u})),n.d(e,"e",(function(){return l})),n.d(e,"f",(function(){return p}));var i=n("b2b2"),r=n("8048");function o(t,e){return{type:Object(r["y"])(e),value:t,unit:e}}function a(t,e){return{type:Object(r["y"])(e),value:t,unit:e}}function s(t,e){return{type:Object(r["y"])(e),value:t,unit:e}}function c(t,e,n="arithmetic"){return{type:Object(r["y"])(e),value:t,unit:e,rotationType:n}}function l(t,e){return o(Object(r["d"])(t.value,t.unit,e),e)}function u(t,e){return Object(i["j"])(t)?e:Object(i["j"])(e)||t.value>Object(r["d"])(e.value,e.unit,t.unit)?t:e}const p=a(0,"meters")}}]);
//# sourceMappingURL=chunk-57398abb.45c76e99.js.map