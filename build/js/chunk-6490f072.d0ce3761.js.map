{"version":3,"sources":["webpack:///./node_modules/@arcgis/core/layers/support/WMTSLayerInfo.js","webpack:///./node_modules/@arcgis/core/layers/ogc/xmlUtils.js","webpack:///./node_modules/@arcgis/core/layers/ogc/crsUtils.js","webpack:///./node_modules/@arcgis/core/layers/WebTileLayer.js","webpack:///./node_modules/@arcgis/core/layers/support/TileInfoTilemapCache.js","webpack:///./node_modules/@arcgis/core/layers/support/TileMatrixSet.js","webpack:///./node_modules/@arcgis/core/layers/support/WMTSStyle.js","webpack:///./node_modules/@arcgis/core/layers/support/WMTSSublayer.js","webpack:///./node_modules/@arcgis/core/layers/support/wmtsUtils.js","webpack:///./node_modules/@arcgis/core/layers/WMTSLayer.js"],"names":["i","p","t","constructor","r","super","clone","customLayerParameters","e","this","customParameters","layerIdentifier","tileMatrixSet","url","o","json","type","Object","write","prototype","String","s","n","c","children","localName","some","R","y","d","v","f","h","l","copyright","fullExtent","b","T","WebMercator","legendEnabled","isReference","popupEnabled","spatialReference","subDomains","tileInfo","g","size","dpi","format","compressionQuality","origin","S","x","lods","w","level","scale","resolution","urlTemplate","wmtsInfo","normalizeCtorArgs","load","loadFromPortal","supportedTypes","then","equals","length","authority","includes","title","id","addResolvingPromise","Promise","resolve","levelValue","readSpatialReference","fromJSON","scheme","split","push","replace","map","charAt","substring","readUrlTemplate","templateUrl","writeUrlTemplate","fetchTile","signal","getTileUrl","responseType","query","refreshParameters","data","levelValues","tileServers","urlPath","z","col","row","a","value","nonNullable","readOnly","read","Boolean","enabled","overridePolicy","origins","source","m","j","u","minLOD","maxLOD","getAvailability","lodAt","cols","rows","updateTileInfo","upsampleTile","hasOwnProperty","description","legendUrl","isDefault","keywords","slice","fullExtents","imageFormats","layer","styles","tileMatrixSetId","tileMatrixSets","_get","_set","readFullExtent","readFullExtents","filter","console","error","getItemAt","find","imageFormat","styleId","ofType","ignoreOrigin","DOMParser","parseFromString","documentElement","text","Map","querySelector","getElementsByTagName","Array","call","indexOf","serviceMode","attributes","nodeValue","getAttribute","M","test","V","set","C","dimensionMap","layerMap","layers","tileUrl","forEach","U","wkid","nodeType","Node","ELEMENT_NODE","childNodes","nodeName","textContent","formats","E","get","dimensions","dimensions2","toLowerCase","template","resourceType","xmin","parseFloat","ymin","xmax","ymax","BoundingBox","I","LowerCorner","Number","UpperCorner","abstract","L","minCol","maxCol","minRow","maxRow","N","parseInt","D","F","toJSON","pop","k","A","O","CRS84","CRS83","CRS27","values","Math","PI","metersPerDegree","W","Set","_sublayersHandles","operationalLayerType","resourceInfo","sublayers","version","own","activeLayer","removeAll","add","on","item","catch","_fetchService","readActiveLayerFromService","readActiveLayerFromItemOrWebDoc","_getLowerCasedUrlParams","isArray","style","writeActiveLayer","getUrlTemplate","readCustomParameters","_mergeParams","readServiceMode","readSublayersFromService","toArray","_override","_clearOverride","substr","createWebTileLayer","_getTileMatrixSetById","findSublayerById","_","_appendCustomLayerParameters","ssl","_getCapabilities","_getCapabilitiesUrl","_appendCustomParameters","_appendParameters","path","keys","has","P","target","service"],"mappings":"iIAAA,sCAIgWA,EAJhW,wEAIkW,IAAIC,EAAED,EAAE,cAAcE,OAAEC,YAAYC,GAAGC,MAAMD,GAAGE,QAAQ,OAAO,IAAIN,EAAE,CAACO,sBAAsBC,eAAEC,KAAKF,uBAAuBG,iBAAiBF,eAAEC,KAAKC,kBAAkBC,gBAAgBF,KAAKE,gBAAgBC,cAAcH,KAAKG,cAAcC,IAAIJ,KAAKI,QAAQT,eAAE,CAACU,eAAE,CAACC,KAAK,CAACC,KAAKC,OAAOC,OAAM,MAAOjB,EAAEkB,UAAU,6BAAwB,GAAQf,eAAE,CAACU,eAAE,CAACC,KAAK,CAACC,KAAKC,OAAOC,OAAM,MAAOjB,EAAEkB,UAAU,wBAAmB,GAAQf,eAAE,CAACU,eAAE,CAACE,KAAKI,OAAOL,KAAK,CAACG,OAAM,MAAOjB,EAAEkB,UAAU,uBAAkB,GAAQf,eAAE,CAACU,eAAE,CAACE,KAAKI,OAAOL,KAAK,CAACG,OAAM,MAAOjB,EAAEkB,UAAU,qBAAgB,GAAQf,eAAE,CAACU,eAAE,CAACE,KAAKI,OAAOL,KAAK,CAACG,OAAM,MAAOjB,EAAEkB,UAAU,WAAM,GAAQlB,EAAED,EAAEI,eAAE,CAACiB,eAAE,qCAAqCpB,I,oCCA3/B,SAASa,EAAEQ,EAAEC,GAAG,IAAI,MAAMf,KAAKc,EAAEE,SAAS,GAAGhB,EAAEiB,aAAaF,EAAE,CAAC,MAAMD,EAAEC,EAAEf,EAAEiB,WAAW,GAAG,mBAAmBH,EAAE,CAAC,MAAMC,EAAED,EAAEd,GAAGe,GAAGT,EAAEN,EAAEe,QAAQT,EAAEN,EAAEc,IAAI,SAASA,EAAER,EAAES,GAAG,IAAI,MAAMf,KAAKM,EAAEU,SAAS,GAAGhB,EAAEiB,aAAaF,EAAE,CAAC,MAAMT,EAAES,EAAEf,EAAEiB,WAAW,mBAAmBX,QAAQA,EAAEN,SAASc,EAAEd,EAAEM,IAJnR,qE,kCCAA,kCAIA,MAAMQ,EAAE,CAAC,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CA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","file":"js/chunk-6490f072.d0ce3761.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../chunks/tslib.es6.js\";import{JSONSupport as t}from\"../../core/JSONSupport.js\";import{clone as e}from\"../../core/lang.js\";import{property as o}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/accessorSupport/ensureType.js\";import{subclass as s}from\"../../core/accessorSupport/decorators/subclass.js\";var i;let p=i=class extends t{constructor(r){super(r)}clone(){return new i({customLayerParameters:e(this.customLayerParameters),customParameters:e(this.customParameters),layerIdentifier:this.layerIdentifier,tileMatrixSet:this.tileMatrixSet,url:this.url})}};r([o({json:{type:Object,write:!0}})],p.prototype,\"customLayerParameters\",void 0),r([o({json:{type:Object,write:!0}})],p.prototype,\"customParameters\",void 0),r([o({type:String,json:{write:!0}})],p.prototype,\"layerIdentifier\",void 0),r([o({type:String,json:{write:!0}})],p.prototype,\"tileMatrixSet\",void 0),r([o({type:String,json:{write:!0}})],p.prototype,\"url\",void 0),p=i=r([s(\"esri.layer.support.WMTSLayerInfo\")],p);export{p as WMTSLayerInfo};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nfunction o(n,c){for(const e of n.children)if(e.localName in c){const n=c[e.localName];if(\"function\"==typeof n){const c=n(e);c&&o(e,c)}else o(e,n)}}function*n(o,c){for(const e of o.children)if(e.localName in c){const o=c[e.localName];\"function\"==typeof o?yield o(e):yield*n(e,o)}}export{n as iterateXML,o as visitXML};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nconst n=[[3819,3819],[3821,3824],[3889,3889],[3906,3906],[4001,4025],[4027,4036],[4039,4047],[4052,4055],[4074,4075],[4080,4081],[4120,4176],[4178,4185],[4188,4216],[4218,4289],[4291,4304],[4306,4319],[4322,4326],[4463,4463],[4470,4470],[4475,4475],[4483,4483],[4490,4490],[4555,4558],[4600,4646],[4657,4765],[4801,4811],[4813,4821],[4823,4824],[4901,4904],[5013,5013],[5132,5132],[5228,5229],[5233,5233],[5246,5246],[5252,5252],[5264,5264],[5324,5340],[5354,5354],[5360,5360],[5365,5365],[5370,5373],[5381,5381],[5393,5393],[5451,5451],[5464,5464],[5467,5467],[5489,5489],[5524,5524],[5527,5527],[5546,5546],[2044,2045],[2081,2083],[2085,2086],[2093,2093],[2096,2098],[2105,2132],[2169,2170],[2176,2180],[2193,2193],[2200,2200],[2206,2212],[2319,2319],[2320,2462],[2523,2549],[2551,2735],[2738,2758],[2935,2941],[2953,2953],[3006,3030],[3034,3035],[3038,3051],[3058,3059],[3068,3068],[3114,3118],[3126,3138],[3150,3151],[3300,3301],[3328,3335],[3346,3346],[3350,3352],[3366,3366],[3389,3390],[3416,3417],[3833,3841],[3844,3850],[3854,3854],[3873,3885],[3907,3910],[4026,4026],[4037,4038],[4417,4417],[4434,4434],[4491,4554],[4839,4839],[5048,5048],[5105,5130],[5253,5259],[5269,5275],[5343,5349],[5479,5482],[5518,5519],[5520,5520],[20004,20032],[20064,20092],[21413,21423],[21473,21483],[21896,21899],[22171,22177],[22181,22187],[22191,22197],[25884,25884],[27205,27232],[27391,27398],[27492,27492],[28402,28432],[28462,28492],[30161,30179],[30800,30800],[31251,31259],[31275,31279],[31281,31290],[31466,31700]];function o(o){return n.some((([n,t])=>o>=n&&o<=t))}export{o as isAxesOrderReversedForWkid};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import\"../geometry.js\";import t from\"../request.js\";import r from\"../core/Error.js\";import{MultiOriginJSONMixin as l}from\"../core/MultiOriginJSONSupport.js\";import{replace as o}from\"../core/string.js\";import{Url as s,isProtocolRelative as i,normalize as n}from\"../core/urlUtils.js\";import{property as a}from\"../core/accessorSupport/decorators/property.js\";import\"../core/arrayUtils.js\";import\"../core/has.js\";import\"../core/accessorSupport/ensureType.js\";import{reader as p}from\"../core/accessorSupport/decorators/reader.js\";import{subclass as u}from\"../core/accessorSupport/decorators/subclass.js\";import{writer as m}from\"../core/accessorSupport/decorators/writer.js\";import c from\"./Layer.js\";import{BlendLayer as y}from\"./mixins/BlendLayer.js\";import{OperationalLayer as f}from\"./mixins/OperationalLayer.js\";import{PortalLayer as h}from\"./mixins/PortalLayer.js\";import{RefreshableLayer as d}from\"./mixins/RefreshableLayer.js\";import{ScaleRangeLayer as v}from\"./mixins/ScaleRangeLayer.js\";import w from\"./support/LOD.js\";import g from\"./support/TileInfo.js\";import{WMTSLayerInfo as j}from\"./support/WMTSLayerInfo.js\";import b from\"../geometry/Extent.js\";import T from\"../geometry/SpatialReference.js\";import S from\"../geometry/Point.js\";let R=class extends(y(d(v(f(h(l(c))))))){constructor(...e){super(...e),this.copyright=\"\",this.fullExtent=new b(-20037508.342787,-20037508.34278,20037508.34278,20037508.342787,T.WebMercator),this.legendEnabled=!1,this.isReference=null,this.popupEnabled=!1,this.spatialReference=T.WebMercator,this.subDomains=null,this.tileInfo=new g({size:[256,256],dpi:96,format:\"png8\",compressionQuality:0,origin:new S({x:-20037508.342787,y:20037508.342787,spatialReference:T.WebMercator}),spatialReference:T.WebMercator,lods:[new w({level:0,scale:591657527.591555,resolution:156543.033928}),new w({level:1,scale:295828763.795777,resolution:78271.5169639999}),new w({level:2,scale:147914381.897889,resolution:39135.7584820001}),new w({level:3,scale:73957190.948944,resolution:19567.8792409999}),new w({level:4,scale:36978595.474472,resolution:9783.93962049996}),new w({level:5,scale:18489297.737236,resolution:4891.96981024998}),new w({level:6,scale:9244648.868618,resolution:2445.98490512499}),new w({level:7,scale:4622324.434309,resolution:1222.99245256249}),new w({level:8,scale:2311162.217155,resolution:611.49622628138}),new w({level:9,scale:1155581.108577,resolution:305.748113140558}),new w({level:10,scale:577790.554289,resolution:152.874056570411}),new w({level:11,scale:288895.277144,resolution:76.4370282850732}),new w({level:12,scale:144447.638572,resolution:38.2185141425366}),new w({level:13,scale:72223.819286,resolution:19.1092570712683}),new w({level:14,scale:36111.909643,resolution:9.55462853563415}),new w({level:15,scale:18055.954822,resolution:4.77731426794937}),new w({level:16,scale:9027.977411,resolution:2.38865713397468}),new w({level:17,scale:4513.988705,resolution:1.19432856685505}),new w({level:18,scale:2256.994353,resolution:.597164283559817}),new w({level:19,scale:1128.497176,resolution:.298582141647617}),new w({level:20,scale:564.248588,resolution:.14929107082380833}),new w({level:21,scale:282.124294,resolution:.07464553541190416}),new w({level:22,scale:141.062147,resolution:.03732276770595208}),new w({level:23,scale:70.5310735,resolution:.01866138385297604})]}),this.type=\"web-tile\",this.urlTemplate=null,this.wmtsInfo=null}normalizeCtorArgs(e,t){return\"string\"==typeof e?{urlTemplate:e,...t}:e}load(e){const t=this.loadFromPortal({supportedTypes:[\"WMTS\"]},e).then((()=>{let e=\"\";if(this.urlTemplate)if(this.spatialReference.equals(this.tileInfo.spatialReference)){const t=new s(this.urlTemplate);!(!!this.subDomains&&this.subDomains.length>0)&&t.authority.includes(\"{subDomain}\")&&(e=\"is missing 'subDomains' property\")}else e=\"spatialReference must match tileInfo.spatialReference\";else e=\"is missing the required 'urlTemplate' property value\";if(e)throw new r(\"web-tile-layer:load\",`WebTileLayer (title: '${this.title}', id: '${this.id}') ${e}`)}));return this.addResolvingPromise(t),Promise.resolve(this)}get levelValues(){const e=[];if(!this.tileInfo)return null;for(const t of this.tileInfo.lods)e[t.level]=t.levelValue||t.level;return e}readSpatialReference(e,t){return e||t.fullExtent&&t.fullExtent.spatialReference&&T.fromJSON(t.fullExtent.spatialReference)}get tileServers(){if(!this.urlTemplate)return null;const e=[],{urlTemplate:t,subDomains:r}=this,l=new s(t),o=l.scheme?l.scheme+\"://\":\"//\",i=o+l.authority+\"/\";if(l.authority.includes(\"{subDomain}\")){if(r&&r.length>0&&l.authority.split(\".\").length>1)for(const s of r)e.push(o+l.authority.replace(/\\{subDomain\\}/gi,s)+\"/\")}else e.push(i);return e.map((e=>(\"/\"!==e.charAt(e.length-1)&&(e+=\"/\"),e)))}get urlPath(){if(!this.urlTemplate)return null;const e=this.urlTemplate,t=new s(e),r=(t.scheme?t.scheme+\"://\":\"//\")+t.authority+\"/\";return e.substring(r.length)}readUrlTemplate(e,t){return e||t.templateUrl}writeUrlTemplate(e,t){e&&i(e)&&(e=\"https:\"+e),e&&(e=e.replace(/\\{z\\}/gi,\"{level}\").replace(/\\{x\\}/gi,\"{col}\").replace(/\\{y\\}/gi,\"{row}\"),e=n(e)),t.templateUrl=e}fetchTile(e,r,l,o={}){const{signal:s}=o,i=this.getTileUrl(e,r,l),n={responseType:\"image\",signal:s,query:{...this.refreshParameters}};return t(i,n).then((e=>e.data))}getTileUrl(e,t,r){const l=this.levelValues[e];return this.tileServers[t%this.tileServers.length]+o(this.urlPath,{level:l,z:l,col:r,x:r,row:t,y:t})}};e([a({type:String,value:\"\",json:{write:!0}})],R.prototype,\"copyright\",void 0),e([a({type:b,json:{write:!0},nonNullable:!0})],R.prototype,\"fullExtent\",void 0),e([a({readOnly:!0,json:{read:!1,write:!1}})],R.prototype,\"legendEnabled\",void 0),e([a({type:[\"show\",\"hide\"]})],R.prototype,\"listMode\",void 0),e([a({json:{read:!0,write:!0}})],R.prototype,\"blendMode\",void 0),e([a()],R.prototype,\"levelValues\",null),e([a({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],R.prototype,\"isReference\",void 0),e([a({type:[\"WebTiledLayer\"],value:\"WebTiledLayer\"})],R.prototype,\"operationalLayerType\",void 0),e([a({readOnly:!0,json:{read:!1,write:!1}})],R.prototype,\"popupEnabled\",void 0),e([a({type:T})],R.prototype,\"spatialReference\",void 0),e([p(\"spatialReference\",[\"spatialReference\",\"fullExtent.spatialReference\"])],R.prototype,\"readSpatialReference\",null),e([a({type:[String],json:{write:!0}})],R.prototype,\"subDomains\",void 0),e([a({type:g,json:{write:!0}})],R.prototype,\"tileInfo\",void 0),e([a({readOnly:!0})],R.prototype,\"tileServers\",null),e([a({json:{read:!1}})],R.prototype,\"type\",void 0),e([a()],R.prototype,\"urlPath\",null),e([a({type:String,json:{origins:{\"portal-item\":{read:{source:\"url\"}}}}})],R.prototype,\"urlTemplate\",void 0),e([p(\"urlTemplate\",[\"urlTemplate\",\"templateUrl\"])],R.prototype,\"readUrlTemplate\",null),e([m(\"urlTemplate\",{templateUrl:{type:String}})],R.prototype,\"writeUrlTemplate\",null),e([a({type:j,json:{write:!0}})],R.prototype,\"wmtsInfo\",void 0),R=e([u(\"esri.layers.WebTileLayer\")],R);const x=R;export{x as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{waitTick as i}from\"../../core/promiseUtils.js\";class l{constructor(i,l=0,a=i.lods.length-1){this.tileInfo=i,this.minLOD=l,this.maxLOD=a}getAvailability(i,l,a){const t=this.tileInfo.lodAt(i);return!t||i<this.minLOD||i>this.maxLOD?\"unavailable\":t.cols&&t.rows?a>=t.cols[0]&&a<=t.cols[1]&&l>=t.rows[0]&&l<=t.rows[1]?\"available\":\"unavailable\":\"available\"}async fetchAvailability(l,a,t,e){return await i(e),this.getAvailability(l,a,t)}async fetchAvailabilityUpsample(l,a,t,e,s){await i(s),e.level=l,e.row=a,e.col=t;const o=this.tileInfo;for(o.updateTileInfo(e);;){const i=this.getAvailability(e.level,e.row,e.col);if(\"unavailable\"!==i)return i;if(!o.upsampleTile(e))return\"unavailable\"}}}export{l as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../chunks/tslib.es6.js\";import{JSONSupport as o}from\"../../core/JSONSupport.js\";import{property as r}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/arrayUtils.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import{subclass as e}from\"../../core/accessorSupport/decorators/subclass.js\";import s from\"../../geometry/Extent.js\";import i from\"./TileInfo.js\";var l;let n=l=class extends o{constructor(t){super(t),this.fullExtent=null,this.id=null,this.tileInfo=null}clone(){const t=new l;return this.hasOwnProperty(\"fullExtent\")&&(t.fullExtent=this.fullExtent&&this.fullExtent.clone()),this.hasOwnProperty(\"id\")&&(t.id=this.id),this.hasOwnProperty(\"tileInfo\")&&(t.tileInfo=this.tileInfo&&this.tileInfo.clone()),t}};t([r({type:s,json:{read:{source:\"fullExtent\"}}})],n.prototype,\"fullExtent\",void 0),t([r({type:String,json:{read:{source:\"id\"}}})],n.prototype,\"id\",void 0),t([r({type:i,json:{read:{source:\"tileInfo\"}}})],n.prototype,\"tileInfo\",void 0),n=l=t([e(\"esri.layer.support.TileMatrixSet\")],n);const p=n;export{p as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../chunks/tslib.es6.js\";import{JSONSupport as s}from\"../../core/JSONSupport.js\";import{property as e}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/arrayUtils.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import{subclass as t}from\"../../core/accessorSupport/decorators/subclass.js\";var o;let i=o=class extends s{constructor(r){super(r),this.id=null,this.title=null,this.description=null,this.legendUrl=null}clone(){const r=new o;return this.hasOwnProperty(\"description\")&&(r.description=this.description),this.hasOwnProperty(\"id\")&&(r.id=this.id),this.hasOwnProperty(\"isDefault\")&&(r.isDefault=this.isDefault),this.hasOwnProperty(\"keywords\")&&(r.keywords=this.keywords&&this.keywords.slice()),this.hasOwnProperty(\"legendUrl\")&&(r.legendUrl=this.legendUrl),this.hasOwnProperty(\"title\")&&(r.title=this.title),r}};r([e({json:{read:{source:\"id\"}}})],i.prototype,\"id\",void 0),r([e({json:{read:{source:\"title\"}}})],i.prototype,\"title\",void 0),r([e({json:{read:{source:\"abstract\"}}})],i.prototype,\"description\",void 0),r([e({json:{read:{source:\"legendUrl\"}}})],i.prototype,\"legendUrl\",void 0),r([e({json:{read:{source:\"isDefault\"}}})],i.prototype,\"isDefault\",void 0),r([e({json:{read:{source:\"keywords\"}}})],i.prototype,\"keywords\",void 0),i=o=r([t(\"esri.layer.support.WMTSStyle\")],i);const p=i;export{p as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../chunks/tslib.es6.js\";import e from\"../../core/Collection.js\";import{JSONSupport as s}from\"../../core/JSONSupport.js\";import{property as r}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/arrayUtils.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import{reader as i}from\"../../core/accessorSupport/decorators/reader.js\";import{subclass as l}from\"../../core/accessorSupport/decorators/subclass.js\";import o from\"../../geometry/Extent.js\";import a from\"./TileMatrixSet.js\";import n from\"./WMTSStyle.js\";var p;let h=p=class extends s{constructor(t){super(t),this.fullExtent=null,this.fullExtents=null,this.imageFormats=null,this.id=null,this.layer=null,this.styles=null,this.tileMatrixSetId=null,this.tileMatrixSets=null}get description(){return this._get(\"description\")}set description(t){this._set(\"description\",t)}readFullExtent(t,e){return(t=e.fullExtent)?o.fromJSON(t):null}readFullExtents(t,e){return e.fullExtents?.length?e.fullExtents.map((t=>o.fromJSON(t))):e.tileMatrixSets.map((t=>o.fromJSON(t.fullExtent))).filter((t=>t))}get imageFormat(){let t=this._get(\"imageFormat\");return t||(t=this.imageFormats&&this.imageFormats.length?this.imageFormats[0]:\"\"),t}set imageFormat(t){const e=this.imageFormats;t&&(t.includes(\"image/\")||e&&!e.includes(t))&&(t.includes(\"image/\")||(t=\"image/\"+t),e&&!e.includes(t))?console.error(\"The layer doesn't support the format of \"+t):this._set(\"imageFormat\",t)}get styleId(){let t=this._get(\"styleId\");return t||(t=this.styles&&this.styles.length?this.styles.getItemAt(0).id:\"\"),t}set styleId(t){this._set(\"styleId\",t)}get title(){return this._get(\"title\")}set title(t){this._set(\"title\",t)}get tileMatrixSet(){return this.tileMatrixSets?this.tileMatrixSets.find((t=>t.id===this.tileMatrixSetId)):null}clone(){const t=new p;return this.hasOwnProperty(\"description\")&&(t.description=this.description),this.hasOwnProperty(\"imageFormats\")&&(t.imageFormats=this.imageFormats&&this.imageFormats.slice()),this.hasOwnProperty(\"imageFormat\")&&(t.imageFormat=this.imageFormat),this.hasOwnProperty(\"fullExtent\")&&(t.fullExtent=this.fullExtent&&this.fullExtent.clone()),this.hasOwnProperty(\"id\")&&(t.id=this.id),this.hasOwnProperty(\"layer\")&&(t.layer=this.layer),this.hasOwnProperty(\"styleId\")&&(t.styleId=this.styleId),this.hasOwnProperty(\"styles\")&&(t.styles=this.styles&&this.styles.clone()),this.hasOwnProperty(\"tileMatrixSetId\")&&(t.tileMatrixSetId=this.tileMatrixSetId),this.hasOwnProperty(\"tileMatrixSets\")&&(t.tileMatrixSets=this.tileMatrixSets.clone()),this.hasOwnProperty(\"title\")&&(t.title=this.title),t}};t([r()],h.prototype,\"description\",null),t([r()],h.prototype,\"fullExtent\",void 0),t([i(\"fullExtent\",[\"fullExtent\"])],h.prototype,\"readFullExtent\",null),t([r({readOnly:!0})],h.prototype,\"fullExtents\",void 0),t([i(\"fullExtents\",[\"fullExtents\",\"tileMatrixSets\"])],h.prototype,\"readFullExtents\",null),t([r()],h.prototype,\"imageFormat\",null),t([r({json:{read:{source:\"formats\"}}})],h.prototype,\"imageFormats\",void 0),t([r()],h.prototype,\"id\",void 0),t([r()],h.prototype,\"layer\",void 0),t([r()],h.prototype,\"styleId\",null),t([r({type:e.ofType(n),json:{read:{source:\"styles\"}}})],h.prototype,\"styles\",void 0),t([r({value:null,json:{write:{ignoreOrigin:!0}}})],h.prototype,\"title\",null),t([r()],h.prototype,\"tileMatrixSetId\",void 0),t([r({readOnly:!0})],h.prototype,\"tileMatrixSet\",null),t([r({type:e.ofType(a),json:{read:{source:\"tileMatrixSets\"}}})],h.prototype,\"tileMatrixSets\",void 0),h=p=t([l(\"esri.layers.support.WMTSSublayer\")],h);const m=h;export{m as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport e from\"../../core/Error.js\";import{isSome as t}from\"../../core/maybe.js\";import n from\"../../geometry/Extent.js\";import i from\"../../geometry/Point.js\";import{getReferenceEllipsoidFromWKID as r}from\"../../geometry/projectionEllipsoid.js\";import o from\"../../geometry/support/WKIDUnitConversion.js\";import{isAxesOrderReversedForWkid as l}from\"../ogc/crsUtils.js\";import{visitXML as s}from\"../ogc/xmlUtils.js\";import a from\"./TileInfo.js\";const c=90.71428571428571;function u(t){const n=t.replace(/ows:/gi,\"\");if(!m(\"Contents\",(new DOMParser).parseFromString(n,\"text/xml\").documentElement))throw new e(\"wmtslayer:wmts-capabilities-xml-is-not-valid\",\"the wmts get capabilities response is not compliant\",{text:t})}function p(t,n){t=t.replace(/ows:/gi,\"\");const i=(new DOMParser).parseFromString(t,\"text/xml\").documentElement,r=new Map,o=new Map,l=m(\"Contents\",i);if(!l)throw new e(\"wmtslayer:wmts-capabilities-xml-is-not-valid\");const s=m(\"OperationsMetadata\",i)?.querySelector(\"[name='GetTile']\"),a=s?.getElementsByTagName(\"Get\"),c=a&&Array.prototype.slice.call(a),u=n?.url?.indexOf(\"https\")>-1??!1;let p,f,d=n.serviceMode,x=n&&n.url;if(c&&c.length&&c.some((e=>{const t=m(\"Constraint\",e);return!t||w(\"AllowedValues\",\"Value\",d,t)?(x=e.attributes[0].nodeValue,!0):(!t||w(\"AllowedValues\",\"Value\",\"RESTful\",t)||w(\"AllowedValues\",\"Value\",\"REST\",t)?f=e.attributes[0].nodeValue:t&&!w(\"AllowedValues\",\"Value\",\"KVP\",t)||(p=e.attributes[0].nodeValue),!1)})),!x)if(f)x=f,d=\"RESTful\";else if(p)x=p,d=\"KVP\";else{const e=m(\"ServiceMetadataURL\",i);x=e&&e.getAttribute(\"xlink:href\")}const M=x.indexOf(\"1.0.0/\");-1===M&&\"RESTful\"===d?x+=\"/\":M>-1&&(x=x.substring(0,M)),\"KVP\"===d&&(x+=M>-1?\"\":\"?\"),u&&(x=x.replace(/^http:/i,\"https:\"));const T=h(\"ServiceIdentification>ServiceTypeVersion\",i),y=h(\"ServiceIdentification>AccessConstraints\",i),S=/^none$/i.test(y)?null:y,R=g(\"Layer\",l),V=g(\"TileMatrixSet\",l),b=R.map((e=>{const t=h(\"Identifier\",e);return r.set(t,e),C(t,e,V,u,T)}));return{copyright:S,dimensionMap:o,layerMap:r,layers:b,serviceMode:d,tileUrl:x}}function f(e){return e.layers.forEach((e=>{e.tileMatrixSets.forEach((e=>{const t=e.tileInfo;96!==t.dpi&&(t.lods.forEach((n=>{n.scale=96*n.scale/t.dpi,n.resolution=U(t.spatialReference.wkid,n.scale*c/96,e.id)})),t.dpi=96)}))})),e}function d(e){return e.nodeType===Node.ELEMENT_NODE}function m(e,t){for(let n=0;n<t.childNodes.length;n++){const i=t.childNodes[n];if(d(i)&&i.nodeName===e)return i}return null}function g(e,t){const n=[];for(let i=0;i<t.childNodes.length;i++){const r=t.childNodes[i];d(r)&&r.nodeName===e&&n.push(r)}return n}function x(e,t){const n=[];for(let i=0;i<t.childNodes.length;i++){const r=t.childNodes[i];d(r)&&r.nodeName===e&&n.push(r)}return n.map((e=>e.textContent))}function h(e,t){return e.split(\">\").forEach((e=>{t&&(t=m(e,t))})),t&&t.textContent}function w(e,t,n,i){let r;return Array.prototype.slice.call(i.childNodes).some((i=>{if(i.nodeName.includes(e)){const e=m(t,i),o=e&&e.textContent;if(o===n||n.split(\":\")&&n.split(\":\")[1]===o)return r=i,!0}return!1})),r}function C(e,t,n,i,r){const o=h(\"Abstract\",t),l=x(\"Format\",t);return{id:e,fullExtent:R(t),fullExtents:V(t),description:o,formats:l,styles:b(t,i),title:h(\"Title\",t),tileMatrixSets:E(r,t,n)}}function M(e,t){const n=[],i=e.layerMap?.get(t);if(!i)return;const r=g(\"ResourceURL\",i),o=g(\"Dimension\",i);let l,s,a,c;return o.length&&(l=h(\"Identifier\",o[0]),s=x(\"Default\",o[0])||x(\"Value\",o[0])),o.length>1&&(a=h(\"Identifier\",o[1]),c=x(\"Default\",o[1])||x(\"Value\",o[1])),e.dimensionMap.set(t,{dimensions:s,dimensions2:c}),r.forEach((e=>{let t=e.getAttribute(\"template\");if(\"tile\"===e.getAttribute(\"resourceType\")){if(l&&s.length)if(t.includes(\"{\"+l+\"}\"))t=t.replace(\"{\"+l+\"}\",\"{dimensionValue}\");else{const e=t.toLowerCase().indexOf(\"{\"+l.toLowerCase()+\"}\");e>-1&&(t=t.substring(0,e)+\"{dimensionValue}\"+t.substring(e+l.length+2))}if(a&&c.length)if(t.includes(\"{\"+a+\"}\"))t=t.replace(\"{\"+a+\"}\",\"{dimensionValue2}\");else{const e=t.toLowerCase().indexOf(\"{\"+a.toLowerCase()+\"}\");e>-1&&(t=t.substring(0,e)+\"{dimensionValue2}\"+t.substring(e+a.length+2))}n.push({template:t,format:e.getAttribute(\"format\"),resourceType:\"tile\"})}})),n}function T(e,t,n,i,r,o,l,s){const a=y(e,t,i);if(!(a?.length>0))return\"\";const{dimensionMap:c}=e,u=c.get(t).dimensions?.[0],p=c.get(t).dimensions2?.[0];return a[l%a.length].template.replace(/\\{Style\\}/gi,r).replace(/\\{TileMatrixSet\\}/gi,n).replace(/\\{TileMatrix\\}/gi,o).replace(/\\{TileRow\\}/gi,\"\"+l).replace(/\\{TileCol\\}/gi,\"\"+s).replace(/\\{dimensionValue\\}/gi,u).replace(/\\{dimensionValue2\\}/gi,p)}function y(e,t,n){const i=M(e,t),r=i.filter((e=>e.format===n));return r.length?r:i}function S(e,t,n,i){const{dimensionMap:r}=e,o=M(e,t);let l=\"\";if(o&&o.length>0){const e=r.get(t).dimensions&&r.get(t).dimensions[0],s=r.get(t).dimensions2&&r.get(t).dimensions2[0];l=o[0].template,l.indexOf(\".xxx\")===l.length-4&&(l=l.slice(0,l.length-4)),l=l.replace(/\\{Style\\}/gi,i),l=l.replace(/\\{TileMatrixSet\\}/gi,n),l=l.replace(/\\{TileMatrix\\}/gi,\"{level}\"),l=l.replace(/\\{TileRow\\}/gi,\"{row}\"),l=l.replace(/\\{TileCol\\}/gi,\"{col}\"),l=l.replace(/\\{dimensionValue\\}/gi,e),l=l.replace(/\\{dimensionValue2\\}/gi,s)}return l}function R(e){const t=m(\"WGS84BoundingBox\",e),n=t?h(\"LowerCorner\",t).split(\" \"):[\"-180\",\"-90\"],i=t?h(\"UpperCorner\",t).split(\" \"):[\"180\",\"90\"];return{xmin:parseFloat(n[0]),ymin:parseFloat(n[1]),xmax:parseFloat(i[0]),ymax:parseFloat(i[1]),spatialReference:{wkid:4326}}}function V(e){const t=[];return s(e,{BoundingBox:e=>{if(!e.getAttribute(\"crs\"))return;const n=e.getAttribute(\"crs\").toLowerCase(),i=I(n),r=n.includes(\"epsg\")&&l(i.wkid);let o,a,c,u;s(e,{LowerCorner:e=>{[o,a]=e.textContent.split(\" \").map((e=>Number.parseFloat(e))),r&&([o,a]=[a,o])},UpperCorner:e=>{[c,u]=e.textContent.split(\" \").map((e=>Number.parseFloat(e))),r&&([c,u]=[u,c])}}),t.push({xmin:o,ymin:a,xmax:c,ymax:u,spatialReference:i})}}),t}function b(e,t){return g(\"Style\",e).map((e=>{const n=m(\"LegendURL\",e),i=m(\"Keywords\",e),r=i&&x(\"Keyword\",i);let o=n&&n.getAttribute(\"xlink:href\");t&&(o=o&&o.replace(/^http:/i,\"https:\"));return{abstract:h(\"Abstract\",e),id:h(\"Identifier\",e),isDefault:\"true\"===e.getAttribute(\"isDefault\"),keywords:r,legendUrl:o,title:h(\"Title\",e)}}))}function E(e,t,n){return g(\"TileMatrixSetLink\",t).map((t=>L(e,t,n)))}function L(e,t,n){const i=m(\"TileMatrixSet\",t).textContent,r=x(\"TileMatrix\",t),o=n.find((e=>{const t=m(\"Identifier\",e),n=t&&t.textContent;return!!(n===i||i.split(\":\")&&i.split(\":\")[1]===n)})),l=m(\"TileMatrixSetLimits\",t),s=l&&g(\"TileMatrixLimits\",l),c=new Map;if(s?.length)for(const a of s){const e=m(\"TileMatrix\",a).textContent,t=+m(\"MinTileRow\",a).textContent,n=+m(\"MaxTileRow\",a).textContent,i=+m(\"MinTileCol\",a).textContent,r=+m(\"MaxTileCol\",a).textContent;c.set(e,{minCol:i,maxCol:r,minRow:t,maxRow:n})}const u=h(\"SupportedCRS\",o).toLowerCase(),p=N(o,u),f=p.spatialReference,d=m(\"TileMatrix\",o),C=[parseInt(h(\"TileWidth\",d),10),parseInt(h(\"TileHeight\",d),10)],M=[];if(r.length)r.forEach(((e,t)=>{const n=w(\"TileMatrix\",\"Identifier\",e,o);M.push(D(n,u,t,i,c))}));else{g(\"TileMatrix\",o).forEach(((e,t)=>{M.push(D(e,u,t,i,c))}))}const T=F(e,o,p,C,M[0]).toJSON(),y=new a({dpi:96,spatialReference:f,size:C,origin:p,lods:M}).toJSON();return{id:i,fullExtent:T,tileInfo:y}}function I(e){e=e.toLowerCase();let n=parseInt(e.split(\":\").pop(),10);900913!==n&&3857!==n||(n=102100);const i=k(e);return t(i)&&(n=i),{wkid:n}}function N(e,t){return A(m(\"TileMatrix\",e),t)}function A(e,t){const n=I(t),[r,o]=h(\"TopLeftCorner\",e).split(\" \").map((e=>parseFloat(e))),s=t.includes(\"epsg\")&&l(n.wkid);return new i(s?{x:o,y:r,spatialReference:n}:{x:r,y:o,spatialReference:n})}function F(e,t,i,r,o){const l=m(\"BoundingBox\",t);let s,a,c,u,p,f;if(l&&(s=h(\"LowerCorner\",l).split(\" \"),a=h(\"UpperCorner\",l).split(\" \")),s&&s.length>1&&a&&a.length>1)c=parseFloat(s[0]),p=parseFloat(s[1]),u=parseFloat(a[0]),f=parseFloat(a[1]);else{const e=m(\"TileMatrix\",t),n=parseInt(h(\"MatrixWidth\",e),10),l=parseInt(h(\"MatrixHeight\",e),10);c=i.x,f=i.y,u=c+n*r[0]*o.resolution,p=f-l*r[1]*o.resolution}return v(e,i.spatialReference)?new n(p,c,f,u,i.spatialReference):new n(c,p,u,f,i.spatialReference)}function v(e,t){return\"1.0.0\"===e&&l(t.wkid)}var O;function k(e){return e.includes(\"crs84\")||e.includes(\"crs:84\")?O.CRS84:e.includes(\"crs83\")||e.includes(\"crs:83\")?O.CRS83:e.includes(\"crs27\")||e.includes(\"crs:27\")?O.CRS27:null}function D(e,t,n,i,r){const o=I(t),l=h(\"Identifier\",e);let s=parseFloat(h(\"ScaleDenominator\",e));const a=U(o.wkid,s,i);s*=96/c;const u=+h(\"MatrixWidth\",e),p=+h(\"MatrixHeight\",e),{maxCol:f=u-1,maxRow:d=p-1,minCol:m=0,minRow:g=0}=r.get(l)??{},{x,y:w}=A(e,t);return{cols:[m,f],level:n,levelValue:l,origin:[x,w],scale:s,resolution:a,rows:[g,d]}}function U(e,t,n){let i;return i=o.hasOwnProperty(\"\"+e)?o.values[o[e]]:\"default028mm\"===n?6370997*Math.PI/180:r(e).metersPerDegree,7*t/25e3/i}!function(e){e[e.CRS84=4326]=\"CRS84\",e[e.CRS83=4269]=\"CRS83\",e[e.CRS27=4267]=\"CRS27\"}(O||(O={}));export{T as getTileUrlFromResourceUrls,S as getTileUrlTemplateFromResourceUrls,y as getTileUrlTemplates,p as parseCapabilities,f as parseResourceInfo,u as validateCapabilities};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import t from\"../request.js\";import r from\"../core/Collection.js\";import i from\"../core/Error.js\";import s from\"../core/Handles.js\";import{clone as a}from\"../core/lang.js\";import{MultiOriginJSONMixin as o}from\"../core/MultiOriginJSONSupport.js\";import{getDeepValue as l}from\"../core/object.js\";import{throwIfAbortError as n}from\"../core/promiseUtils.js\";import{watch as m,sync as p}from\"../core/reactiveUtils.js\";import{urlToObject as c,objectToQuery as u}from\"../core/urlUtils.js\";import{property as y}from\"../core/accessorSupport/decorators/property.js\";import\"../core/accessorSupport/ensureType.js\";import{reader as d}from\"../core/accessorSupport/decorators/reader.js\";import{subclass as h}from\"../core/accessorSupport/decorators/subclass.js\";import{writer as f}from\"../core/accessorSupport/decorators/writer.js\";import v from\"../geometry/Extent.js\";import g from\"./Layer.js\";import w from\"./WebTileLayer.js\";import{BlendLayer as L}from\"./mixins/BlendLayer.js\";import{OperationalLayer as I}from\"./mixins/OperationalLayer.js\";import{PortalLayer as S}from\"./mixins/PortalLayer.js\";import{RefreshableLayer as M}from\"./mixins/RefreshableLayer.js\";import{ScaleRangeLayer as T}from\"./mixins/ScaleRangeLayer.js\";import P from\"./support/TileInfo.js\";import b from\"./support/TileInfoTilemapCache.js\";import{WMTSLayerInfo as j}from\"./support/WMTSLayerInfo.js\";import x from\"./support/WMTSSublayer.js\";import{getTileUrlFromResourceUrls as _,getTileUrlTemplateFromResourceUrls as E,validateCapabilities as C,parseCapabilities as U,parseResourceInfo as R}from\"./support/wmtsUtils.js\";const O={\"image/png\":\".png\",\"image/png8\":\".png\",\"image/png24\":\".png\",\"image/png32\":\".png\",\"image/jpg\":\".jpg\",\"image/jpeg\":\".jpeg\",\"image/gif\":\".gif\",\"image/bmp\":\".bmp\",\"image/tiff\":\".tif\",\"image/jpgpng\":\"\",\"image/jpegpng\":\"\",\"image/unknown\":\"\"},W=new Set([\"version\",\"service\",\"request\",\"layer\",\"style\",\"format\",\"tilematrixset\",\"tilematrix\",\"tilerow\",\"tilecol\"]);let A=class extends(L(M(T(I(S(o(g))))))){constructor(...e){super(...e),this._sublayersHandles=new s,this.copyright=\"\",this.customParameters=null,this.customLayerParameters=null,this.fullExtent=null,this.operationalLayerType=\"WebTiledLayer\",this.resourceInfo=null,this.serviceMode=\"RESTful\",this.sublayers=null,this.type=\"wmts\",this.version=\"1.0.0\",this.own([m((()=>this.activeLayer),((e,t)=>{t&&(t.layer=null),e&&(e.layer=this)}),p),m((()=>this.sublayers),((e,t)=>{t&&(t.forEach((e=>{e.layer=null})),this._sublayersHandles.removeAll(),this._sublayersHandles=null),e&&(e.forEach((e=>{e.layer=this})),this._sublayersHandles||(this._sublayersHandles=new s),this._sublayersHandles.add([e.on(\"after-add\",(({item:e})=>{e.layer=this})),e.on(\"after-remove\",(({item:e})=>{e.layer=null}))]))}),p)])}normalizeCtorArgs(e,t){return\"string\"==typeof e?{url:e,...t}:e}load(e){if(\"KVP\"===this.serviceMode||\"RESTful\"===this.serviceMode)return this.addResolvingPromise(this.loadFromPortal({supportedTypes:[\"WMTS\"]},e).catch(n).then((()=>this._fetchService(e))).catch((e=>{throw n(e),new i(\"wmtslayer:unsupported-service-data\",\"Invalid response from the WMTS service.\",{error:e})}))),Promise.resolve(this);console.error(\"WMTS mode could only be 'KVP' or 'RESTful'\")}get activeLayer(){return this._get(\"activeLayer\")}set activeLayer(e){this._set(\"activeLayer\",e)}readActiveLayerFromService(e,t,r){this.activeLayer||(this.activeLayer=new x);let i=t.layers.find((e=>e.id===this.activeLayer.id));return i||(i=t.layers[0]),this.activeLayer.read(i,r),this.activeLayer}readActiveLayerFromItemOrWebDoc(e,t){const{templateUrl:r,wmtsInfo:i}=t,s=r?this._getLowerCasedUrlParams(r):null,a=i?.layerIdentifier;let o=null;const l=i?.tileMatrixSet;l&&(Array.isArray(l)?l.length&&(o=l[0]):o=l);const n=s?.format,m=s?.style;return new x({id:a,imageFormat:n,styleId:m,tileMatrixSetId:o})}writeActiveLayer(e,t,r,i){const s=this.activeLayer;t.templateUrl=this.getUrlTemplate(s.id,s.tileMatrixSetId,s.imageFormat,s.styleId);const a=l(\"tileMatrixSet.tileInfo\",s);t.tileInfo=a?a.toJSON(i):null,t.wmtsInfo={...t.wmtsInfo,layerIdentifier:s.id,tileMatrixSet:s.tileMatrixSetId}}readCustomParameters(e,t){const r=t.wmtsInfo;return r?this._mergeParams(r.customParameters,r.url):null}get fullExtents(){return this.activeLayer.fullExtents}readServiceMode(e,t){return t.templateUrl.includes(\"?\")?\"KVP\":\"RESTful\"}readSublayersFromService(e,t,r){return F(t.layers,r)}get supportedSpatialReferences(){return this.activeLayer.tileMatrixSets.map((e=>e.tileInfo.spatialReference)).toArray()}get tilemapCache(){const e=this.activeLayer?.tileMatrixSet?.tileInfo;return new b(e)}get title(){return this.activeLayer?.title??\"Layer\"}set title(e){e?this._override(\"title\",e):this._clearOverride(\"title\")}get url(){return this._get(\"url\")}set url(e){e&&\"/\"===e.substr(-1)?this._set(\"url\",e.slice(0,-1)):this._set(\"url\",e)}createWebTileLayer(e){const t=this.getUrlTemplate(this.activeLayer.id,this.activeLayer.tileMatrixSetId,this.activeLayer.imageFormat,this.activeLayer.styleId),r=this._getTileMatrixSetById(e.tileMatrixSetId).tileInfo,i=e.fullExtent,s=new j({layerIdentifier:e.id,tileMatrixSet:e.tileMatrixSetId,url:this.url});return this.customLayerParameters&&(s.customLayerParameters=this.customLayerParameters),this.customParameters&&(s.customParameters=this.customParameters),new w({fullExtent:i,urlTemplate:t,tileInfo:r,wmtsInfo:s})}fetchTile(e,r,i){const s=this.getTileUrl(e,r,i);return t(s,{responseType:\"image\"}).then((e=>e.data))}findSublayerById(e){return this.sublayers.find((t=>t.id===e))}getTileUrl(e,t,r){const i=this._getTileMatrixSetById(this.activeLayer.tileMatrixSetId).tileInfo.lods[e],s=i?i.levelValue?i.levelValue:`${i.level}`:`${e}`;let a=this.resourceInfo?\"\":_({dimensionMap:this.dimensionMap,layerMap:this.layerMap},this.activeLayer.id,this.activeLayer.tileMatrixSetId,this.activeLayer.imageFormat,this.activeLayer.styleId,s,t,r);if(!a){a=this.getUrlTemplate(this.activeLayer.id,this.activeLayer.tileMatrixSetId,this.activeLayer.imageFormat,this.activeLayer.styleId).replace(/\\{level\\}/gi,s).replace(/\\{row\\}/gi,`${t}`).replace(/\\{col\\}/gi,`${r}`)}return a=this._appendCustomLayerParameters(a),a}getUrlTemplate(e,t,r,i){if(!this.resourceInfo){const r=E({dimensionMap:this.dimensionMap,layerMap:this.layerMap},e,t,i);if(r)return r}if(\"KVP\"===this.serviceMode)return this.url+\"?SERVICE=WMTS&VERSION=\"+this.version+\"&REQUEST=GetTile&LAYER=\"+e+\"&STYLE=\"+i+\"&FORMAT=\"+r+\"&TILEMATRIXSET=\"+t+\"&TILEMATRIX={level}&TILEROW={row}&TILECOL={col}\";if(\"RESTful\"===this.serviceMode){let s=\"\";return O[r.toLowerCase()]&&(s=O[r.toLowerCase()]),this.url+e+\"/\"+i+\"/\"+t+\"/{level}/{row}/{col}\"+s}return\"\"}async _fetchService(e){let t;if(this.resourceInfo)\"KVP\"===this.resourceInfo.serviceMode&&(this.url+=this.url.includes(\"?\")?\"\":\"?\"),t={ssl:!1,data:this.resourceInfo};else try{t=await this._getCapabilities(this.serviceMode,e),C(t.data)}catch{const s=\"KVP\"===this.serviceMode?\"RESTful\":\"KVP\";try{t=await this._getCapabilities(s,e),C(t.data),this.serviceMode=s}catch(r){throw new i(\"wmtslayer:unsupported-service-data\",\"Services does not support RESTful or KVP service modes.\",{error:r})}}this.resourceInfo?t.data=R(t.data):t.data=U(t.data,{serviceMode:this.serviceMode,url:this.url}),t.data&&this.read(t.data,{origin:\"service\"})}async _getCapabilities(e,r){const i=this._getCapabilitiesUrl(e);return await t(i,{...r,responseType:\"text\"})}_getTileMatrixSetById(e){return this.findSublayerById(this.activeLayer.id).tileMatrixSets.find((t=>t.id===e))}_appendCustomParameters(e){return this._appendParameters(e,this.customParameters)}_appendCustomLayerParameters(e){return this._appendParameters(e,{...a(this.customParameters),...this.customLayerParameters})}_appendParameters(e,t){const r=c(e),i={...r.query,...t},s=u(i);return\"\"===s?r.path:`${r.path}?${s}`}_getCapabilitiesUrl(e){this.url=this.url.split(\"?\")[0];const t=\"KVP\"===e?`${this.url}?request=GetCapabilities&service=WMTS&version=${this.version}`:`${this.url}/${this.version}/WMTSCapabilities.xml`;return this._appendCustomParameters(t)}_getLowerCasedUrlParams(e){if(!e)return null;const t=c(e).query;if(!t)return null;const r={};return Object.keys(t).forEach((e=>{r[e.toLowerCase()]=t[e]})),r}_mergeParams(e,t){const r=this._getLowerCasedUrlParams(t);if(r){const t=Object.keys(r);t.length&&(e=e?a(e):{},t.forEach((t=>{e.hasOwnProperty(t)||W.has(t)||(e[t]=r[t])})))}return e}};function F(e,t){return e.map((e=>{const r=new x;return r.read(e,t),r}))}e([y()],A.prototype,\"dimensionMap\",void 0),e([y()],A.prototype,\"layerMap\",void 0),e([y({type:x,json:{origins:{\"web-document\":{write:{ignoreOrigin:!0}}}}})],A.prototype,\"activeLayer\",null),e([d(\"service\",\"activeLayer\",[\"layers\"])],A.prototype,\"readActiveLayerFromService\",null),e([d([\"web-document\",\"portal-item\"],\"activeLayer\",[\"wmtsInfo\"])],A.prototype,\"readActiveLayerFromItemOrWebDoc\",null),e([f([\"web-document\",\"portal-item\"],\"activeLayer\",{templateUrl:{type:String},tileInfo:{type:P},\"wmtsInfo.layerIdentifier\":{type:String},\"wmtsInfo.tileMatrixSet\":{type:String}})],A.prototype,\"writeActiveLayer\",null),e([y({type:String,value:\"\",json:{write:!0}})],A.prototype,\"copyright\",void 0),e([y({type:[\"show\",\"hide\"]})],A.prototype,\"listMode\",void 0),e([y({json:{read:!0,write:!0}})],A.prototype,\"blendMode\",void 0),e([y({json:{origins:{\"web-document\":{read:{source:[\"wmtsInfo.customParameters\",\"wmtsInfo.url\"]},write:{target:\"wmtsInfo.customParameters\"}},\"portal-item\":{read:{source:[\"wmtsInfo.customParameters\",\"wmtsInfo.url\"]},write:{target:\"wmtsInfo.customParameters\"}}}}})],A.prototype,\"customParameters\",void 0),e([d([\"portal-item\",\"web-document\"],\"customParameters\")],A.prototype,\"readCustomParameters\",null),e([y({json:{origins:{\"web-document\":{read:{source:\"wmtsInfo.customLayerParameters\"},write:{target:\"wmtsInfo.customLayerParameters\"}},\"portal-item\":{read:{source:\"wmtsInfo.customLayerParameters\"},write:{target:\"wmtsInfo.customLayerParameters\"}}}}})],A.prototype,\"customLayerParameters\",void 0),e([y({type:v,json:{write:{ignoreOrigin:!0},origins:{\"web-document\":{read:{source:\"fullExtent\"}},\"portal-item\":{read:{source:\"fullExtent\"}}}}})],A.prototype,\"fullExtent\",void 0),e([y({readOnly:!0})],A.prototype,\"fullExtents\",null),e([y({type:[\"WebTiledLayer\"]})],A.prototype,\"operationalLayerType\",void 0),e([y()],A.prototype,\"resourceInfo\",void 0),e([y()],A.prototype,\"serviceMode\",void 0),e([d([\"portal-item\",\"web-document\"],\"serviceMode\",[\"templateUrl\"])],A.prototype,\"readServiceMode\",null),e([y({type:r.ofType(x)})],A.prototype,\"sublayers\",void 0),e([d(\"service\",\"sublayers\",[\"layers\"])],A.prototype,\"readSublayersFromService\",null),e([y({readOnly:!0})],A.prototype,\"supportedSpatialReferences\",null),e([y({readOnly:!0})],A.prototype,\"tilemapCache\",null),e([y({json:{read:{source:\"title\"}}})],A.prototype,\"title\",null),e([y({json:{read:!1},readOnly:!0,value:\"wmts\"})],A.prototype,\"type\",void 0),e([y({json:{origins:{service:{read:{source:\"tileUrl\"}},\"web-document\":{read:{source:\"wmtsInfo.url\"},write:{target:\"wmtsInfo.url\"}},\"portal-item\":{read:{source:\"wmtsInfo.url\"},write:{target:\"wmtsInfo.url\"}}}}})],A.prototype,\"url\",null),e([y()],A.prototype,\"version\",void 0),A=e([h(\"esri.layers.WMTSLayer\")],A);const V=A;export{V as default};\n"],"sourceRoot":""}