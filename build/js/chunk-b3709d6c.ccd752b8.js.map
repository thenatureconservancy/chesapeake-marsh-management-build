{"version":3,"sources":["webpack:///./node_modules/@arcgis/core/layers/graphics/data/BoundsStore.js","webpack:///./node_modules/@arcgis/core/layers/graphics/sources/support/sourceUtils.js","webpack:///./node_modules/@arcgis/core/layers/graphics/data/optimizedFeatureQueryEngineAdapter.js","webpack:///./node_modules/@arcgis/core/layers/graphics/data/FeatureStore.js","webpack:///./node_modules/@arcgis/core/layers/ogc/dateUtils.js","webpack:///./node_modules/@arcgis/core/layers/ogc/wfsUtils.js","webpack:///./node_modules/@arcgis/core/layers/ogc/xmlUtils.js","webpack:///./node_modules/@arcgis/core/layers/graphics/sources/WFSSourceWorker.js","webpack:///./node_modules/@arcgis/core/core/libs/rbush/PooledRBush.js","webpack:///./node_modules/@arcgis/core/layers/graphics/sources/geojson/geojson.js"],"names":["n","t","minX","minY","maxX","maxY","e","i","o","s","d","search","h","constructor","this","_indexInvalid","_boundsToLoad","_boundsById","Map","_idByBounds","_index","_loadIndex","Array","size","forEach","clear","load","length","filter","has","values","Math","min","max","delete","get","remove","forEachInBounds","invalidateIndex","set","push","l","code","description","u","error","globalId","objectId","success","uniqueId","a","c","f","Set","m","p","name","message","details","field","originalValue","sanitizedValue","add","editable","r","requiredFields","parseFloat","String","g","TypeError","simplify","async","y","w","getObjectId","getAttributes","attributes","getAttribute","cloneWithGeometry","getGeometry","geometry","getCentroid","centroid","hasZ","hasM","geometryInfo","_boundsStore","_featuresById","_markedIds","events","featureAdapter","geometryType","fullBounds","coords","featureCount","vertexCount","_add","_emitChanged","addMany","removeById","_remove","removeManyById","forEachBounds","getFeature","toArray","from","startMarkingUsedFeatures","sweep","emit","getLogger","feature","displayId","onFeatureAdd","onFeatureRemove","Date","getTime","Number","isNaN","exec","groups","year","month","day","hours","minutes","seconds","ms","padEnd","substring","isUTC","UTC","offsetSign","offsetHours","offsetMinutes","S","x","C","E","N","P","R","j","A","G","k","v","U","D","I","responseType","query","SERVICE","REQUEST","VERSION","customParameters","signal","data","$","te","ne","ae","firstElementChild","M","operations","L","readFeatureTypes","O","GetCapabilities","url","DescribeFeatureType","GetFeature","outputFormat","supportsPagination","b","OperationsMetadata","Operation","DCP","HTTP","Get","Parameter","AllowedValues","Value","textContent","toLowerCase","Constraint","DefaultValue","FeatureTypeList","FeatureType","typeName","title","extent","namespacePrefix","namespaceUri","supportedSpatialReferences","parseInt","match","wkid","Name","prefix","re","lookupNamespaceURI","Abstract","Title","WGS84BoundingBox","V","DefaultSRS","DefaultCRS","OtherSRS","OtherCRS","children","localName","split","map","xmin","ymin","xmax","ymax","spatialReference","W","X","featureType","Y","fields","swapXY","objectIdField","geometryField","q","T","WGS84","wfsCapabilities","next","value","F","J","_","errors","z","find","type","alias","unshift","Promise","all","K","count","Z","features","fromJSON","coordinates","toFixed","Q","TYPENAME","element","complexType","B","document","XMLSerializer","serializeToString","H","complexContent","extension","sequence","hasAttribute","simpleType","restriction","maxLength","nullable","replace","dateFields","JSON","parse","response","TYPENAMES","OUTPUTFORMAT","SRSNAME","STARTINDEX","startIndex","COUNT","DOMParser","parseFromString","trim","Exception","ExceptionText","_queryEngine","_customParameters","_snapshotFeatures","_getFeatureUrl","_featureType","_getFeatureOutputFormat","fieldsIndex","_fieldsIndex","destroy","getFeatureUrl","getFeatureOutputFormat","_checkProjection","timeInfo","featureStore","fullExtent","_waitSnapshotComplete","executeQuery","executeQueryForCount","executeQueryForIds","executeQueryForExtent","executeQueryForSnapping","_snapshotTask","abort","promise","then","finished","compareMinX","compareMinY","_toBBox","_maxEntries","_minEntries","ceil","_initFormat","prune","_all","leaf","pop","collides","insert","_build","slice","height","_splitRoot","_insert","indexHint","splice","_condense","toJSON","pushArray","log","sqrt","_chooseSubtree","_split","_adjustParentBBoxes","_chooseSplitAxis","_chooseSplitIndex","console","_allDistMargin","sort","Function","join","deallocator","super","arguments","LineString","MultiLineString","MultiPoint","Point","Polygon","MultiPolygon","properties","id","lengths","crs","RegExp","test","Object","keys","objectIdFieldName","objectIdFieldType","unknownFields"],"mappings":"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","file":"js/chunk-b3709d6c.ccd752b8.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport i from\"../../../core/has.js\";import{PooledRBush as s}from\"../../../core/libs/rbush/PooledRBush.js\";import{empty as d}from\"../../../geometry/support/aaBoundingRect.js\";const n=5e4,t={minX:0,minY:0,maxX:0,maxY:0};function e(i){t.minX=i[0],t.minY=i[1],t.maxX=i[2],t.maxY=i[3]}function o(i,s,d){e(s),i.search(t,d)}class h{constructor(){this._indexInvalid=!1,this._boundsToLoad=[],this._boundsById=new Map,this._idByBounds=new Map,this._index=new s(9,i(\"esri-csp-restrictions\")?i=>({minX:i[0],minY:i[1],maxX:i[2],maxY:i[3]}):[\"[0]\",\"[1]\",\"[2]\",\"[3]\"]),this._loadIndex=()=>{if(this._indexInvalid){const i=new Array(this._idByBounds.size);let s=0;this._idByBounds.forEach(((d,n)=>{i[s++]=n})),this._indexInvalid=!1,this._index.clear(),this._index.load(i)}else this._boundsToLoad.length&&(this._index.load(this._boundsToLoad.filter((i=>this._idByBounds.has(i)))),this._boundsToLoad.length=0)}}get fullBounds(){if(!this._boundsById.size)return null;const i=d();for(const s of this._boundsById.values())s&&(i[0]=Math.min(s[0],i[0]),i[1]=Math.min(s[1],i[1]),i[2]=Math.max(s[2],i[2]),i[3]=Math.max(s[3],i[3]));return i}get valid(){return!this._indexInvalid}clear(){this._indexInvalid=!1,this._boundsToLoad.length=0,this._boundsById.clear(),this._idByBounds.clear(),this._index.clear()}delete(i){const s=this._boundsById.get(i);this._boundsById.delete(i),s&&(this._idByBounds.delete(s),this._indexInvalid||this._index.remove(s))}forEachInBounds(i,s){this._loadIndex(),o(this._index,i,(i=>s(this._idByBounds.get(i))))}get(i){return this._boundsById.get(i)}has(i){return this._boundsById.has(i)}invalidateIndex(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)}set(i,s){if(!this._indexInvalid){const s=this._boundsById.get(i);s&&(this._index.remove(s),this._idByBounds.delete(s))}this._boundsById.set(i,s),s&&(this._idByBounds.set(s,i),this._indexInvalid||(this._boundsToLoad.push(s),this._boundsToLoad.length>n&&this._loadIndex()))}}export{h as BoundsStore};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{isNone as e}from\"../../../../core/maybe.js\";import{isValid as t}from\"../../../../geometry/support/spatialReferenceUtils.js\";import{sanitizeNullFieldValue as n,validateFieldValue as i,validationErrorToString as r,isNumericField as s,isStringField as o}from\"../../../support/fieldUtils.js\";class l{constructor(){this.code=null,this.description=null}}class u{constructor(e){this.error=new l,this.globalId=null,this.objectId=null,this.success=!1,this.uniqueId=null,this.error.description=e}}function a(e){return new u(e)}class c{constructor(e){this.globalId=null,this.success=!0,this.objectId=this.uniqueId=e}}function f(e){return new c(e)}const d=new Set;function m(e,t,n,s=!1,o){d.clear();for(const l in n){const u=e.get(l);if(!u)continue;const c=n[l],f=p(u,c);if(f!==c&&o&&o.push({name:\"invalid-value-type\",message:\"attribute value was converted to match the field type\",details:{field:u,originalValue:c,sanitizedValue:f}}),d.add(u.name),u&&(s||u.editable)){const e=i(u,f);if(e)return a(r(e,u,f));t[u.name]=f}}for(const i of e.requiredFields)if(!d.has(i.name))return a(`missing required field \"${i.name}\"`);return null}function p(e,t){let i=t;return\"string\"==typeof t&&s(e)?i=parseFloat(t):null!=t&&o(e)&&\"string\"!=typeof t&&(i=String(t)),n(i)}let h;function g(n,i){if(!n||!t(i))return n;if(\"rings\"in n||\"paths\"in n){if(e(h))throw new TypeError(\"geometry engine not loaded\");return h.simplify(i,n)}return n}async function y(){return e(h)&&(h=await import(\"../../../../geometry/geometryEngineJSON.js\")),h}async function w(e,n){!t(e)||\"esriGeometryPolygon\"!==n&&\"esriGeometryPolyline\"!==n||await y()}export{a as createFeatureEditErrorResult,f as createFeatureEditSuccessResult,y as loadGeometryEngine,w as loadGeometryEngineForSimplify,m as mixAttributes,g as simplify};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{isNone as t}from\"../../../core/maybe.js\";import{getCentroidOptimizedGeometry as e}from\"../centroid.js\";import{OptimizedFeature as r}from\"../OptimizedFeature.js\";import o from\"../OptimizedGeometry.js\";const i={getObjectId:t=>t.objectId,getAttributes:t=>t.attributes,getAttribute:(t,e)=>t.attributes[e],cloneWithGeometry:(t,e)=>new r(e,t.attributes,null,t.objectId),getGeometry:t=>t.geometry,getCentroid:(r,i)=>(t(r.centroid)&&(r.centroid=e(new o,r.geometry,i.hasZ,i.hasM)),r.centroid)};export{i as optimizedFeatureQueryEngineAdapter};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport e from\"../../../core/Error.js\";import t from\"../../../core/Evented.js\";import r from\"../../../core/Logger.js\";import{isSome as s,isNone as o}from\"../../../core/maybe.js\";import{fromRect as i}from\"../../../geometry/support/aaBoundingBox.js\";import{create as d}from\"../../../geometry/support/aaBoundingRect.js\";import{getBoundsOptimizedGeometry as a}from\"../featureConversionUtils.js\";import{BoundsStore as n}from\"./BoundsStore.js\";import{optimizedFeatureQueryEngineAdapter as h}from\"./optimizedFeatureQueryEngineAdapter.js\";class u{constructor(e){this.geometryInfo=e,this._boundsStore=new n,this._featuresById=new Map,this._markedIds=new Set,this.events=new t,this.featureAdapter=h}get geometryType(){return this.geometryInfo.geometryType}get hasM(){return this.geometryInfo.hasM}get hasZ(){return this.geometryInfo.hasZ}get numFeatures(){return this._featuresById.size}get fullBounds(){return this._boundsStore.fullBounds}get storeStatistics(){let e=0;return this._featuresById.forEach((t=>{s(t.geometry)&&t.geometry.coords&&(e+=t.geometry.coords.length)})),{featureCount:this._featuresById.size,vertexCount:e/(this.hasZ?this.hasM?4:3:this.hasM?3:2)}}add(e){this._add(e),this._emitChanged()}addMany(e){for(const t of e)this._add(t);this._emitChanged()}clear(){this._featuresById.clear(),this._boundsStore.clear(),this._emitChanged()}removeById(e){const t=this._featuresById.get(e);return t?(this._remove(t),this._emitChanged(),t):null}removeManyById(e){this._boundsStore.invalidateIndex();for(const t of e){const e=this._featuresById.get(t);e&&this._remove(e)}this._emitChanged()}forEachBounds(e,t,r){for(const s of e){const e=this._boundsStore.get(s.objectId);e&&t(i(r,e))}}getFeature(e){return this._featuresById.get(e)}has(e){return this._featuresById.has(e)}toArray(){return Array.from(this._featuresById.values())}forEach(e){this._featuresById.forEach((t=>e(t)))}forEachInBounds(e,t){this._boundsStore.forEachInBounds(e,(e=>{t(this._featuresById.get(e))}))}startMarkingUsedFeatures(){this._boundsStore.invalidateIndex(),this._markedIds.clear()}sweep(){let e=!1;this._featuresById.forEach(((t,r)=>{this._markedIds.has(r)||(e=!0,this._remove(t))})),this._markedIds.clear(),e&&this._emitChanged()}_emitChanged(){this.events.emit(\"changed\",void 0)}_add(t){if(!t)return;const i=t.objectId;if(null==i)return void r.getLogger(\"esri.layers.graphics.data.FeatureStore\").error(new e(\"featurestore:invalid-feature\",\"feature id is missing\",{feature:t}));const n=this._featuresById.get(i);let h;if(this._markedIds.add(i),n?(t.displayId=n.displayId,h=this._boundsStore.get(i),this._boundsStore.delete(i)):s(this.onFeatureAdd)&&this.onFeatureAdd(t),o(t.geometry)||!t.geometry.coords||!t.geometry.coords.length)return this._boundsStore.set(i,null),void this._featuresById.set(i,t);h=a(s(h)?h:d(),t.geometry,this.geometryInfo.hasZ,this.geometryInfo.hasM),s(h)&&this._boundsStore.set(i,h),this._featuresById.set(i,t)}_remove(e){return s(this.onFeatureRemove)&&this.onFeatureRemove(e),this._markedIds.delete(e.objectId),this._boundsStore.delete(e.objectId),this._featuresById.delete(e.objectId),e}}export{u as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nfunction e(e){return t(e)??n(e)}function n(e){const n=new Date(e).getTime();return Number.isNaN(n)?null:n}function t(e){const n=s.exec(e);if(!n)return null;const t=n.groups,u=+t.year,o=+t.month-1,r=+t.day,f=+(t.hours??\"0\"),i=+(t.minutes??\"0\"),d=+(t.seconds??\"0\");if(f>23)return null;if(i>59)return null;if(d>59)return null;const l=t.ms??\"0\",c=l?+l.padEnd(3,\"0\").substring(0,3):0;let a;if(t.isUTC)a=Date.UTC(u,o,r,f,i,d,c);else if(t.offsetSign){const e=+t.offsetHours,n=+t.offsetMinutes;a=6e4*(\"+\"===t.offsetSign?-1:1)*(60*e+n)+Date.UTC(u,o,r,f,i,d,c)}else a=new Date(u,o,r,f,i,d,c).getTime();return Number.isNaN(a)?null:a}const s=/^(?:(?<year>-?\\d{4,})-(?<month>\\d{2})-(?<day>\\d{2}))(?:T(?<hours>\\d{2}):(?<minutes>\\d{2}):(?<seconds>\\d{2})(?:\\.(?<ms>\\d+))?)?(?:(?<isUTC>Z)|(?:(?<offsetSign>\\+|-)(?<offsetHours>\\d{2}):(?<offsetMinutes>\\d{2})))?$/;export{e as parseDate,n as parseJSDate};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport\"../../geometry.js\";import e from\"../../request.js\";import t from\"../../core/Error.js\";import{find as r,cache as n}from\"../../core/iteratorUtils.js\";import{isNone as a,isSome as o}from\"../../core/maybe.js\";import{eachAlways as s}from\"../../core/promiseUtils.js\";import{isHTTPSProtocol as i,hasSameOrigin as p,toHTTPS as u}from\"../../core/urlUtils.js\";import{initializeProjection as c,project as l}from\"../../geometry/projection.js\";import{WGS84 as m,equals as y}from\"../../geometry/support/spatialReferenceUtils.js\";import{featureGeometryTypeKebabDictionary as f}from\"../../geometry/support/typeUtils.js\";import{getGeometryType as d}from\"../graphics/sources/geojson/geojson.js\";import{parseDate as g}from\"./dateUtils.js\";import{iterateXML as w,visitXML as b}from\"./xmlUtils.js\";import h from\"../support/Field.js\";import T from\"../../geometry/SpatialReference.js\";import F from\"../../geometry/Extent.js\";const S=\"xlink:href\",x=\"2.0.0\",C=\"__esri_wfs_id__\",E=\"wfs-layer:getWFSLayerTypeInfo-error\",N=\"wfs-layer:empty-service\",P=\"wfs-layer:feature-type-not-found\",R=\"wfs-layer:geojson-not-supported\",j=\"wfs-layer:kvp-encoding-not-supported\",A=\"wfs-layer:malformed-json\",G=\"wfs-layer:unknown-geometry-type\",k=\"wfs-layer:unknown-field-type\",v=\"wfs-layer:unsupported-spatial-reference\",U=\"wfs-layer:unsupported-wfs-version\";async function D(t,r){const n=I((await e(t,{responseType:\"text\",query:{SERVICE:\"WFS\",REQUEST:\"GetCapabilities\",VERSION:x,...r?.customParameters},signal:r?.signal})).data);return $(t,n),n}function I(e){const t=te(e);ne(t),ae(t);const r=t.firstElementChild,a=n(M(r));return{operations:L(r),get featureTypes(){return Array.from(a())},readFeatureTypes:a}}const O=new Set([\"json\",\"application/json\",\"geojson\",\"application/json; subtype=geojson\"]);function L(e){let r=!1;const n={GetCapabilities:{url:\"\"},DescribeFeatureType:{url:\"\"},GetFeature:{url:\"\",outputFormat:null,supportsPagination:!1}};if(b(e,{OperationsMetadata:{Operation:e=>{switch(e.getAttribute(\"name\")){case\"GetCapabilities\":return{DCP:{HTTP:{Get:e=>{n.GetCapabilities.url=e.getAttribute(S)}}}};case\"DescribeFeatureType\":return{DCP:{HTTP:{Get:e=>{n.DescribeFeatureType.url=e.getAttribute(S)}}}};case\"GetFeature\":return{DCP:{HTTP:{Get:e=>{n.GetFeature.url=e.getAttribute(S)}}},Parameter:e=>{if(\"outputFormat\"===e.getAttribute(\"name\"))return{AllowedValues:{Value:e=>{const t=e.textContent;O.has(t.toLowerCase())&&(n.GetFeature.outputFormat=t)}}}}}}},Constraint:e=>{switch(e.getAttribute(\"name\")){case\"KVPEncoding\":return{DefaultValue:e=>{r=\"true\"===e.textContent.toLowerCase()}};case\"ImplementsResultPaging\":return{DefaultValue:e=>{n.GetFeature.supportsPagination=\"true\"===e.textContent.toLowerCase()}}}}}}),!r)throw new t(j,\"WFS service doesn't support key/value pair (KVP) encoding\");if(a(n.GetFeature.outputFormat))throw new t(R,\"WFS service doesn't support GeoJSON output format\");return n}function $(e,t){i(e)&&(p(e,t.operations.DescribeFeatureType.url,!0)&&(t.operations.DescribeFeatureType.url=u(t.operations.DescribeFeatureType.url)),p(e,t.operations.GetFeature.url,!0)&&(t.operations.GetFeature.url=u(t.operations.GetFeature.url)))}function M(e){return w(e,{FeatureTypeList:{FeatureType:e=>{const t={typeName:\"undefined:undefined\",name:\"\",title:\"\",description:\"\",extent:null,namespacePrefix:\"\",namespaceUri:\"\",supportedSpatialReferences:[]},r=new Set([4326]),n=e=>{const t=parseInt(e.textContent.match(/(?<wkid>\\d+$)/i)?.groups?.wkid,10);Number.isNaN(t)||r.add(t)};return b(e,{Name:e=>{const{name:r,prefix:n}=re(e.textContent);t.typeName=`${n}:${r}`,t.name=r,t.namespacePrefix=n,t.namespaceUri=e.lookupNamespaceURI(n)},Abstract:e=>{t.description=e.textContent},Title:e=>{t.title=e.textContent},WGS84BoundingBox:e=>{t.extent=V(e)},DefaultSRS:n,DefaultCRS:n,OtherSRS:n,OtherCRS:n}),t.title||(t.title=t.name),t.supportedSpatialReferences.push(...r),t}}})}function V(e){let t,r,n,a;for(const o of e.children)switch(o.localName){case\"LowerCorner\":[t,r]=o.textContent.split(\" \").map((e=>Number.parseFloat(e)));break;case\"UpperCorner\":[n,a]=o.textContent.split(\" \").map((e=>Number.parseFloat(e)))}return{xmin:t,ymin:r,xmax:n,ymax:a,spatialReference:m}}function W(e,t,n){return r(e,(e=>n?e.name===t&&e.namespaceUri===n:e.typeName===t||e.name===t))}async function X(e,t,r,n={}){const{featureType:a,extent:o}=await Y(e,t,r,n),{fields:s,geometryType:i,swapXY:p,objectIdField:u,geometryField:c}=await q(e,a.typeName,n);return{url:e.operations.GetCapabilities.url,name:a.name,namespaceUri:a.namespaceUri,fields:s,geometryField:c,geometryType:i,objectIdField:u,spatialReference:n.spatialReference??T.WGS84,extent:o,swapXY:p,wfsCapabilities:e,customParameters:n.customParameters}}async function Y(e,r,n,o={}){const{spatialReference:s=T.WGS84}=o,i=e.readFeatureTypes(),p=r?W(i,r,n):i.next().value;if(a(p))throw r?new t(P,`The type '${r}' could not be found in the service`):new t(N,\"The service is empty\");let u=new F({...p.extent,spatialReference:s});if(!y(s,m))try{await c(m,s,void 0,o),u=l(u,m)}catch{throw new t(v,\"Projection not supported\")}return{extent:u,spatialReference:s,featureType:p}}async function q(e,r,n={}){const[o,i]=await s([J(e.operations.DescribeFeatureType.url,r,n),_(e,r,n)]);if(o.error||i.error)throw new t(E,`An error occurred while getting info about the feature type '${r}'`,{error:o.error||i.error});const{fields:p,errors:u}=o.value,c=o.value.geometryType||i.value.geometryType,l=i.value.swapXY;if(a(c))throw new t(G,`The geometry type could not be determined for type '${r}`,{typeName:r,geometryType:c,fields:p,errors:u});return{...z(p),geometryType:c,swapXY:l}}function z(e){const t=e.find((e=>\"geometry\"===e.type));let r=e.find((e=>\"oid\"===e.type));return e=e.filter((e=>\"geometry\"!==e.type)),r||(r=new h({name:C,type:\"oid\",alias:C}),e.unshift(r)),{geometryField:t?.name??null,objectIdField:r.name,fields:e}}async function _(t,r,n={}){let a,o=!1;const[s,i]=await Promise.all([K(t.operations.GetFeature.url,r,t.operations.GetFeature.outputFormat,{...n,count:1}),e(t.operations.GetFeature.url,{responseType:\"text\",query:Z(r,void 0,{...n,count:1}),signal:n?.signal})]),p=\"FeatureCollection\"===s.type&&s.features[0]?.geometry;if(p){let e;switch(a=f.fromJSON(d(p.type)),p.type){case\"Point\":e=p.coordinates;break;case\"LineString\":case\"MultiPoint\":e=p.coordinates[0];break;case\"MultiLineString\":case\"Polygon\":e=p.coordinates[0][0];break;case\"MultiPolygon\":e=p.coordinates[0][0][0]}const t=/<[^>]*pos[^>]*> *(-?\\d+(?:\\.\\d+)?) (-?\\d+(?:\\.\\d+)?)/.exec(i.data);if(t){const r=e[0].toFixed(3),n=e[1].toFixed(3),a=parseFloat(t[1]).toFixed(3);r===parseFloat(t[2]).toFixed(3)&&n===a&&(o=!0)}}return{geometryType:a,swapXY:o}}async function J(t,r,n){return Q(r,(await e(t,{responseType:\"text\",query:{SERVICE:\"WFS\",REQUEST:\"DescribeFeatureType\",VERSION:x,TYPENAME:r,...n?.customParameters},signal:n?.signal})).data)}function Q(e,n){const{name:a}=re(e),s=te(n);ae(s);const i=r(w(s.firstElementChild,{element:e=>({name:e.getAttribute(\"name\"),typeName:re(e.getAttribute(\"type\")).name})}),(({name:e})=>e===a));if(o(i)){const e=r(w(s.firstElementChild,{complexType:e=>e}),(e=>e.getAttribute(\"name\")===i.typeName));if(o(e))return B(e)}throw new t(P,`Type '${e}' not found in document`,{document:(new XMLSerializer).serializeToString(s)})}const H=new Set([\"objectid\",\"fid\"]);function B(e){const r=[],n=[];let a;const o=w(e,{complexContent:{extension:{sequence:{element:e=>e}}}});for(const s of o){const o=s.getAttribute(\"name\");if(!o)continue;let i,p;if(s.hasAttribute(\"type\")?i=re(s.getAttribute(\"type\")).name:b(s,{simpleType:{restriction:e=>(i=re(e.getAttribute(\"base\")).name,{maxLength:e=>{p=+e.getAttribute(\"value\")}})}}),!i)continue;const u=\"true\"===s.getAttribute(\"nillable\");let c=!1;switch(i.toLowerCase()){case\"integer\":case\"nonpositiveinteger\":case\"negativeinteger\":case\"long\":case\"int\":case\"short\":case\"byte\":case\"nonnegativeinteger\":case\"unsignedlong\":case\"unsignedint\":case\"unsignedshort\":case\"unsignedbyte\":case\"positiveinteger\":n.push(new h({name:o,alias:o,type:\"integer\",nullable:u}));break;case\"float\":case\"double\":case\"decimal\":n.push(new h({name:o,alias:o,type:\"double\",nullable:u}));break;case\"boolean\":case\"string\":case\"gyearmonth\":case\"gyear\":case\"gmonthday\":case\"gday\":case\"gmonth\":case\"anyuri\":case\"qname\":case\"notation\":case\"normalizedstring\":case\"token\":case\"language\":case\"idrefs\":case\"entities\":case\"nmtoken\":case\"nmtokens\":case\"name\":case\"ncname\":case\"id\":case\"idref\":case\"entity\":case\"duration\":case\"time\":n.push(new h({name:o,alias:o,type:\"string\",nullable:u,length:p??255}));break;case\"datetime\":case\"date\":n.push(new h({name:o,alias:o,type:\"date\",nullable:u,length:p??36}));break;case\"pointpropertytype\":a=\"point\",c=!0;break;case\"multipointpropertytype\":a=\"multipoint\",c=!0;break;case\"curvepropertytype\":case\"multicurvepropertytype\":case\"multilinestringpropertytype\":a=\"polyline\",c=!0;break;case\"surfacepropertytype\":case\"multisurfacepropertytype\":case\"multipolygonpropertytype\":a=\"polygon\",c=!0;break;case\"geometrypropertytype\":case\"multigeometrypropertytype\":c=!0,r.push(new t(G,`geometry type '${i}' is not supported`,{type:(new XMLSerializer).serializeToString(e)}));break;default:r.push(new t(k,`Unknown field type '${i}'`,{type:(new XMLSerializer).serializeToString(e)}))}c&&n.push(new h({name:o,alias:o,type:\"geometry\",nullable:u}))}for(const t of n)if(\"integer\"===t.type&&!t.nullable&&H.has(t.name.toLowerCase())){t.type=\"oid\";break}return{geometryType:a,fields:n,errors:r}}async function K(r,n,a,o){let{data:s}=await e(r,{responseType:\"text\",query:Z(n,a,o),signal:o?.signal});s=s.replace(/\": +(-?\\d+),(\\d+)(,)?/g,'\": $1.$2$3');try{if(o?.dateFields?.length){const e=new Set(o.dateFields);return JSON.parse(s,((t,r)=>e.has(t)?g(r):r))}return JSON.parse(s)}catch(i){throw new t(A,\"Error while parsing the response\",{response:s,error:i})}}function Z(e,t,r){return{SERVICE:\"WFS\",REQUEST:\"GetFeature\",VERSION:x,TYPENAMES:e,OUTPUTFORMAT:t,SRSNAME:\"EPSG:4326\",STARTINDEX:r?.startIndex,COUNT:r?.count,...r?.customParameters}}async function ee(t,r,n){const a=te((await e(t,{responseType:\"text\",query:{SERVICE:\"WFS\",REQUEST:\"GetFeature\",VERSION:x,TYPENAMES:r,RESULTTYPE:\"hits\",...n?.customParameters},signal:n?.signal})).data);ae(a);const o=Number.parseFloat(a.firstElementChild.getAttribute(\"numberMatched\"));return Number.isNaN(o)?0:o}function te(e){return(new DOMParser).parseFromString(e.trim(),\"text/xml\")}function re(e){const[t,r]=e.split(\":\");return{prefix:r?t:\"\",name:r??t}}function ne(e){const r=e.firstElementChild.getAttribute(\"version\");if(r&&r!==x)throw new t(U,`Unsupported WFS version ${r}. Supported version: ${x}`)}function ae(e){let r,n;if(b(e.firstElementChild,{Exception:e=>(r=e.getAttribute(\"exceptionCode\"),{ExceptionText:e=>{n=e.textContent}})}),r)throw new t(`wfs-layer:${r}`,n)}export{C as WFS_OID_FIELD_NAME,J as describeFeatureType,W as findFeatureType,D as getCapabilities,K as getFeature,ee as getFeatureCount,Y as getFeatureTypeInfo,X as getWFSLayerInfo,Q as parseDescribeFeatureTypeResponse,I as parseGetCapabilitiesResponse,z as prepareWFSLayerFields};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nfunction o(n,c){for(const e of n.children)if(e.localName in c){const n=c[e.localName];if(\"function\"==typeof n){const c=n(e);c&&o(e,c)}else o(e,n)}}function*n(o,c){for(const e of o.children)if(e.localName in c){const o=c[e.localName];\"function\"==typeof o?yield o(e):yield*n(e,o)}}export{n as iterateXML,o as visitXML};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport e from\"../../../core/Error.js\";import t from\"../../../core/Logger.js\";import{isSome as r,unwrap as s}from\"../../../core/maybe.js\";import{throwIfAborted as a,createTask as i,isAbortError as o}from\"../../../core/promiseUtils.js\";import{equals as n,WGS84 as u}from\"../../../geometry/support/spatialReferenceUtils.js\";import{convertFromGeometry as p,convertToGeometry as h}from\"../featureConversionUtils.js\";import y from\"../data/FeatureStore.js\";import{project as c,checkProjectionSupport as m}from\"../data/projectionSupport.js\";import{QueryEngine as l}from\"../data/QueryEngine.js\";import{validateGeoJSON as g,createOptimizedFeatures as _}from\"./geojson/geojson.js\";import{mixAttributes as f}from\"./support/sourceUtils.js\";import{getFeature as d}from\"../../ogc/wfsUtils.js\";import w from\"../../support/FieldsIndex.js\";class E{constructor(){this._queryEngine=null,this._customParameters=null,this._snapshotFeatures=async e=>{const{objectIdField:t}=this._queryEngine,s=await d(this._getFeatureUrl,this._featureType.typeName,this._getFeatureOutputFormat,{customParameters:this._customParameters,dateFields:this._queryEngine.fieldsIndex.dateFields.map((e=>e.name)),signal:e});await g(s),a(e);const i=_(s,{geometryType:this._queryEngine.geometryType,hasZ:!1,objectIdField:t});if(!n(this._queryEngine.spatialReference,u))for(const a of i)r(a.geometry)&&(a.geometry=p(c(h(a.geometry,this._queryEngine.geometryType,!1,!1),u,this._queryEngine.spatialReference)));let o=1;for(const r of i){const e={};f(this._fieldsIndex,e,r.attributes,!0),r.attributes=e,null==r.attributes[t]&&(r.objectId=r.attributes[t]=o++)}return i}}destroy(){this._queryEngine?.destroy(),this._queryEngine=null}async load(e,t){const{getFeatureUrl:r,getFeatureOutputFormat:i,spatialReference:o,fields:n,geometryType:u,featureType:p,objectIdField:h,customParameters:c}=e;this._featureType=p,this._customParameters=c,this._getFeatureUrl=r,this._getFeatureOutputFormat=i,this._fieldsIndex=new w(n),await this._checkProjection(o),a(t),this._queryEngine=new l({fields:n,geometryType:u,hasM:!1,hasZ:!1,objectIdField:h,spatialReference:o,timeInfo:null,featureStore:new y({geometryType:u,hasM:!1,hasZ:!1})});const m=await this._snapshotFeatures(s(t.signal));return this._queryEngine.featureStore.addMany(m),{extent:this._queryEngine.fullExtent}}async applyEdits(){throw new e(\"wfs-source:editing-not-supported\",\"applyEdits() is not supported on WFSLayer\")}async queryFeatures(e={},t={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQuery(e,t.signal)}async queryFeatureCount(e={},t={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQueryForCount(e,t.signal)}async queryObjectIds(e={},t={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQueryForIds(e,t.signal)}async queryExtent(e={},t={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQueryForExtent(e,t.signal)}async querySnapping(e,t={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQueryForSnapping(e,t.signal)}async refresh(r){return this._customParameters=r,this._snapshotTask?.abort(),this._snapshotTask=i(this._snapshotFeatures),this._snapshotTask.promise.then((e=>{this._queryEngine.featureStore.clear(),e&&this._queryEngine.featureStore.addMany(e)}),(r=>{this._queryEngine.featureStore.clear(),o(r)||t.getLogger(\"esri.layers.WFSLayer\").error(new e(\"wfs-layer:getfeature-error\",\"An error occurred during the GetFeature request\",{error:r}))})),await this._waitSnapshotComplete(),{extent:this._queryEngine.fullExtent}}async _waitSnapshotComplete(){if(this._snapshotTask&&!this._snapshotTask.finished){try{await this._snapshotTask.promise}catch{}return this._waitSnapshotComplete()}}async _checkProjection(t){try{await m(u,t)}catch{throw new e(\"unsupported-projection\",\"Projection not supported\",{spatialReference:t})}}}export{E as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{indexOf as t,PositionHint as i}from\"../../arrayUtils.js\";import{assumeNonNull as n}from\"../../maybe.js\";import e from\"../../PooledArray.js\";import{q as s}from\"../../../chunks/quickselect.js\";class h{constructor(t=9,i){this.compareMinX=l,this.compareMinY=c,this._toBBox=t=>t,this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),i&&(\"function\"==typeof i?this._toBBox=i:this._initFormat(i)),this.clear()}destroy(){this.clear(),g.prune(),M.prune(),X.prune(),Y.prune()}all(t){this._all(this.data,t)}search(t,i){let n=this.data;const e=this._toBBox;if(p(t,n))for(g.clear();n;){for(let s=0,h=n.children.length;s<h;s++){const h=n.children[s],a=n.leaf?e(h):h;p(t,a)&&(n.leaf?i(h):f(t,a)?this._all(h,i):g.push(h))}n=g.pop()}}collides(t){let i=this.data;const n=this._toBBox;if(!p(t,i))return!1;for(g.clear();i;){for(let e=0,s=i.children.length;e<s;e++){const s=i.children[e],h=i.leaf?n(s):s;if(p(t,h)){if(i.leaf||f(t,h))return!0;g.push(s)}}i=g.pop()}return!1}load(t){if(!t.length)return this;if(t.length<this._minEntries){for(let i=0,n=t.length;i<n;i++)this.insert(t[i]);return this}let i=this._build(t.slice(0,t.length),0,t.length-1,0);if(this.data.children.length)if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){const t=this.data;this.data=i,i=t}this._insert(i,this.data.height-i.height-1,!0)}else this.data=i;return this}insert(t){return t&&this._insert(t,this.data.height-1),this}clear(){return this.data=new b([]),this}remove(i){if(!i)return this;let e,s=this.data,h=null,a=0,r=!1;const o=this._toBBox(i);for(X.clear(),Y.clear();s||X.length>0;){if(s||(s=n(X.pop()),h=X.data[X.length-1],a=Y.pop()??0,r=!0),s.leaf&&(e=t(s.children,i,s.children.length,s.indexHint),-1!==e))return s.children.splice(e,1),X.push(s),this._condense(X),this;r||s.leaf||!f(s,o)?h?(a++,s=h.children[a],r=!1):s=null:(X.push(s),Y.push(a),a=0,h=s,s=s.children[0])}return this}toJSON(){return this.data}fromJSON(t){return this.data=t,this}_all(t,i){let n=t;for(M.clear();n;){if(!0===n.leaf)for(const t of n.children)i(t);else M.pushArray(n.children);n=M.pop()??null}}_build(t,i,n,e){const s=n-i+1;let h=this._maxEntries;if(s<=h){const e=new b(t.slice(i,n+1));return a(e,this._toBBox),e}e||(e=Math.ceil(Math.log(s)/Math.log(h)),h=Math.ceil(s/h**(e-1)));const r=new j([]);r.height=e;const o=Math.ceil(s/h),l=o*Math.ceil(Math.sqrt(h));_(t,i,n,l,this.compareMinX);for(let a=i;a<=n;a+=l){const i=Math.min(a+l-1,n);_(t,a,i,o,this.compareMinY);for(let n=a;n<=i;n+=o){const s=Math.min(n+o-1,i);r.children.push(this._build(t,n,s,e-1))}}return a(r,this._toBBox),r}_chooseSubtree(t,i,n,e){for(;e.push(i),!0!==i.leaf&&e.length-1!==n;){let n,e=1/0,s=1/0;for(let h=0,a=i.children.length;h<a;h++){const a=i.children[h],r=m(a),o=u(t,a)-r;o<s?(s=o,e=r<e?r:e,n=a):o===s&&r<e&&(e=r,n=a)}i=n||i.children[0]}return i}_insert(t,i,n){const e=this._toBBox,s=n?t:e(t);X.clear();const h=this._chooseSubtree(s,this.data,i,X);for(h.children.push(t),o(h,s);i>=0&&X.data[i].children.length>this._maxEntries;)this._split(X,i),i--;this._adjustParentBBoxes(s,X,i)}_split(t,i){const n=t.data[i],e=n.children.length,s=this._minEntries;this._chooseSplitAxis(n,s,e);const h=this._chooseSplitIndex(n,s,e);if(!h)return void console.log(\"  Error: assertion failed at PooledRBush._split: no valid split index\");const r=n.children.splice(h,n.children.length-h),o=n.leaf?new b(r):new j(r);o.height=n.height,a(n,this._toBBox),a(o,this._toBBox),i?t.data[i-1].children.push(o):this._splitRoot(n,o)}_splitRoot(t,i){this.data=new j([t,i]),this.data.height=t.height+1,a(this.data,this._toBBox)}_chooseSplitIndex(t,i,n){let e,s,h;e=s=1/0;for(let a=i;a<=n-i;a++){const i=r(t,0,a,this._toBBox),o=r(t,a,n,this._toBBox),l=x(i,o),c=m(i)+m(o);l<e?(e=l,h=a,s=c<s?c:s):l===e&&c<s&&(s=c,h=a)}return h}_chooseSplitAxis(t,i,n){const e=t.leaf?this.compareMinX:l,s=t.leaf?this.compareMinY:c;this._allDistMargin(t,i,n,e)<this._allDistMargin(t,i,n,s)&&t.children.sort(e)}_allDistMargin(t,i,n,e){t.children.sort(e);const s=this._toBBox,h=r(t,0,i,s),a=r(t,n-i,n,s);let l=d(h)+d(a);for(let r=i;r<n-i;r++){const i=t.children[r];o(h,t.leaf?s(i):i),l+=d(h)}for(let r=n-i-1;r>=i;r--){const i=t.children[r];o(a,t.leaf?s(i):i),l+=d(a)}return l}_adjustParentBBoxes(t,i,n){for(let e=n;e>=0;e--)o(i.data[e],t)}_condense(i){for(let n=i.length-1;n>=0;n--){const e=i.data[n];if(0===e.children.length)if(n>0){const s=i.data[n-1],h=s.children;h.splice(t(h,e,h.length,s.indexHint),1)}else this.clear();else a(e,this._toBBox)}}_initFormat(t){const i=[\"return a\",\" - b\",\";\"];this.compareMinX=new Function(\"a\",\"b\",i.join(t[0])),this.compareMinY=new Function(\"a\",\"b\",i.join(t[1])),this._toBBox=new Function(\"a\",\"return {minX: a\"+t[0]+\", minY: a\"+t[1]+\", maxX: a\"+t[2]+\", maxY: a\"+t[3]+\"};\")}}function a(t,i){r(t,0,t.children.length,i,t)}function r(t,i,n,e,s){s||(s=new b([])),s.minX=1/0,s.minY=1/0,s.maxX=-1/0,s.maxY=-1/0;for(let h,a=i;a<n;a++)h=t.children[a],o(s,t.leaf?e(h):h);return s}function o(t,i){t.minX=Math.min(t.minX,i.minX),t.minY=Math.min(t.minY,i.minY),t.maxX=Math.max(t.maxX,i.maxX),t.maxY=Math.max(t.maxY,i.maxY)}function l(t,i){return t.minX-i.minX}function c(t,i){return t.minY-i.minY}function m(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function d(t){return t.maxX-t.minX+(t.maxY-t.minY)}function u(t,i){return(Math.max(i.maxX,t.maxX)-Math.min(i.minX,t.minX))*(Math.max(i.maxY,t.maxY)-Math.min(i.minY,t.minY))}function x(t,i){const n=Math.max(t.minX,i.minX),e=Math.max(t.minY,i.minY),s=Math.min(t.maxX,i.maxX),h=Math.min(t.maxY,i.maxY);return Math.max(0,s-n)*Math.max(0,h-e)}function f(t,i){return t.minX<=i.minX&&t.minY<=i.minY&&i.maxX<=t.maxX&&i.maxY<=t.maxY}function p(t,i){return i.minX<=t.maxX&&i.minY<=t.maxY&&i.maxX>=t.minX&&i.maxY>=t.minY}function _(t,i,e,h,a){const r=[i,e];for(;r.length;){const i=n(r.pop()),e=n(r.pop());if(i-e<=h)continue;const o=e+Math.ceil((i-e)/h/2)*h;s(t,o,e,i,a),r.push(e,o,o,i)}}const g=new e,M=new e,X=new e,Y=new e({deallocator:void 0});class B{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}}class w extends B{constructor(){super(...arguments),this.height=1,this.indexHint=new i}}class b extends w{constructor(t){super(),this.children=t,this.leaf=!0}}class j extends w{constructor(t){super(),this.children=t,this.leaf=!1}}export{B as BBox,h as PooledRBush};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/Error.js\";import{OptimizedFeature as t}from\"../../OptimizedFeature.js\";import n from\"../../OptimizedGeometry.js\";import{isNumericField as o}from\"../../../support/fieldUtils.js\";const r={LineString:\"esriGeometryPolyline\",MultiLineString:\"esriGeometryPolyline\",MultiPoint:\"esriGeometryMultipoint\",Point:\"esriGeometryPoint\",Polygon:\"esriGeometryPolygon\",MultiPolygon:\"esriGeometryPolygon\"};function i(e){return r[e]}function*s(e){switch(e.type){case\"Feature\":yield e;break;case\"FeatureCollection\":for(const t of e.features)t&&(yield t)}}function*c(e){if(!e)return null;switch(e.type){case\"Point\":yield e.coordinates;break;case\"LineString\":case\"MultiPoint\":yield*e.coordinates;break;case\"MultiLineString\":case\"Polygon\":for(const t of e.coordinates)yield*t;break;case\"MultiPolygon\":for(const t of e.coordinates)for(const e of t)yield*e}}function*u(e,o={}){const{geometryType:r,objectIdField:s}=o;for(const c of e){const{geometry:e,properties:u,id:l}=c;if(e&&i(e.type)!==r)continue;const f=u||{};let a=f[s]??null;s&&null!=l&&!f[s]&&(f[s]=a=l);const y=new t(e?d(new n,e,o):null,f,null,a);yield y}}function l(e){for(const t of e)if(t.length>2)return!0;return!1}function f(e){return!y(e)}function a(e){return y(e)}function y(e){let t=0;for(let n=0;n<e.length;n++){const o=e[n],r=e[(n+1)%e.length];t+=o[0]*r[1]-r[0]*o[1]}return t<=0}function p(e){const t=e[0],n=e[e.length-1];return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]||e.push(t),e}function d(e,t,n){switch(t.type){case\"LineString\":return g(e,t,n);case\"MultiLineString\":return m(e,t,n);case\"MultiPoint\":return h(e,t,n);case\"MultiPolygon\":return w(e,t,n);case\"Point\":return P(e,t,n);case\"Polygon\":return b(e,t,n)}}function g(e,t,n){return F(e,t.coordinates,n),e}function m(e,t,n){for(const o of t.coordinates)F(e,o,n);return e}function h(e,t,n){return F(e,t.coordinates,n),e}function w(e,t,n){for(const o of t.coordinates){j(e,o[0],n);for(let t=1;t<o.length;t++)S(e,o[t],n)}return e}function P(e,t,n){return M(e,t.coordinates,n),e}function b(e,t,n){const o=t.coordinates;j(e,o[0],n);for(let r=1;r<o.length;r++)S(e,o[r],n);return e}function j(e,t,n){const o=p(t);f(o)?G(e,o,n):F(e,o,n)}function S(e,t,n){const o=p(t);a(o)?G(e,o,n):F(e,o,n)}function F(e,t,n){for(const o of t)M(e,o,n);e.lengths.push(t.length)}function G(e,t,n){for(let o=t.length-1;o>=0;o--)M(e,t[o],n);e.lengths.push(t.length)}function M(e,t,n){const[o,r,i]=t;e.coords.push(o,r),n.hasZ&&e.coords.push(i||0)}function k(e){switch(typeof e){case\"string\":return\"esriFieldTypeString\";case\"number\":return\"esriFieldTypeDouble\";default:return\"unknown\"}}function O(t){if(!t)throw new e(\"geojson-layer:empty\",\"GeoJSON data is empty\");if(\"Feature\"!==t.type&&\"FeatureCollection\"!==t.type)throw new e(\"geojson-layer:unsupported-geojson-object\",\"missing or not supported GeoJSON object type\",{data:t});const{crs:n}=t;if(!n)return;const o=\"string\"==typeof n?n:\"name\"===n.type?n.properties.name:\"EPSG\"===n.type?n.properties.code:null,r=new RegExp(\".*(CRS84H?|4326)$\",\"i\");if(!o||!r.test(o))throw new e(\"geojson-layer:unsupported-crs\",\"unsupported GeoJSON 'crs' member\",{crs:n})}function T(e,t={}){const n=[],r=new Set,u=new Set;let f,a=!1,y=null,p=!1,{geometryType:d=null}=t,g=!1;for(const o of s(e)){const{geometry:e,properties:t,id:s}=o;if(!e||(d||(d=i(e.type)),i(e.type)===d)){if(!a){a=l(c(e))}if(p||(p=null!=s,p&&(f=typeof s,y=Object.keys(t).filter((e=>t[e]===s)))),p&&null!=s&&(y.length>1?y=y.filter((e=>t[e]===s)):1===y.length&&(y=t[y[0]]===s?y:[])),!g&&t){let e=!0;for(const o in t){if(r.has(o))continue;const i=t[o];if(null==i){e=!1,u.add(o);continue}const s=k(i);\"unknown\"!==s?(u.delete(o),r.add(o),n.push({name:o,alias:o,type:s})):u.add(o)}g=e}}}const m=y&&1===y.length&&y[0]||null;if(m)for(const i of n)if(i.name===m&&o(i)){i.type=\"esriFieldTypeOID\";break}return{fields:n,geometryType:d,hasZ:a,objectIdFieldName:m,objectIdFieldType:f,unknownFields:Array.from(u)}}function L(e,t){return Array.from(u(s(e),t))}export{L as createOptimizedFeatures,i as getGeometryType,T as inferLayerProperties,O as validateGeoJSON};\n"],"sourceRoot":""}